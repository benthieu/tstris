!function(t){var n={};function e(r){if(n[r])return n[r].exports;var o=n[r]={i:r,l:!1,exports:{}};return t[r].call(o.exports,o,o.exports,e),o.l=!0,o.exports}e.m=t,e.c=n,e.d=function(t,n,r){e.o(t,n)||Object.defineProperty(t,n,{enumerable:!0,get:r})},e.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},e.t=function(t,n){if(1&n&&(t=e(t)),8&n)return t;if(4&n&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(e.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&n&&"string"!=typeof t)for(var o in t)e.d(r,o,function(n){return t[n]}.bind(null,o));return r},e.n=function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(n,"a",n),n},e.o=function(t,n){return Object.prototype.hasOwnProperty.call(t,n)},e.p="",e(e.s=0)}([function(t,n,e){"use strict";e.r(n);
/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */
var r=function(t,n){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var e in n)n.hasOwnProperty(e)&&(t[e]=n[e])})(t,n)};function o(t,n){function e(){this.constructor=t}r(t,n),t.prototype=null===n?Object.create(n):(e.prototype=n.prototype,new e)}function i(t){return"function"==typeof t}var s=!1,u={Promise:void 0,set useDeprecatedSynchronousErrorHandling(t){t&&(new Error).stack;s=t},get useDeprecatedSynchronousErrorHandling(){return s}};function c(t){setTimeout((function(){throw t}),0)}var a={closed:!0,next:function(t){},error:function(t){if(u.useDeprecatedSynchronousErrorHandling)throw t;c(t)},complete:function(){}},f=function(){return Array.isArray||function(t){return t&&"number"==typeof t.length}}();function p(t){return null!==t&&"object"==typeof t}var h=function(){function t(t){return Error.call(this),this.message=t?t.length+" errors occurred during unsubscription:\n"+t.map((function(t,n){return n+1+") "+t.toString()})).join("\n  "):"",this.name="UnsubscriptionError",this.errors=t,this}return t.prototype=Object.create(Error.prototype),t}(),l=function(){function t(t){this.closed=!1,this._parentOrParents=null,this._subscriptions=null,t&&(this._ctorUnsubscribe=!0,this._unsubscribe=t)}return t.prototype.unsubscribe=function(){var n;if(!this.closed){var e=this._parentOrParents,r=this._ctorUnsubscribe,o=this._unsubscribe,s=this._subscriptions;if(this.closed=!0,this._parentOrParents=null,this._subscriptions=null,e instanceof t)e.remove(this);else if(null!==e)for(var u=0;u<e.length;++u){e[u].remove(this)}if(i(o)){r&&(this._unsubscribe=void 0);try{o.call(this)}catch(t){n=t instanceof h?y(t.errors):[t]}}if(f(s)){u=-1;for(var c=s.length;++u<c;){var a=s[u];if(p(a))try{a.unsubscribe()}catch(t){n=n||[],t instanceof h?n=n.concat(y(t.errors)):n.push(t)}}}if(n)throw new h(n)}},t.prototype.add=function(n){var e=n;if(!n)return t.EMPTY;switch(typeof n){case"function":e=new t(n);case"object":if(e===this||e.closed||"function"!=typeof e.unsubscribe)return e;if(this.closed)return e.unsubscribe(),e;if(!(e instanceof t)){var r=e;(e=new t)._subscriptions=[r]}break;default:throw new Error("unrecognized teardown "+n+" added to Subscription.")}var o=e._parentOrParents;if(null===o)e._parentOrParents=this;else if(o instanceof t){if(o===this)return e;e._parentOrParents=[o,this]}else{if(-1!==o.indexOf(this))return e;o.push(this)}var i=this._subscriptions;return null===i?this._subscriptions=[e]:i.push(e),e},t.prototype.remove=function(t){var n=this._subscriptions;if(n){var e=n.indexOf(t);-1!==e&&n.splice(e,1)}},t.EMPTY=function(t){return t.closed=!0,t}(new t),t}();function y(t){return t.reduce((function(t,n){return t.concat(n instanceof h?n.errors:n)}),[])}var d=function(){return"function"==typeof Symbol?Symbol("rxSubscriber"):"@@rxSubscriber_"+Math.random()}(),w=function(t){function n(e,r,o){var i=t.call(this)||this;switch(i.syncErrorValue=null,i.syncErrorThrown=!1,i.syncErrorThrowable=!1,i.isStopped=!1,arguments.length){case 0:i.destination=a;break;case 1:if(!e){i.destination=a;break}if("object"==typeof e){e instanceof n?(i.syncErrorThrowable=e.syncErrorThrowable,i.destination=e,e.add(i)):(i.syncErrorThrowable=!0,i.destination=new b(i,e));break}default:i.syncErrorThrowable=!0,i.destination=new b(i,e,r,o)}return i}return o(n,t),n.prototype[d]=function(){return this},n.create=function(t,e,r){var o=new n(t,e,r);return o.syncErrorThrowable=!1,o},n.prototype.next=function(t){this.isStopped||this._next(t)},n.prototype.error=function(t){this.isStopped||(this.isStopped=!0,this._error(t))},n.prototype.complete=function(){this.isStopped||(this.isStopped=!0,this._complete())},n.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,t.prototype.unsubscribe.call(this))},n.prototype._next=function(t){this.destination.next(t)},n.prototype._error=function(t){this.destination.error(t),this.unsubscribe()},n.prototype._complete=function(){this.destination.complete(),this.unsubscribe()},n.prototype._unsubscribeAndRecycle=function(){var t=this._parentOrParents;return this._parentOrParents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parentOrParents=t,this},n}(l),b=function(t){function n(n,e,r,o){var s,u=t.call(this)||this;u._parentSubscriber=n;var c=u;return i(e)?s=e:e&&(s=e.next,r=e.error,o=e.complete,e!==a&&(i((c=Object.create(e)).unsubscribe)&&u.add(c.unsubscribe.bind(c)),c.unsubscribe=u.unsubscribe.bind(u))),u._context=c,u._next=s,u._error=r,u._complete=o,u}return o(n,t),n.prototype.next=function(t){if(!this.isStopped&&this._next){var n=this._parentSubscriber;u.useDeprecatedSynchronousErrorHandling&&n.syncErrorThrowable?this.__tryOrSetError(n,this._next,t)&&this.unsubscribe():this.__tryOrUnsub(this._next,t)}},n.prototype.error=function(t){if(!this.isStopped){var n=this._parentSubscriber,e=u.useDeprecatedSynchronousErrorHandling;if(this._error)e&&n.syncErrorThrowable?(this.__tryOrSetError(n,this._error,t),this.unsubscribe()):(this.__tryOrUnsub(this._error,t),this.unsubscribe());else if(n.syncErrorThrowable)e?(n.syncErrorValue=t,n.syncErrorThrown=!0):c(t),this.unsubscribe();else{if(this.unsubscribe(),e)throw t;c(t)}}},n.prototype.complete=function(){var t=this;if(!this.isStopped){var n=this._parentSubscriber;if(this._complete){var e=function(){return t._complete.call(t._context)};u.useDeprecatedSynchronousErrorHandling&&n.syncErrorThrowable?(this.__tryOrSetError(n,e),this.unsubscribe()):(this.__tryOrUnsub(e),this.unsubscribe())}else this.unsubscribe()}},n.prototype.__tryOrUnsub=function(t,n){try{t.call(this._context,n)}catch(t){if(this.unsubscribe(),u.useDeprecatedSynchronousErrorHandling)throw t;c(t)}},n.prototype.__tryOrSetError=function(t,n,e){if(!u.useDeprecatedSynchronousErrorHandling)throw new Error("bad call");try{n.call(this._context,e)}catch(n){return u.useDeprecatedSynchronousErrorHandling?(t.syncErrorValue=n,t.syncErrorThrown=!0,!0):(c(n),!0)}return!1},n.prototype._unsubscribe=function(){var t=this._parentSubscriber;this._context=null,this._parentSubscriber=null,t.unsubscribe()},n}(w);var v=function(){return"function"==typeof Symbol&&Symbol.observable||"@@observable"}();function _(t){return t}function m(t){return 0===t.length?_:1===t.length?t[0]:function(n){return t.reduce((function(t,n){return n(t)}),n)}}var g=function(){function t(t){this._isScalar=!1,t&&(this._subscribe=t)}return t.prototype.lift=function(n){var e=new t;return e.source=this,e.operator=n,e},t.prototype.subscribe=function(t,n,e){var r=this.operator,o=function(t,n,e){if(t){if(t instanceof w)return t;if(t[d])return t[d]()}return t||n||e?new w(t,n,e):new w(a)}(t,n,e);if(r?o.add(r.call(o,this.source)):o.add(this.source||u.useDeprecatedSynchronousErrorHandling&&!o.syncErrorThrowable?this._subscribe(o):this._trySubscribe(o)),u.useDeprecatedSynchronousErrorHandling&&o.syncErrorThrowable&&(o.syncErrorThrowable=!1,o.syncErrorThrown))throw o.syncErrorValue;return o},t.prototype._trySubscribe=function(t){try{return this._subscribe(t)}catch(n){u.useDeprecatedSynchronousErrorHandling&&(t.syncErrorThrown=!0,t.syncErrorValue=n),!function(t){for(;t;){var n=t,e=n.closed,r=n.destination,o=n.isStopped;if(e||o)return!1;t=r&&r instanceof w?r:null}return!0}(t)?console.warn(n):t.error(n)}},t.prototype.forEach=function(t,n){var e=this;return new(n=O(n))((function(n,r){var o;o=e.subscribe((function(n){try{t(n)}catch(t){r(t),o&&o.unsubscribe()}}),r,n)}))},t.prototype._subscribe=function(t){var n=this.source;return n&&n.subscribe(t)},t.prototype[v]=function(){return this},t.prototype.pipe=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return 0===t.length?this:m(t)(this)},t.prototype.toPromise=function(t){var n=this;return new(t=O(t))((function(t,e){var r;n.subscribe((function(t){return r=t}),(function(t){return e(t)}),(function(){return t(r)}))}))},t.create=function(n){return new t(n)},t}();function O(t){if(t||(t=u.Promise||Promise),!t)throw new Error("no Promise impl found");return t}function S(t,n){return function(e){if("function"!=typeof t)throw new TypeError("argument is not a function. Are you looking for `mapTo()`?");return e.lift(new E(t,n))}}var E=function(){function t(t,n){this.project=t,this.thisArg=n}return t.prototype.call=function(t,n){return n.subscribe(new x(t,this.project,this.thisArg))},t}(),x=function(t){function n(n,e,r){var o=t.call(this,n)||this;return o.project=e,o.count=0,o.thisArg=r||o,o}return o(n,t),n.prototype._next=function(t){var n;try{n=this.project.call(this.thisArg,t,this.count++)}catch(t){return void this.destination.error(t)}this.destination.next(n)},n}(w);function P(t,n,e,r){return i(e)&&(r=e,e=void 0),r?P(t,n,e).pipe(S((function(t){return f(t)?r.apply(void 0,t):r(t)}))):new g((function(r){!function t(n,e,r,o,i){var s;if(function(t){return t&&"function"==typeof t.addEventListener&&"function"==typeof t.removeEventListener}(n)){var u=n;n.addEventListener(e,r,i),s=function(){return u.removeEventListener(e,r,i)}}else if(function(t){return t&&"function"==typeof t.on&&"function"==typeof t.off}(n)){var c=n;n.on(e,r),s=function(){return c.off(e,r)}}else if(function(t){return t&&"function"==typeof t.addListener&&"function"==typeof t.removeListener}(n)){var a=n;n.addListener(e,r),s=function(){return a.removeListener(e,r)}}else{if(!n||!n.length)throw new TypeError("Invalid event target");for(var f=0,p=n.length;f<p;f++)t(n[f],e,r,o,i)}o.add(s)}(t,n,(function(t){arguments.length>1?r.next(Array.prototype.slice.call(arguments)):r.next(t)}),r,e)}))}function I(t){return t&&"function"==typeof t.schedule}var j=function(t){return function(n){for(var e=0,r=t.length;e<r&&!n.closed;e++)n.next(t[e]);n.complete()}};function T(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}var R=T(),k=function(t){return t&&"number"==typeof t.length&&"function"!=typeof t};function A(t){return!!t&&"function"!=typeof t.subscribe&&"function"==typeof t.then}var D=function(t){if(t&&"function"==typeof t[v])return r=t,function(t){var n=r[v]();if("function"!=typeof n.subscribe)throw new TypeError("Provided object does not correctly implement Symbol.observable");return n.subscribe(t)};if(k(t))return j(t);if(A(t))return e=t,function(t){return e.then((function(n){t.closed||(t.next(n),t.complete())}),(function(n){return t.error(n)})).then(null,c),t};if(t&&"function"==typeof t[R])return n=t,function(t){for(var e=n[R]();;){var r=void 0;try{r=e.next()}catch(n){return t.error(n),t}if(r.done){t.complete();break}if(t.next(r.value),t.closed)break}return"function"==typeof e.return&&t.add((function(){e.return&&e.return()})),t};var n,e,r,o=p(t)?"an invalid object":"'"+t+"'";throw new TypeError("You provided "+o+" where a stream was expected. You can provide an Observable, Promise, Array, or Iterable.")};function L(t,n){return new g((function(e){var r=new l,o=0;return r.add(n.schedule((function(){o!==t.length?(e.next(t[o++]),e.closed||r.add(this.schedule())):e.complete()}))),r}))}function N(t,n){if(null!=t){if(function(t){return t&&"function"==typeof t[v]}(t))return function(t,n){return new g((function(e){var r=new l;return r.add(n.schedule((function(){var o=t[v]();r.add(o.subscribe({next:function(t){r.add(n.schedule((function(){return e.next(t)})))},error:function(t){r.add(n.schedule((function(){return e.error(t)})))},complete:function(){r.add(n.schedule((function(){return e.complete()})))}}))}))),r}))}(t,n);if(A(t))return function(t,n){return new g((function(e){var r=new l;return r.add(n.schedule((function(){return t.then((function(t){r.add(n.schedule((function(){e.next(t),r.add(n.schedule((function(){return e.complete()})))})))}),(function(t){r.add(n.schedule((function(){return e.error(t)})))}))}))),r}))}(t,n);if(k(t))return L(t,n);if(function(t){return t&&"function"==typeof t[R]}(t)||"string"==typeof t)return function(t,n){if(!t)throw new Error("Iterable cannot be null");return new g((function(e){var r,o=new l;return o.add((function(){r&&"function"==typeof r.return&&r.return()})),o.add(n.schedule((function(){r=t[R](),o.add(n.schedule((function(){if(!e.closed){var t,n;try{var o=r.next();t=o.value,n=o.done}catch(t){return void e.error(t)}n?e.complete():(e.next(t),this.schedule())}})))}))),o}))}(t,n)}throw new TypeError((null!==t&&typeof t||t)+" is not observable")}var C=function(t){function n(n){var e=t.call(this)||this;return e.parent=n,e}return o(n,t),n.prototype._next=function(t){this.parent.notifyNext(t)},n.prototype._error=function(t){this.parent.notifyError(t),this.unsubscribe()},n.prototype._complete=function(){this.parent.notifyComplete(),this.unsubscribe()},n}(w),F=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return o(n,t),n.prototype.notifyNext=function(t){this.destination.next(t)},n.prototype.notifyError=function(t){this.destination.error(t)},n.prototype.notifyComplete=function(){this.destination.complete()},n}(w);function M(t,n,e){return void 0===e&&(e=Number.POSITIVE_INFINITY),"function"==typeof n?function(r){return r.pipe(M((function(e,r){return(o=t(e,r),i?N(o,i):o instanceof g?o:new g(D(o))).pipe(S((function(t,o){return n(e,t,r,o)})));var o,i}),e))}:("number"==typeof n&&(e=n),function(n){return n.lift(new H(t,e))})}var H=function(){function t(t,n){void 0===n&&(n=Number.POSITIVE_INFINITY),this.project=t,this.concurrent=n}return t.prototype.call=function(t,n){return n.subscribe(new B(t,this.project,this.concurrent))},t}(),B=function(t){function n(n,e,r){void 0===r&&(r=Number.POSITIVE_INFINITY);var o=t.call(this,n)||this;return o.project=e,o.concurrent=r,o.hasCompleted=!1,o.buffer=[],o.active=0,o.index=0,o}return o(n,t),n.prototype._next=function(t){this.active<this.concurrent?this._tryNext(t):this.buffer.push(t)},n.prototype._tryNext=function(t){var n,e=this.index++;try{n=this.project(t,e)}catch(t){return void this.destination.error(t)}this.active++,this._innerSub(n)},n.prototype._innerSub=function(t){var n=new C(this),e=this.destination;e.add(n);var r=function(t,n){if(!n.closed)return t instanceof g?t.subscribe(n):D(t)(n)}(t,n);r!==n&&e.add(r)},n.prototype._complete=function(){this.hasCompleted=!0,0===this.active&&0===this.buffer.length&&this.destination.complete(),this.unsubscribe()},n.prototype.notifyNext=function(t){this.destination.next(t)},n.prototype.notifyComplete=function(){var t=this.buffer;this.active--,t.length>0?this._next(t.shift()):0===this.active&&this.hasCompleted&&this.destination.complete()},n}(F);function U(t){return void 0===t&&(t=Number.POSITIVE_INFINITY),M(_,t)}function V(t,n){return n?L(t,n):new g(j(t))}var Y=function(){function t(t,n){this.compare=t,this.keySelector=n}return t.prototype.call=function(t,n){return n.subscribe(new z(t,this.compare,this.keySelector))},t}(),z=function(t){function n(n,e,r){var o=t.call(this,n)||this;return o.keySelector=r,o.hasKey=!1,"function"==typeof e&&(o.compare=e),o}return o(n,t),n.prototype.compare=function(t,n){return t===n},n.prototype._next=function(t){var n;try{var e=this.keySelector;n=e?e(t):t}catch(t){return this.destination.error(t)}var r=!1;if(this.hasKey)try{r=(0,this.compare)(this.key,n)}catch(t){return this.destination.error(t)}else this.hasKey=!0;r||(this.key=n,this.destination.next(t))},n}(w),G=function(){function t(t,n){var e,r;this.playground=t,this.painter=n,this.keyDown=P(document,"keydown"),this.keyUp=P(document,"keyup"),this.keyEvents=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var e=Number.POSITIVE_INFINITY,r=null,o=t[t.length-1];return I(o)?(r=t.pop(),t.length>1&&"number"==typeof t[t.length-1]&&(e=t.pop())):"number"==typeof o&&(e=t.pop()),null===r&&1===t.length&&t[0]instanceof g?t[0]:U(e)(V(t,r))}(this.keyDown,this.keyUp).pipe((e=function(t,n){return t.code===n.code&&t.type===n.type},function(t){return t.lift(new Y(e,r))})),this.registerEvents()}return t.prototype.startEventAndInterval=function(t){var n=this;t(),this.painter.drawPlayground(),this.keyDownInterval=setInterval((function(){t(),n.painter.drawPlayground()}),500)},t.prototype.setMoveDownInterval=function(){var t=this;this.moveDownInterval=setInterval((function(){t.playground.moveDown(),t.painter.drawPlayground()}),750)},t.prototype.registerEvents=function(){var t=this;this.setMoveDownInterval(),this.keyEvents.subscribe((function(n){if("keydown"!==n.type||t.keyDownInterval)"keyup"===n.type&&("ArrowDown"===n.code&&t.setMoveDownInterval(),clearInterval(t.keyDownInterval),t.keyDownInterval=null);else switch(n.code){case"ArrowUp":t.startEventAndInterval((function(){return t.playground.rotate()}));break;case"ArrowLeft":t.startEventAndInterval((function(){return t.playground.moveLeft()}));break;case"ArrowRight":t.startEventAndInterval((function(){return t.playground.moveRight()}));break;case"ArrowDown":clearInterval(t.moveDownInterval),t.startEventAndInterval((function(){return t.playground.moveDown()}))}}))},t}(),K=function(){function t(t,n){this.canvasRendering=t,this.playground=n,this.defaultFillStyle="#FFF",this.defaultStrokeStyle="#FFF",this.width=t.canvas.width,this.height=t.canvas.height}return t.prototype.drawPlayground=function(){var t=Math.floor(this.height/this.playground.rows),n=Math.floor(this.width/this.playground.cols);this.canvasRendering.fillStyle=this.defaultFillStyle,this.canvasRendering.strokeStyle=this.defaultStrokeStyle,this.canvasRendering.clearRect(0,0,this.width,this.height);for(var e=function(e){for(var o=function(o){var i=n*o,s=t*e,u=r.playground.getPlayground().find((function(t){return t.x===o&&t.y===e}));u?(r.canvasRendering.fillStyle=u.color?u.color:r.defaultFillStyle,r.canvasRendering.fillRect(i,s,n,t)):r.canvasRendering.strokeRect(i,s,n,t)},i=0;i<r.playground.cols;i++)o(i)},r=this,o=0;o<this.playground.rows;o++)e(o)},t}(),q=function(){function t(t,n,e){void 0===e&&(e=""),this.x=t,this.y=n,this.color=e}return t.prototype.moveRight=function(){this.x++},t.prototype.moveLeft=function(){this.x--},t.prototype.moveUp=function(){this.y--},t.prototype.moveDown=function(){this.y++},t.prototype.copy=function(){return new t(this.x,this.y,this.color)},t}(),J=function(){function t(t,n,e){void 0===e&&(e="#FFF"),this.rotations=t,this.size=n,this.color=e,this.currentRotation=0}return t.prototype.initPointer=function(){var t=Math.floor((this.playground.cols-this.size)/2);this.pointer=new q(t,-(this.size-2))},t.prototype.setPlayground=function(t){this.playground=t},t.prototype.rotate=function(){return this.currentRotation=this.currentRotation+1>=this.rotations.length?0:this.currentRotation+1,this},t.prototype.moveRight=function(){return this.pointer.moveRight(),this},t.prototype.moveLeft=function(){return this.pointer.moveLeft(),this},t.prototype.moveDown=function(){return this.pointer.moveDown(),this},t.prototype.copy=function(){var n=new t(this.rotations,this.size);return n.currentRotation=this.currentRotation,n.pointer=this.pointer.copy(),n},t.prototype.calculateCoordinates=function(t){var n=this;return void 0===t&&(t=this.pointer),this.getCurrentRotation().map((function(e){return{x:t.x+e.x,y:t.y+e.y,color:n.color}}))},t.prototype.getCurrentRotation=function(){return this.rotations[this.currentRotation]},t}(),Q=function(){var t=function(n,e){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var e in n)Object.prototype.hasOwnProperty.call(n,e)&&(t[e]=n[e])})(n,e)};return function(n,e){function r(){this.constructor=n}t(n,e),n.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),W=function(t){function n(){return t.call(this,[[new q(0,0),new q(0,1),new q(1,0),new q(1,1)]],2,"#ff5722")||this}return Q(n,t),n}(J),X=function(){var t=function(n,e){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var e in n)Object.prototype.hasOwnProperty.call(n,e)&&(t[e]=n[e])})(n,e)};return function(n,e){function r(){this.constructor=n}t(n,e),n.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),Z=function(t){function n(){return t.call(this,[[new q(0,0),new q(1,0),new q(1,1),new q(1,2)],[new q(0,1),new q(1,1),new q(2,1),new q(2,0)],[new q(1,0),new q(1,1),new q(1,2),new q(2,2)],[new q(0,1),new q(1,1),new q(2,1),new q(0,2)]],3,"#ffc107")||this}return X(n,t),n}(J),$=function(){var t=function(n,e){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var e in n)Object.prototype.hasOwnProperty.call(n,e)&&(t[e]=n[e])})(n,e)};return function(n,e){function r(){this.constructor=n}t(n,e),n.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),tt=function(t){function n(){return t.call(this,[[new q(1,0),new q(2,0),new q(1,1),new q(1,2)],[new q(0,1),new q(1,1),new q(2,1),new q(2,2)],[new q(1,0),new q(1,1),new q(1,2),new q(0,2)],[new q(0,0),new q(0,1),new q(1,1),new q(2,1)]],3,"#8bc34a")||this}return $(n,t),n}(J),nt=function(){var t=function(n,e){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var e in n)Object.prototype.hasOwnProperty.call(n,e)&&(t[e]=n[e])})(n,e)};return function(n,e){function r(){this.constructor=n}t(n,e),n.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),et=function(t){function n(){return t.call(this,[[new q(1,0),new q(1,1),new q(1,2),new q(1,3)],[new q(0,1),new q(1,1),new q(2,1),new q(3,1)],[new q(2,0),new q(2,1),new q(2,2),new q(2,3)],[new q(0,1),new q(1,1),new q(2,1),new q(3,1)]],4,"#009688")||this}return nt(n,t),n}(J),rt=function(){var t=function(n,e){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var e in n)Object.prototype.hasOwnProperty.call(n,e)&&(t[e]=n[e])})(n,e)};return function(n,e){function r(){this.constructor=n}t(n,e),n.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),ot=function(t){function n(){return t.call(this,[[new q(1,1),new q(2,1),new q(0,2),new q(1,2)],[new q(0,0),new q(0,1),new q(1,1),new q(1,2)],[new q(0,1),new q(1,1),new q(1,0),new q(2,0)],[new q(1,0),new q(1,1),new q(2,1),new q(2,2)]],3,"#03a9f4")||this}return rt(n,t),n}(J),it=function(){var t=function(n,e){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var e in n)Object.prototype.hasOwnProperty.call(n,e)&&(t[e]=n[e])})(n,e)};return function(n,e){function r(){this.constructor=n}t(n,e),n.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),st=function(t){function n(){return t.call(this,[[new q(0,1),new q(1,0),new q(1,1),new q(1,2)],[new q(1,0),new q(0,1),new q(1,1),new q(2,1)],[new q(1,0),new q(1,1),new q(1,2),new q(2,1)],[new q(0,1),new q(1,1),new q(2,1),new q(1,2)]],3,"#673ab7")||this}return it(n,t),n}(J),ut=function(){var t=function(n,e){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var e in n)Object.prototype.hasOwnProperty.call(n,e)&&(t[e]=n[e])})(n,e)};return function(n,e){function r(){this.constructor=n}t(n,e),n.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),ct=function(t){function n(){return t.call(this,[[new q(0,1),new q(1,1),new q(1,2),new q(2,2)],[new q(0,1),new q(0,2),new q(1,1),new q(1,0)],[new q(0,0),new q(1,0),new q(1,1),new q(2,1)],[new q(2,0),new q(1,1),new q(1,2),new q(2,1)]],3,"#e91e63")||this}return ut(n,t),n}(J),at=function(){for(var t=0,n=0,e=arguments.length;n<e;n++)t+=arguments[n].length;var r=Array(t),o=0;for(n=0;n<e;n++)for(var i=arguments[n],s=0,u=i.length;s<u;s++,o++)r[o]=i[s];return r},ft=function(){function t(t,n){this.rows=t,this.cols=n}return t.prototype.startNewGame=function(){this.allPointers=new Array,this.insertNewShape()},t.prototype.insertNewShape=function(){this.shape=this.getRandomShape(),this.shape.setPlayground(this),this.shape.initPointer(),this.detectCollisionOrOutOfBounds(this.shape)&&this.startNewGame()},t.prototype.getPlayground=function(){return at(this.allPointers,this.shape.calculateCoordinates())},t.prototype.getCurrentShape=function(){return this.shape},t.prototype.moveRight=function(){this.detectCollisionOrOutOfBounds(this.shape.copy().moveRight())||this.shape.moveRight()},t.prototype.moveLeft=function(){this.detectCollisionOrOutOfBounds(this.shape.copy().moveLeft())||this.shape.moveLeft()},t.prototype.moveDown=function(){var t;this.detectCollisionOrOutOfBounds(this.shape.copy().moveDown())?((t=this.allPointers).push.apply(t,this.shape.calculateCoordinates()),this.detectAndRemoveFullLine(),this.insertNewShape()):this.shape.moveDown()},t.prototype.rotate=function(){var t=this.shape.copy();t.rotate(),this.detectCollisionOrOutOfBounds(t)?this.detectCollisionOrOutOfBounds(t.copy().moveRight())?this.detectCollisionOrOutOfBounds(t.copy().moveLeft())?this.detectCollisionOrOutOfBounds(t.copy().moveRight().moveRight())?this.detectCollisionOrOutOfBounds(t.copy().moveLeft().moveLeft())||(this.shape.moveLeft(),this.shape.moveLeft(),this.shape.rotate()):(this.shape.moveRight(),this.shape.moveRight(),this.shape.rotate()):(this.shape.moveLeft(),this.shape.rotate()):(this.shape.moveRight(),this.shape.rotate()):this.shape.rotate()},t.prototype.detectCollisionOrOutOfBounds=function(t){var n=this,e=t.calculateCoordinates().find((function(t){return t.x<0||t.x>=n.cols||t.y>=n.rows})),r=t.calculateCoordinates().find((function(t){return!!n.allPointers.find((function(n){return n.x===t.x&&n.y===t.y}))}));return!!e||!!r},t.prototype.detectAndRemoveFullLine=function(){var t=this;this.detectFullLine().forEach((function(n){t.allPointers=t.allPointers.filter((function(t){return t.y!==n})),t.allPointers=t.allPointers.map((function(t){return t.y<n&&t.y++,t}))}))},t.prototype.detectFullLine=function(){for(var t=new Array,n=function(n){e.allPointers.filter((function(t){return t.y===n})).length===e.cols&&t.push(n)},e=this,r=0;r<this.rows;r++)n(r);return t},t.prototype.getRandomShape=function(){switch(Math.round(6*Math.random())){case 0:return new W;case 1:return new Z;case 2:return new tt;case 3:return new et;case 4:return new ot;case 5:return new st;case 6:return new ct}},t}();new function(t){this.cols=8,this.rows=15,this.playground=new ft(this.rows,this.cols),this.painter=new K(t,this.playground),this.events=new G(this.playground,this.painter),this.playground.startNewGame(),this.painter.drawPlayground()}(document.getElementById("main").getContext("2d"))}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL3RzbGliL3RzbGliLmVzNi5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvcnhqcy9fZXNtNS9pbnRlcm5hbC91dGlsL2lzRnVuY3Rpb24uanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL3J4anMvX2VzbTUvaW50ZXJuYWwvY29uZmlnLmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9yeGpzL19lc201L2ludGVybmFsL3V0aWwvaG9zdFJlcG9ydEVycm9yLmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9yeGpzL19lc201L2ludGVybmFsL09ic2VydmVyLmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9yeGpzL19lc201L2ludGVybmFsL3V0aWwvaXNBcnJheS5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvcnhqcy9fZXNtNS9pbnRlcm5hbC91dGlsL2lzT2JqZWN0LmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9yeGpzL19lc201L2ludGVybmFsL3V0aWwvVW5zdWJzY3JpcHRpb25FcnJvci5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvcnhqcy9fZXNtNS9pbnRlcm5hbC9TdWJzY3JpcHRpb24uanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL3J4anMvX2VzbTUvaW50ZXJuYWwvc3ltYm9sL3J4U3Vic2NyaWJlci5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvcnhqcy9fZXNtNS9pbnRlcm5hbC9TdWJzY3JpYmVyLmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9yeGpzL19lc201L2ludGVybmFsL3N5bWJvbC9vYnNlcnZhYmxlLmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9yeGpzL19lc201L2ludGVybmFsL3V0aWwvaWRlbnRpdHkuanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL3J4anMvX2VzbTUvaW50ZXJuYWwvdXRpbC9waXBlLmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9yeGpzL19lc201L2ludGVybmFsL09ic2VydmFibGUuanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL3J4anMvX2VzbTUvaW50ZXJuYWwvdXRpbC90b1N1YnNjcmliZXIuanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL3J4anMvX2VzbTUvaW50ZXJuYWwvdXRpbC9jYW5SZXBvcnRFcnJvci5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvcnhqcy9fZXNtNS9pbnRlcm5hbC9vcGVyYXRvcnMvbWFwLmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9yeGpzL19lc201L2ludGVybmFsL29ic2VydmFibGUvZnJvbUV2ZW50LmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9yeGpzL19lc201L2ludGVybmFsL3V0aWwvaXNTY2hlZHVsZXIuanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL3J4anMvX2VzbTUvaW50ZXJuYWwvdXRpbC9zdWJzY3JpYmVUb0FycmF5LmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9yeGpzL19lc201L2ludGVybmFsL3N5bWJvbC9pdGVyYXRvci5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvcnhqcy9fZXNtNS9pbnRlcm5hbC91dGlsL2lzQXJyYXlMaWtlLmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9yeGpzL19lc201L2ludGVybmFsL3V0aWwvaXNQcm9taXNlLmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9yeGpzL19lc201L2ludGVybmFsL3V0aWwvc3Vic2NyaWJlVG8uanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL3J4anMvX2VzbTUvaW50ZXJuYWwvdXRpbC9zdWJzY3JpYmVUb09ic2VydmFibGUuanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL3J4anMvX2VzbTUvaW50ZXJuYWwvdXRpbC9zdWJzY3JpYmVUb1Byb21pc2UuanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL3J4anMvX2VzbTUvaW50ZXJuYWwvdXRpbC9zdWJzY3JpYmVUb0l0ZXJhYmxlLmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9yeGpzL19lc201L2ludGVybmFsL3NjaGVkdWxlZC9zY2hlZHVsZUFycmF5LmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9yeGpzL19lc201L2ludGVybmFsL3NjaGVkdWxlZC9zY2hlZHVsZWQuanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL3J4anMvX2VzbTUvaW50ZXJuYWwvdXRpbC9pc0ludGVyb3BPYnNlcnZhYmxlLmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9yeGpzL19lc201L2ludGVybmFsL3NjaGVkdWxlZC9zY2hlZHVsZU9ic2VydmFibGUuanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL3J4anMvX2VzbTUvaW50ZXJuYWwvc2NoZWR1bGVkL3NjaGVkdWxlUHJvbWlzZS5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvcnhqcy9fZXNtNS9pbnRlcm5hbC91dGlsL2lzSXRlcmFibGUuanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL3J4anMvX2VzbTUvaW50ZXJuYWwvc2NoZWR1bGVkL3NjaGVkdWxlSXRlcmFibGUuanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL3J4anMvX2VzbTUvaW50ZXJuYWwvaW5uZXJTdWJzY3JpYmUuanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL3J4anMvX2VzbTUvaW50ZXJuYWwvb3BlcmF0b3JzL21lcmdlTWFwLmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9yeGpzL19lc201L2ludGVybmFsL29ic2VydmFibGUvZnJvbS5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvcnhqcy9fZXNtNS9pbnRlcm5hbC9vcGVyYXRvcnMvbWVyZ2VBbGwuanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL3J4anMvX2VzbTUvaW50ZXJuYWwvb2JzZXJ2YWJsZS9mcm9tQXJyYXkuanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL3J4anMvX2VzbTUvaW50ZXJuYWwvb3BlcmF0b3JzL2Rpc3RpbmN0VW50aWxDaGFuZ2VkLmpzIiwid2VicGFjazovLy8uL3NyYy9ldmVudHMudHMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL3J4anMvX2VzbTUvaW50ZXJuYWwvb2JzZXJ2YWJsZS9tZXJnZS5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvcGFpbnRlci50cyIsIndlYnBhY2s6Ly8vLi9zcmMvZ3JpZC1wb2ludGVyLnRzIiwid2VicGFjazovLy8uL3NyYy9zaGFwZS50cyIsIndlYnBhY2s6Ly8vLi9zcmMvc2hhcGVzL2Jsb2NrLnRzIiwid2VicGFjazovLy8uL3NyYy9zaGFwZXMvbC1taXJyb3Itc2hhcGUudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL3NoYXBlcy9sLXNoYXBlLnRzIiwid2VicGFjazovLy8uL3NyYy9zaGFwZXMvbGluZS50cyIsIndlYnBhY2s6Ly8vLi9zcmMvc2hhcGVzL3Mtc2hhcGUudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL3NoYXBlcy90LXNoYXBlLnRzIiwid2VicGFjazovLy8uL3NyYy9zaGFwZXMvei1zaGFwZS50cyIsIndlYnBhY2s6Ly8vLi9zcmMvcGxheWdyb3VuZC50cyIsIndlYnBhY2s6Ly8vLi9zcmMvaW5kZXgudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL3RzdHJpcy50cyJdLCJuYW1lcyI6WyJpbnN0YWxsZWRNb2R1bGVzIiwiX193ZWJwYWNrX3JlcXVpcmVfXyIsIm1vZHVsZUlkIiwiZXhwb3J0cyIsIm1vZHVsZSIsImkiLCJsIiwibW9kdWxlcyIsImNhbGwiLCJtIiwiYyIsImQiLCJuYW1lIiwiZ2V0dGVyIiwibyIsIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwiZW51bWVyYWJsZSIsImdldCIsInIiLCJTeW1ib2wiLCJ0b1N0cmluZ1RhZyIsInZhbHVlIiwidCIsIm1vZGUiLCJfX2VzTW9kdWxlIiwibnMiLCJjcmVhdGUiLCJrZXkiLCJiaW5kIiwibiIsIm9iamVjdCIsInByb3BlcnR5IiwicHJvdG90eXBlIiwiaGFzT3duUHJvcGVydHkiLCJwIiwicyIsImV4dGVuZFN0YXRpY3MiLCJiIiwic2V0UHJvdG90eXBlT2YiLCJfX3Byb3RvX18iLCJBcnJheSIsIl9fZXh0ZW5kcyIsIl9fIiwidGhpcyIsImNvbnN0cnVjdG9yIiwiaXNGdW5jdGlvbiIsIngiLCJfZW5hYmxlX3N1cGVyX2dyb3NzX21vZGVfdGhhdF93aWxsX2NhdXNlX2JhZF90aGluZ3MiLCJjb25maWciLCJQcm9taXNlIiwidW5kZWZpbmVkIiwiRXJyb3IiLCJzdGFjayIsImhvc3RSZXBvcnRFcnJvciIsImVyciIsInNldFRpbWVvdXQiLCJlbXB0eSIsImNsb3NlZCIsIm5leHQiLCJlcnJvciIsInVzZURlcHJlY2F0ZWRTeW5jaHJvbm91c0Vycm9ySGFuZGxpbmciLCJjb21wbGV0ZSIsImlzQXJyYXkiLCJsZW5ndGgiLCJpc09iamVjdCIsIlVuc3Vic2NyaXB0aW9uRXJyb3IiLCJVbnN1YnNjcmlwdGlvbkVycm9ySW1wbCIsImVycm9ycyIsIm1lc3NhZ2UiLCJtYXAiLCJ0b1N0cmluZyIsImpvaW4iLCJTdWJzY3JpcHRpb24iLCJ1bnN1YnNjcmliZSIsIl9wYXJlbnRPclBhcmVudHMiLCJfc3Vic2NyaXB0aW9ucyIsIl9jdG9yVW5zdWJzY3JpYmUiLCJfdW5zdWJzY3JpYmUiLCJyZW1vdmUiLCJpbmRleCIsImUiLCJmbGF0dGVuVW5zdWJzY3JpcHRpb25FcnJvcnMiLCJsZW4iLCJzdWIiLCJjb25jYXQiLCJwdXNoIiwiYWRkIiwidGVhcmRvd24iLCJzdWJzY3JpcHRpb24iLCJFTVBUWSIsInRtcCIsImluZGV4T2YiLCJzdWJzY3JpcHRpb25zIiwic3Vic2NyaXB0aW9uSW5kZXgiLCJzcGxpY2UiLCJyZWR1Y2UiLCJlcnJzIiwicnhTdWJzY3JpYmVyIiwiTWF0aCIsInJhbmRvbSIsIl9zdXBlciIsIlN1YnNjcmliZXIiLCJkZXN0aW5hdGlvbk9yTmV4dCIsIl90aGlzIiwic3luY0Vycm9yVmFsdWUiLCJzeW5jRXJyb3JUaHJvd24iLCJzeW5jRXJyb3JUaHJvd2FibGUiLCJpc1N0b3BwZWQiLCJhcmd1bWVudHMiLCJkZXN0aW5hdGlvbiIsInN1YnNjcmliZXIiLCJfbmV4dCIsIl9lcnJvciIsIl9jb21wbGV0ZSIsIl91bnN1YnNjcmliZUFuZFJlY3ljbGUiLCJTYWZlU3Vic2NyaWJlciIsIl9wYXJlbnRTdWJzY3JpYmVyIiwib2JzZXJ2ZXJPck5leHQiLCJjb250ZXh0IiwiX2NvbnRleHQiLCJfX3RyeU9yU2V0RXJyb3IiLCJfX3RyeU9yVW5zdWIiLCJ3cmFwcGVkQ29tcGxldGUiLCJmbiIsInBhcmVudCIsIm9ic2VydmFibGUiLCJpZGVudGl0eSIsInBpcGVGcm9tQXJyYXkiLCJmbnMiLCJpbnB1dCIsInByZXYiLCJPYnNlcnZhYmxlIiwic3Vic2NyaWJlIiwiX2lzU2NhbGFyIiwiX3N1YnNjcmliZSIsImxpZnQiLCJvcGVyYXRvciIsInNvdXJjZSIsInNpbmsiLCJuZXh0T3JPYnNlcnZlciIsInRvU3Vic2NyaWJlciIsIl90cnlTdWJzY3JpYmUiLCJvYnNlcnZlciIsIl9hIiwiY2xvc2VkXzEiLCJjYW5SZXBvcnRFcnJvciIsImNvbnNvbGUiLCJ3YXJuIiwiZm9yRWFjaCIsInByb21pc2VDdG9yIiwiZ2V0UHJvbWlzZUN0b3IiLCJyZXNvbHZlIiwicmVqZWN0IiwicGlwZSIsIm9wZXJhdGlvbnMiLCJfaSIsInRvUHJvbWlzZSIsInByb2plY3QiLCJ0aGlzQXJnIiwiVHlwZUVycm9yIiwiTWFwT3BlcmF0b3IiLCJNYXBTdWJzY3JpYmVyIiwiY291bnQiLCJyZXN1bHQiLCJmcm9tRXZlbnQiLCJ0YXJnZXQiLCJldmVudE5hbWUiLCJvcHRpb25zIiwicmVzdWx0U2VsZWN0b3IiLCJhcmdzIiwiYXBwbHkiLCJzZXR1cFN1YnNjcmlwdGlvbiIsInNvdXJjZU9iaiIsImhhbmRsZXIiLCJhZGRFdmVudExpc3RlbmVyIiwicmVtb3ZlRXZlbnRMaXN0ZW5lciIsImlzRXZlbnRUYXJnZXQiLCJzb3VyY2VfMSIsIm9uIiwib2ZmIiwiaXNKUXVlcnlTdHlsZUV2ZW50RW1pdHRlciIsInNvdXJjZV8yIiwiYWRkTGlzdGVuZXIiLCJyZW1vdmVMaXN0ZW5lciIsImlzTm9kZVN0eWxlRXZlbnRFbWl0dGVyIiwic291cmNlXzMiLCJzbGljZSIsImlzU2NoZWR1bGVyIiwic2NoZWR1bGUiLCJzdWJzY3JpYmVUb0FycmF5IiwiYXJyYXkiLCJnZXRTeW1ib2xJdGVyYXRvciIsIml0ZXJhdG9yIiwiaXNBcnJheUxpa2UiLCJpc1Byb21pc2UiLCJ0aGVuIiwic3Vic2NyaWJlVG8iLCJvYmoiLCJvYnMiLCJwcm9taXNlIiwiaXRlcmFibGUiLCJpdGVtIiwiZG9uZSIsInJldHVybiIsInNjaGVkdWxlQXJyYXkiLCJzY2hlZHVsZXIiLCJzY2hlZHVsZWQiLCJpc0ludGVyb3BPYnNlcnZhYmxlIiwic2NoZWR1bGVPYnNlcnZhYmxlIiwic2NoZWR1bGVQcm9taXNlIiwiaXNJdGVyYWJsZSIsInNjaGVkdWxlSXRlcmFibGUiLCJTaW1wbGVJbm5lclN1YnNjcmliZXIiLCJub3RpZnlOZXh0Iiwibm90aWZ5RXJyb3IiLCJub3RpZnlDb21wbGV0ZSIsIlNpbXBsZU91dGVyU3Vic2NyaWJlciIsImlubmVyVmFsdWUiLCJtZXJnZU1hcCIsImNvbmN1cnJlbnQiLCJOdW1iZXIiLCJQT1NJVElWRV9JTkZJTklUWSIsImEiLCJpaSIsIk1lcmdlTWFwT3BlcmF0b3IiLCJNZXJnZU1hcFN1YnNjcmliZXIiLCJoYXNDb21wbGV0ZWQiLCJidWZmZXIiLCJhY3RpdmUiLCJfdHJ5TmV4dCIsIl9pbm5lclN1YiIsImlzaCIsImlubmVyU3Vic2NyaWJlciIsImlubmVyU3Vic2NyaXB0aW9uIiwiaW5uZXJTdWJzY3JpYmUiLCJzaGlmdCIsIm1lcmdlQWxsIiwiZnJvbUFycmF5IiwiRGlzdGluY3RVbnRpbENoYW5nZWRPcGVyYXRvciIsImNvbXBhcmUiLCJrZXlTZWxlY3RvciIsIkRpc3RpbmN0VW50aWxDaGFuZ2VkU3Vic2NyaWJlciIsImhhc0tleSIsInkiLCJwbGF5Z3JvdW5kIiwicGFpbnRlciIsImtleURvd24iLCJkb2N1bWVudCIsImtleVVwIiwia2V5RXZlbnRzIiwib2JzZXJ2YWJsZXMiLCJsYXN0IiwicG9wIiwibWVyZ2UiLCJjb2RlIiwidHlwZSIsInJlZ2lzdGVyRXZlbnRzIiwic3RhcnRFdmVudEFuZEludGVydmFsIiwiZXZlbnQiLCJkcmF3UGxheWdyb3VuZCIsImtleURvd25JbnRlcnZhbCIsInNldEludGVydmFsIiwic2V0TW92ZURvd25JbnRlcnZhbCIsIm1vdmVEb3duSW50ZXJ2YWwiLCJtb3ZlRG93biIsImNsZWFySW50ZXJ2YWwiLCJyb3RhdGUiLCJtb3ZlTGVmdCIsIm1vdmVSaWdodCIsImNhbnZhc1JlbmRlcmluZyIsImRlZmF1bHRGaWxsU3R5bGUiLCJkZWZhdWx0U3Ryb2tlU3R5bGUiLCJ3aWR0aCIsImNhbnZhcyIsImhlaWdodCIsImJveEhlaWdodCIsImZsb29yIiwicm93cyIsImJveFdpZHRoIiwiY29scyIsImZpbGxTdHlsZSIsInN0cm9rZVN0eWxlIiwiY2xlYXJSZWN0IiwicG9zaXRpb25YIiwicG9zaXRpb25ZIiwiaXNEcmF3biIsImdldFBsYXlncm91bmQiLCJmaW5kIiwicG9pbnRlciIsImNvbG9yIiwiZmlsbFJlY3QiLCJzdHJva2VSZWN0IiwibW92ZVVwIiwiY29weSIsIkdyaWRQb2ludGVyIiwicm90YXRpb25zIiwic2l6ZSIsImN1cnJlbnRSb3RhdGlvbiIsImluaXRQb2ludGVyIiwiZnJvbUxlZnQiLCJzZXRQbGF5Z3JvdW5kIiwibmV3U2hhcGUiLCJTaGFwZSIsImNhbGN1bGF0ZUNvb3JkaW5hdGVzIiwiY2FsY3VsYXRpb25Qb2ludGVyIiwiZ2V0Q3VycmVudFJvdGF0aW9uIiwiY3VycmVudEZpZWxkIiwic3RhcnROZXdHYW1lIiwiYWxsUG9pbnRlcnMiLCJpbnNlcnROZXdTaGFwZSIsInNoYXBlIiwiZ2V0UmFuZG9tU2hhcGUiLCJkZXRlY3RDb2xsaXNpb25Pck91dE9mQm91bmRzIiwiZ2V0Q3VycmVudFNoYXBlIiwiZGV0ZWN0QW5kUmVtb3ZlRnVsbExpbmUiLCJ0ZW1wU2hhcGUiLCJvdXRPZkJvdW5kcyIsImNvbGxpc2lvbiIsInBsYXlncm91bmRQb2ludGVyIiwiZGV0ZWN0RnVsbExpbmUiLCJmdWxsUm93IiwiZmlsdGVyIiwiZnVsbExpbmVzIiwicm93Iiwicm91bmQiLCJQYWludGVyIiwiZXZlbnRzIiwiZ2V0RWxlbWVudEJ5SWQiLCJnZXRDb250ZXh0Il0sIm1hcHBpbmdzIjoiYUFDRSxJQUFJQSxFQUFtQixHQUd2QixTQUFTQyxFQUFvQkMsR0FHNUIsR0FBR0YsRUFBaUJFLEdBQ25CLE9BQU9GLEVBQWlCRSxHQUFVQyxRQUduQyxJQUFJQyxFQUFTSixFQUFpQkUsR0FBWSxDQUN6Q0csRUFBR0gsRUFDSEksR0FBRyxFQUNISCxRQUFTLElBVVYsT0FOQUksRUFBUUwsR0FBVU0sS0FBS0osRUFBT0QsUUFBU0MsRUFBUUEsRUFBT0QsUUFBU0YsR0FHL0RHLEVBQU9FLEdBQUksRUFHSkYsRUFBT0QsUUFLZkYsRUFBb0JRLEVBQUlGLEVBR3hCTixFQUFvQlMsRUFBSVYsRUFHeEJDLEVBQW9CVSxFQUFJLFNBQVNSLEVBQVNTLEVBQU1DLEdBQzNDWixFQUFvQmEsRUFBRVgsRUFBU1MsSUFDbENHLE9BQU9DLGVBQWViLEVBQVNTLEVBQU0sQ0FBRUssWUFBWSxFQUFNQyxJQUFLTCxLQUtoRVosRUFBb0JrQixFQUFJLFNBQVNoQixHQUNYLG9CQUFYaUIsUUFBMEJBLE9BQU9DLGFBQzFDTixPQUFPQyxlQUFlYixFQUFTaUIsT0FBT0MsWUFBYSxDQUFFQyxNQUFPLFdBRTdEUCxPQUFPQyxlQUFlYixFQUFTLGFBQWMsQ0FBRW1CLE9BQU8sS0FRdkRyQixFQUFvQnNCLEVBQUksU0FBU0QsRUFBT0UsR0FFdkMsR0FEVSxFQUFQQSxJQUFVRixFQUFRckIsRUFBb0JxQixJQUMvQixFQUFQRSxFQUFVLE9BQU9GLEVBQ3BCLEdBQVcsRUFBUEUsR0FBOEIsaUJBQVZGLEdBQXNCQSxHQUFTQSxFQUFNRyxXQUFZLE9BQU9ILEVBQ2hGLElBQUlJLEVBQUtYLE9BQU9ZLE9BQU8sTUFHdkIsR0FGQTFCLEVBQW9Ca0IsRUFBRU8sR0FDdEJYLE9BQU9DLGVBQWVVLEVBQUksVUFBVyxDQUFFVCxZQUFZLEVBQU1LLE1BQU9BLElBQ3RELEVBQVBFLEdBQTRCLGlCQUFURixFQUFtQixJQUFJLElBQUlNLEtBQU9OLEVBQU9yQixFQUFvQlUsRUFBRWUsRUFBSUUsRUFBSyxTQUFTQSxHQUFPLE9BQU9OLEVBQU1NLElBQVFDLEtBQUssS0FBTUQsSUFDOUksT0FBT0YsR0FJUnpCLEVBQW9CNkIsRUFBSSxTQUFTMUIsR0FDaEMsSUFBSVMsRUFBU1QsR0FBVUEsRUFBT3FCLFdBQzdCLFdBQXdCLE9BQU9yQixFQUFnQixTQUMvQyxXQUE4QixPQUFPQSxHQUV0QyxPQURBSCxFQUFvQlUsRUFBRUUsRUFBUSxJQUFLQSxHQUM1QkEsR0FJUlosRUFBb0JhLEVBQUksU0FBU2lCLEVBQVFDLEdBQVksT0FBT2pCLE9BQU9rQixVQUFVQyxlQUFlMUIsS0FBS3VCLEVBQVFDLElBR3pHL0IsRUFBb0JrQyxFQUFJLEdBSWpCbEMsRUFBb0JBLEVBQW9CbUMsRUFBSSxHOzs7Ozs7Ozs7Ozs7Ozs7QUNsRXJELElBQUlDLEVBQWdCLFNBQVMxQixFQUFHMkIsR0FJNUIsT0FIQUQsRUFBZ0J0QixPQUFPd0IsZ0JBQ2xCLENBQUVDLFVBQVcsY0FBZ0JDLE9BQVMsU0FBVTlCLEVBQUcyQixHQUFLM0IsRUFBRTZCLFVBQVlGLElBQ3ZFLFNBQVUzQixFQUFHMkIsR0FBSyxJQUFLLElBQUlILEtBQUtHLEVBQU9BLEVBQUVKLGVBQWVDLEtBQUl4QixFQUFFd0IsR0FBS0csRUFBRUgsTUFDcER4QixFQUFHMkIsSUFHckIsU0FBU0ksRUFBVS9CLEVBQUcyQixHQUV6QixTQUFTSyxJQUFPQyxLQUFLQyxZQUFjbEMsRUFEbkMwQixFQUFjMUIsRUFBRzJCLEdBRWpCM0IsRUFBRXNCLFVBQWtCLE9BQU5LLEVBQWF2QixPQUFPWSxPQUFPVyxJQUFNSyxFQUFHVixVQUFZSyxFQUFFTCxVQUFXLElBQUlVLEdDekI1RSxTQUFTRyxFQUFXQyxHQUN2QixNQUFvQixtQkFBTkEsRUNEbEIsSUFBSUMsR0FBc0QsRUFDL0NDLEVBQVMsQ0FDaEJDLGFBQVNDLEVBQ1QsMENBQTBDN0IsR0FDbENBLElBQzBCLElBQUk4QixPQUNxR0MsTUFLdklMLEVBQXNEMUIsR0FFMUQsNENBQ0ksT0FBTzBCLElDZFIsU0FBU00sRUFBZ0JDLEdBQzVCQyxZQUFXLFdBQWMsTUFBTUQsSUFBUSxHQ0NwQyxJQUFJRSxFQUFRLENBQ2ZDLFFBQVEsRUFDUkMsS0FBTSxTQUFVckMsS0FDaEJzQyxNQUFPLFNBQVVMLEdBQ2IsR0FBSU4sRUFBT1ksc0NBQ1AsTUFBTU4sRUFHTkQsRUFBZ0JDLElBR3hCTyxTQUFVLGNDYkhDLEVBQXdCLFdBQWUsT0FBT3RCLE1BQU1zQixTQUFXLFNBQVdoQixHQUFLLE9BQU9BLEdBQXlCLGlCQUFiQSxFQUFFaUIsUUFBNUUsR0NBNUIsU0FBU0MsRUFBU2xCLEdBQ3JCLE9BQWEsT0FBTkEsR0FBMkIsaUJBQU5BLEVDRGhDLElBWVdtQixFQVppQyxXQUN4QyxTQUFTQyxFQUF3QkMsR0FNN0IsT0FMQWhCLE1BQU01QyxLQUFLb0MsTUFDWEEsS0FBS3lCLFFBQVVELEVBQ1hBLEVBQU9KLE9BQVMsNENBQThDSSxFQUFPRSxLQUFJLFNBQVVmLEVBQUtsRCxHQUFLLE9BQU9BLEVBQUksRUFBSSxLQUFPa0QsRUFBSWdCLGNBQWVDLEtBQUssUUFBVSxHQUN6SjVCLEtBQUtoQyxLQUFPLHNCQUNaZ0MsS0FBS3dCLE9BQVNBLEVBQ1B4QixLQUdYLE9BREF1QixFQUF3QmxDLFVBQTBCbEIsT0FBT1ksT0FBT3lCLE1BQU1uQixXQUMvRGtDLEVBVmlDLEdDSXhDLEVBQThCLFdBQzlCLFNBQVNNLEVBQWFDLEdBQ2xCOUIsS0FBS2MsUUFBUyxFQUNkZCxLQUFLK0IsaUJBQW1CLEtBQ3hCL0IsS0FBS2dDLGVBQWlCLEtBQ2xCRixJQUNBOUIsS0FBS2lDLGtCQUFtQixFQUN4QmpDLEtBQUtrQyxhQUFlSixHQXlINUIsT0F0SEFELEVBQWF4QyxVQUFVeUMsWUFBYyxXQUNqQyxJQUFJTixFQUNKLElBQUl4QixLQUFLYyxPQUFULENBR0EsSUFBZWlCLEVBQU4vQixLQUE0QitCLGlCQUFrQkUsRUFBOUNqQyxLQUFvRWlDLGlCQUFrQkMsRUFBdEZsQyxLQUF3R2tDLGFBQWNGLEVBQXRIaEMsS0FBMElnQyxlQUluSixHQUhBaEMsS0FBS2MsUUFBUyxFQUNkZCxLQUFLK0IsaUJBQW1CLEtBQ3hCL0IsS0FBS2dDLGVBQWlCLEtBQ2xCRCxhQUE0QkYsRUFDNUJFLEVBQWlCSSxPQUFPbkMsV0FFdkIsR0FBeUIsT0FBckIrQixFQUNMLElBQUssSUFBSUssRUFBUSxFQUFHQSxFQUFRTCxFQUFpQlgsU0FBVWdCLEVBQU8sQ0FDM0NMLEVBQWlCSyxHQUN2QkQsT0FBT25DLE1BR3hCLEdBQUlFLEVBQVdnQyxHQUFlLENBQ3RCRCxJQUNBakMsS0FBS2tDLGtCQUFlM0IsR0FFeEIsSUFDSTJCLEVBQWF0RSxLQUFLb0MsTUFFdEIsTUFBT3FDLEdBQ0hiLEVBQVNhLGFBQWFmLEVBQXNCZ0IsRUFBNEJELEVBQUViLFFBQVUsQ0FBQ2EsSUFHN0YsR0FBSWxCLEVBQVFhLEdBQ1IsQ0FBSUksR0FBUyxFQUViLElBRkEsSUFDSUcsRUFBTVAsRUFBZVosU0FDaEJnQixFQUFRRyxHQUFLLENBQ2xCLElBQUlDLEVBQU1SLEVBQWVJLEdBQ3pCLEdBQUlmLEVBQVNtQixHQUNULElBQ0lBLEVBQUlWLGNBRVIsTUFBT08sR0FDSGIsRUFBU0EsR0FBVSxHQUNmYSxhQUFhZixFQUNiRSxFQUFTQSxFQUFPaUIsT0FBT0gsRUFBNEJELEVBQUViLFNBR3JEQSxFQUFPa0IsS0FBS0wsS0FNaEMsR0FBSWIsRUFDQSxNQUFNLElBQUlGLEVBQW9CRSxLQUd0Q0ssRUFBYXhDLFVBQVVzRCxJQUFNLFNBQVVDLEdBQ25DLElBQUlDLEVBQWVELEVBQ25CLElBQUtBLEVBQ0QsT0FBT2YsRUFBYWlCLE1BRXhCLGNBQWVGLEdBQ1gsSUFBSyxXQUNEQyxFQUFlLElBQUloQixFQUFhZSxHQUNwQyxJQUFLLFNBQ0QsR0FBSUMsSUFBaUI3QyxNQUFRNkMsRUFBYS9CLFFBQThDLG1CQUE3QitCLEVBQWFmLFlBQ3BFLE9BQU9lLEVBRU4sR0FBSTdDLEtBQUtjLE9BRVYsT0FEQStCLEVBQWFmLGNBQ05lLEVBRU4sS0FBTUEsYUFBd0JoQixHQUFlLENBQzlDLElBQUlrQixFQUFNRixHQUNWQSxFQUFlLElBQUloQixHQUNORyxlQUFpQixDQUFDZSxHQUVuQyxNQUNKLFFBQ0ksTUFBTSxJQUFJdkMsTUFBTSx5QkFBMkJvQyxFQUFXLDJCQUc5RCxJQUFJYixFQUFtQmMsRUFBYWQsaUJBQ3BDLEdBQXlCLE9BQXJCQSxFQUNBYyxFQUFhZCxpQkFBbUIvQixVQUUvQixHQUFJK0IsYUFBNEJGLEVBQWMsQ0FDL0MsR0FBSUUsSUFBcUIvQixLQUNyQixPQUFPNkMsRUFFWEEsRUFBYWQsaUJBQW1CLENBQUNBLEVBQWtCL0IsVUFFbEQsS0FBd0MsSUFBcEMrQixFQUFpQmlCLFFBQVFoRCxNQUk5QixPQUFPNkMsRUFIUGQsRUFBaUJXLEtBQUsxQyxNQUsxQixJQUFJaUQsRUFBZ0JqRCxLQUFLZ0MsZUFPekIsT0FOc0IsT0FBbEJpQixFQUNBakQsS0FBS2dDLGVBQWlCLENBQUNhLEdBR3ZCSSxFQUFjUCxLQUFLRyxHQUVoQkEsR0FFWGhCLEVBQWF4QyxVQUFVOEMsT0FBUyxTQUFVVSxHQUN0QyxJQUFJSSxFQUFnQmpELEtBQUtnQyxlQUN6QixHQUFJaUIsRUFBZSxDQUNmLElBQUlDLEVBQW9CRCxFQUFjRCxRQUFRSCxJQUNuQixJQUF2QkssR0FDQUQsRUFBY0UsT0FBT0QsRUFBbUIsS0FJcERyQixFQUFhaUIsTUFBUyxTQUFVakMsR0FFNUIsT0FEQUEsRUFBTUMsUUFBUyxFQUNSRCxFQUZVLENBR25CLElBQUlnQixHQUNDQSxFQWhJc0IsR0FtSWpDLFNBQVNTLEVBQTRCZCxHQUNqQyxPQUFPQSxFQUFPNEIsUUFBTyxTQUFVQyxFQUFNMUMsR0FBTyxPQUFPMEMsRUFBS1osT0FBUTlCLGFBQWVXLEVBQXVCWCxFQUFJYSxPQUFTYixLQUFTLElDeEl6SCxJQUFJMkMsRUFBNkIsV0FDcEMsTUFBeUIsbUJBQVg5RSxPQUNNQSxPQUFPLGdCQUNyQixrQkFBa0MrRSxLQUFLQyxTQUhULEdDT3BDLEVBQTRCLFNBQVVDLEdBRXRDLFNBQVNDLEVBQVdDLEVBQW1CM0MsRUFBT0UsR0FDMUMsSUFBSTBDLEVBQVFILEVBQU83RixLQUFLb0MsT0FBU0EsS0FLakMsT0FKQTRELEVBQU1DLGVBQWlCLEtBQ3ZCRCxFQUFNRSxpQkFBa0IsRUFDeEJGLEVBQU1HLG9CQUFxQixFQUMzQkgsRUFBTUksV0FBWSxFQUNWQyxVQUFVN0MsUUFDZCxLQUFLLEVBQ0R3QyxFQUFNTSxZQUFjckQsRUFDcEIsTUFDSixLQUFLLEVBQ0QsSUFBSzhDLEVBQW1CLENBQ3BCQyxFQUFNTSxZQUFjckQsRUFDcEIsTUFFSixHQUFpQyxpQkFBdEI4QyxFQUFnQyxDQUNuQ0EsYUFBNkJELEdBQzdCRSxFQUFNRyxtQkFBcUJKLEVBQWtCSSxtQkFDN0NILEVBQU1NLFlBQWNQLEVBQ3BCQSxFQUFrQmhCLElBQUlpQixLQUd0QkEsRUFBTUcsb0JBQXFCLEVBQzNCSCxFQUFNTSxZQUFjLElBQUksRUFBZU4sRUFBT0QsSUFFbEQsTUFFUixRQUNJQyxFQUFNRyxvQkFBcUIsRUFDM0JILEVBQU1NLFlBQWMsSUFBSSxFQUFlTixFQUFPRCxFQUFtQjNDLEVBQU9FLEdBR2hGLE9BQU8wQyxFQW9EWCxPQXJGQSxFQUFrQkYsRUFBWUQsR0FtQzlCQyxFQUFXckUsVUFBVWlFLEdBQXNCLFdBQWMsT0FBT3RELE1BQ2hFMEQsRUFBVzNFLE9BQVMsU0FBVWdDLEVBQU1DLEVBQU9FLEdBQ3ZDLElBQUlpRCxFQUFhLElBQUlULEVBQVczQyxFQUFNQyxFQUFPRSxHQUU3QyxPQURBaUQsRUFBV0osb0JBQXFCLEVBQ3pCSSxHQUVYVCxFQUFXckUsVUFBVTBCLEtBQU8sU0FBVXJDLEdBQzdCc0IsS0FBS2dFLFdBQ05oRSxLQUFLb0UsTUFBTTFGLElBR25CZ0YsRUFBV3JFLFVBQVUyQixNQUFRLFNBQVVMLEdBQzlCWCxLQUFLZ0UsWUFDTmhFLEtBQUtnRSxXQUFZLEVBQ2pCaEUsS0FBS3FFLE9BQU8xRCxLQUdwQitDLEVBQVdyRSxVQUFVNkIsU0FBVyxXQUN2QmxCLEtBQUtnRSxZQUNOaEUsS0FBS2dFLFdBQVksRUFDakJoRSxLQUFLc0UsY0FHYlosRUFBV3JFLFVBQVV5QyxZQUFjLFdBQzNCOUIsS0FBS2MsU0FHVGQsS0FBS2dFLFdBQVksRUFDakJQLEVBQU9wRSxVQUFVeUMsWUFBWWxFLEtBQUtvQyxRQUV0QzBELEVBQVdyRSxVQUFVK0UsTUFBUSxTQUFVMUYsR0FDbkNzQixLQUFLa0UsWUFBWW5ELEtBQUtyQyxJQUUxQmdGLEVBQVdyRSxVQUFVZ0YsT0FBUyxTQUFVMUQsR0FDcENYLEtBQUtrRSxZQUFZbEQsTUFBTUwsR0FDdkJYLEtBQUs4QixlQUVUNEIsRUFBV3JFLFVBQVVpRixVQUFZLFdBQzdCdEUsS0FBS2tFLFlBQVloRCxXQUNqQmxCLEtBQUs4QixlQUVUNEIsRUFBV3JFLFVBQVVrRix1QkFBeUIsV0FDMUMsSUFBSXhDLEVBQW1CL0IsS0FBSytCLGlCQU01QixPQUxBL0IsS0FBSytCLGlCQUFtQixLQUN4Qi9CLEtBQUs4QixjQUNMOUIsS0FBS2MsUUFBUyxFQUNkZCxLQUFLZ0UsV0FBWSxFQUNqQmhFLEtBQUsrQixpQkFBbUJBLEVBQ2pCL0IsTUFFSjBELEVBdEZvQixDQXVGN0IsR0FFRSxFQUFnQyxTQUFVRCxHQUUxQyxTQUFTZSxFQUFlQyxFQUFtQkMsRUFBZ0IxRCxFQUFPRSxHQUM5RCxJQUVJSCxFQUZBNkMsRUFBUUgsRUFBTzdGLEtBQUtvQyxPQUFTQSxLQUNqQzRELEVBQU1hLGtCQUFvQkEsRUFFMUIsSUFBSUUsRUFBVWYsRUFvQmQsT0FuQkkxRCxFQUFXd0UsR0FDWDNELEVBQU8yRCxFQUVGQSxJQUNMM0QsRUFBTzJELEVBQWUzRCxLQUN0QkMsRUFBUTBELEVBQWUxRCxNQUN2QkUsRUFBV3dELEVBQWV4RCxTQUN0QndELElBQW1CN0QsSUFFZlgsR0FESnlFLEVBQVV4RyxPQUFPWSxPQUFPMkYsSUFDRDVDLGNBQ25COEIsRUFBTWpCLElBQUlnQyxFQUFRN0MsWUFBWTdDLEtBQUswRixJQUV2Q0EsRUFBUTdDLFlBQWM4QixFQUFNOUIsWUFBWTdDLEtBQUsyRSxLQUdyREEsRUFBTWdCLFNBQVdELEVBQ2pCZixFQUFNUSxNQUFRckQsRUFDZDZDLEVBQU1TLE9BQVNyRCxFQUNmNEMsRUFBTVUsVUFBWXBELEVBQ1gwQyxFQTBHWCxPQW5JQSxFQUFrQlksRUFBZ0JmLEdBMkJsQ2UsRUFBZW5GLFVBQVUwQixLQUFPLFNBQVVyQyxHQUN0QyxJQUFLc0IsS0FBS2dFLFdBQWFoRSxLQUFLb0UsTUFBTyxDQUMvQixJQUFJSyxFQUFvQnpFLEtBQUt5RSxrQkFDeEJwRSxFQUFPWSx1Q0FBMEN3RCxFQUFrQlYsbUJBRy9EL0QsS0FBSzZFLGdCQUFnQkosRUFBbUJ6RSxLQUFLb0UsTUFBTzFGLElBQ3pEc0IsS0FBSzhCLGNBSEw5QixLQUFLOEUsYUFBYTlFLEtBQUtvRSxNQUFPMUYsS0FPMUM4RixFQUFlbkYsVUFBVTJCLE1BQVEsU0FBVUwsR0FDdkMsSUFBS1gsS0FBS2dFLFVBQVcsQ0FDakIsSUFBSVMsRUFBb0J6RSxLQUFLeUUsa0JBQ3pCeEQsRUFBd0NaLEVBQU9ZLHNDQUNuRCxHQUFJakIsS0FBS3FFLE9BQ0FwRCxHQUEwQ3dELEVBQWtCVixvQkFLN0QvRCxLQUFLNkUsZ0JBQWdCSixFQUFtQnpFLEtBQUtxRSxPQUFRMUQsR0FDckRYLEtBQUs4QixnQkFMTDlCLEtBQUs4RSxhQUFhOUUsS0FBS3FFLE9BQVExRCxHQUMvQlgsS0FBSzhCLG9CQU9SLEdBQUsyQyxFQUFrQlYsbUJBUXBCOUMsR0FDQXdELEVBQWtCWixlQUFpQmxELEVBQ25DOEQsRUFBa0JYLGlCQUFrQixHQUdwQ3BELEVBQWdCQyxHQUVwQlgsS0FBSzhCLGtCQWZ1QyxDQUU1QyxHQURBOUIsS0FBSzhCLGNBQ0RiLEVBQ0EsTUFBTU4sRUFFVkQsRUFBZ0JDLE1BYzVCNkQsRUFBZW5GLFVBQVU2QixTQUFXLFdBQ2hDLElBQUkwQyxFQUFRNUQsS0FDWixJQUFLQSxLQUFLZ0UsVUFBVyxDQUNqQixJQUFJUyxFQUFvQnpFLEtBQUt5RSxrQkFDN0IsR0FBSXpFLEtBQUtzRSxVQUFXLENBQ2hCLElBQUlTLEVBQWtCLFdBQWMsT0FBT25CLEVBQU1VLFVBQVUxRyxLQUFLZ0csRUFBTWdCLFdBQ2pFdkUsRUFBT1ksdUNBQTBDd0QsRUFBa0JWLG9CQUtwRS9ELEtBQUs2RSxnQkFBZ0JKLEVBQW1CTSxHQUN4Qy9FLEtBQUs4QixnQkFMTDlCLEtBQUs4RSxhQUFhQyxHQUNsQi9FLEtBQUs4QixvQkFRVDlCLEtBQUs4QixnQkFJakIwQyxFQUFlbkYsVUFBVXlGLGFBQWUsU0FBVUUsRUFBSXRHLEdBQ2xELElBQ0lzRyxFQUFHcEgsS0FBS29DLEtBQUs0RSxTQUFVbEcsR0FFM0IsTUFBT2lDLEdBRUgsR0FEQVgsS0FBSzhCLGNBQ0R6QixFQUFPWSxzQ0FDUCxNQUFNTixFQUdORCxFQUFnQkMsS0FJNUI2RCxFQUFlbkYsVUFBVXdGLGdCQUFrQixTQUFVSSxFQUFRRCxFQUFJdEcsR0FDN0QsSUFBSzJCLEVBQU9ZLHNDQUNSLE1BQU0sSUFBSVQsTUFBTSxZQUVwQixJQUNJd0UsRUFBR3BILEtBQUtvQyxLQUFLNEUsU0FBVWxHLEdBRTNCLE1BQU9pQyxHQUNILE9BQUlOLEVBQU9ZLHVDQUNQZ0UsRUFBT3BCLGVBQWlCbEQsRUFDeEJzRSxFQUFPbkIsaUJBQWtCLEdBQ2xCLElBR1BwRCxFQUFnQkMsSUFDVCxHQUdmLE9BQU8sR0FFWDZELEVBQWVuRixVQUFVNkMsYUFBZSxXQUNwQyxJQUFJdUMsRUFBb0J6RSxLQUFLeUUsa0JBQzdCekUsS0FBSzRFLFNBQVcsS0FDaEI1RSxLQUFLeUUsa0JBQW9CLEtBQ3pCQSxFQUFrQjNDLGVBRWYwQyxFQXBJd0IsQ0FxSWpDLEdDck9LLElBQUksRUFBMkIsV0FBZSxNQUF5QixtQkFBWGhHLFFBQXlCQSxPQUFPMEcsWUFBYyxlQUEzRSxHQ0EvQixTQUFTQyxFQUFTaEYsR0FDckIsT0FBT0EsRUNPSixTQUFTaUYsRUFBY0MsR0FDMUIsT0FBbUIsSUFBZkEsRUFBSWpFLE9BQ0crRCxFQUVRLElBQWZFLEVBQUlqRSxPQUNHaUUsRUFBSSxHQUVSLFNBQWVDLEdBQ2xCLE9BQU9ELEVBQUlqQyxRQUFPLFNBQVVtQyxFQUFNUCxHQUFNLE9BQU9BLEVBQUdPLEtBQVVELElDWHBFLElBQUksRUFBNEIsV0FDNUIsU0FBU0UsRUFBV0MsR0FDaEJ6RixLQUFLMEYsV0FBWSxFQUNiRCxJQUNBekYsS0FBSzJGLFdBQWFGLEdBNkYxQixPQTFGQUQsRUFBV25HLFVBQVV1RyxLQUFPLFNBQVVDLEdBQ2xDLElBQUlYLEVBQWEsSUFBSU0sRUFHckIsT0FGQU4sRUFBV1ksT0FBUzlGLEtBQ3BCa0YsRUFBV1csU0FBV0EsRUFDZlgsR0FFWE0sRUFBV25HLFVBQVVvRyxVQUFZLFNBQVVmLEVBQWdCMUQsRUFBT0UsR0FDOUQsSUFBSTJFLEVBQVc3RixLQUFLNkYsU0FDaEJFLEVDakJMLFNBQXNCQyxFQUFnQmhGLEVBQU9FLEdBQ2hELEdBQUk4RSxFQUFnQixDQUNoQixHQUFJQSxhQUEwQixFQUMxQixPQUFPQSxFQUVYLEdBQUlBLEVBQWUxQyxHQUNmLE9BQU8wQyxFQUFlMUMsS0FHOUIsT0FBSzBDLEdBQW1CaEYsR0FBVUUsRUFHM0IsSUFBSSxFQUFXOEUsRUFBZ0JoRixFQUFPRSxHQUZsQyxJQUFJLEVBQVdMLEdET1hvRixDQUFhdkIsRUFBZ0IxRCxFQUFPRSxHQVMvQyxHQVJJMkUsRUFDQUUsRUFBS3BELElBQUlrRCxFQUFTakksS0FBS21JLEVBQU0vRixLQUFLOEYsU0FHbENDLEVBQUtwRCxJQUFJM0MsS0FBSzhGLFFBQVd6RixFQUFPWSx3Q0FBMEM4RSxFQUFLaEMsbUJBQzNFL0QsS0FBSzJGLFdBQVdJLEdBQ2hCL0YsS0FBS2tHLGNBQWNILElBRXZCMUYsRUFBT1ksdUNBQ0g4RSxFQUFLaEMscUJBQ0xnQyxFQUFLaEMsb0JBQXFCLEVBQ3RCZ0MsRUFBS2pDLGlCQUNMLE1BQU1pQyxFQUFLbEMsZUFJdkIsT0FBT2tDLEdBRVhQLEVBQVduRyxVQUFVNkcsY0FBZ0IsU0FBVUgsR0FDM0MsSUFDSSxPQUFPL0YsS0FBSzJGLFdBQVdJLEdBRTNCLE1BQU9wRixHQUNDTixFQUFPWSx3Q0FDUDhFLEVBQUtqQyxpQkFBa0IsRUFDdkJpQyxFQUFLbEMsZUFBaUJsRCxJRTdDL0IsU0FBd0J3RixHQUMzQixLQUFPQSxHQUFVLENBQ2IsSUFBSUMsRUFBS0QsRUFBVUUsRUFBV0QsRUFBR3RGLE9BQVFvRCxFQUFja0MsRUFBR2xDLFlBQWFGLEVBQVlvQyxFQUFHcEMsVUFDdEYsR0FBSXFDLEdBQVlyQyxFQUNaLE9BQU8sRUFHUG1DLEVBREtqQyxHQUFlQSxhQUF1QixFQUNoQ0EsRUFHQSxLQUduQixPQUFPLEVGa0NLb0MsQ0FBZVAsR0FJZlEsUUFBUUMsS0FBSzdGLEdBSGJvRixFQUFLL0UsTUFBTUwsS0FPdkI2RSxFQUFXbkcsVUFBVW9ILFFBQVUsU0FBVTFGLEVBQU0yRixHQUMzQyxJQUFJOUMsRUFBUTVELEtBRVosT0FBTyxJQURQMEcsRUFBY0MsRUFBZUQsS0FDTixTQUFVRSxFQUFTQyxHQUN0QyxJQUFJaEUsRUFDSkEsRUFBZWUsRUFBTTZCLFdBQVUsU0FBVS9HLEdBQ3JDLElBQ0lxQyxFQUFLckMsR0FFVCxNQUFPaUMsR0FDSGtHLEVBQU9sRyxHQUNIa0MsR0FDQUEsRUFBYWYsaUJBR3RCK0UsRUFBUUQsT0FHbkJwQixFQUFXbkcsVUFBVXNHLFdBQWEsU0FBVXhCLEdBQ3hDLElBQUkyQixFQUFTOUYsS0FBSzhGLE9BQ2xCLE9BQU9BLEdBQVVBLEVBQU9MLFVBQVV0QixJQUV0Q3FCLEVBQVduRyxVQUFVLEdBQXFCLFdBQ3RDLE9BQU9XLE1BRVh3RixFQUFXbkcsVUFBVXlILEtBQU8sV0FFeEIsSUFEQSxJQUFJQyxFQUFhLEdBQ1JDLEVBQUssRUFBR0EsRUFBSy9DLFVBQVU3QyxPQUFRNEYsSUFDcENELEVBQVdDLEdBQU0vQyxVQUFVK0MsR0FFL0IsT0FBMEIsSUFBdEJELEVBQVczRixPQUNKcEIsS0FFSm9GLEVBQWMyQixFQUFkM0IsQ0FBMEJwRixPQUVyQ3dGLEVBQVduRyxVQUFVNEgsVUFBWSxTQUFVUCxHQUN2QyxJQUFJOUMsRUFBUTVELEtBRVosT0FBTyxJQURQMEcsRUFBY0MsRUFBZUQsS0FDTixTQUFVRSxFQUFTQyxHQUN0QyxJQUFJbkksRUFDSmtGLEVBQU02QixXQUFVLFNBQVV0RixHQUFLLE9BQU96QixFQUFReUIsS0FBTSxTQUFVUSxHQUFPLE9BQU9rRyxFQUFPbEcsTUFBUyxXQUFjLE9BQU9pRyxFQUFRbEksVUFHakk4RyxFQUFXekcsT0FBUyxTQUFVMEcsR0FDMUIsT0FBTyxJQUFJRCxFQUFXQyxJQUVuQkQsRUFqR29CLEdBb0cvQixTQUFTbUIsRUFBZUQsR0FJcEIsR0FIS0EsSUFDREEsRUFBY3JHLEVBQU9DLFNBQVdBLFVBRS9Cb0csRUFDRCxNQUFNLElBQUlsRyxNQUFNLHlCQUVwQixPQUFPa0csRUc5R0osU0FBU2hGLEVBQUl3RixFQUFTQyxHQUN6QixPQUFPLFNBQXNCckIsR0FDekIsR0FBdUIsbUJBQVpvQixFQUNQLE1BQU0sSUFBSUUsVUFBVSw4REFFeEIsT0FBT3RCLEVBQU9GLEtBQUssSUFBSXlCLEVBQVlILEVBQVNDLEtBR3BELElBQUlFLEVBQTZCLFdBQzdCLFNBQVNBLEVBQVlILEVBQVNDLEdBQzFCbkgsS0FBS2tILFFBQVVBLEVBQ2ZsSCxLQUFLbUgsUUFBVUEsRUFLbkIsT0FIQUUsRUFBWWhJLFVBQVV6QixLQUFPLFNBQVV1RyxFQUFZMkIsR0FDL0MsT0FBT0EsRUFBT0wsVUFBVSxJQUFJLEVBQWN0QixFQUFZbkUsS0FBS2tILFFBQVNsSCxLQUFLbUgsV0FFdEVFLEVBUnFCLEdBVzVCLEVBQStCLFNBQVU1RCxHQUV6QyxTQUFTNkQsRUFBY3BELEVBQWFnRCxFQUFTQyxHQUN6QyxJQUFJdkQsRUFBUUgsRUFBTzdGLEtBQUtvQyxLQUFNa0UsSUFBZ0JsRSxLQUk5QyxPQUhBNEQsRUFBTXNELFFBQVVBLEVBQ2hCdEQsRUFBTTJELE1BQVEsRUFDZDNELEVBQU11RCxRQUFVQSxHQUFXdkQsRUFDcEJBLEVBYVgsT0FuQkEsRUFBa0IwRCxFQUFlN0QsR0FRakM2RCxFQUFjakksVUFBVStFLE1BQVEsU0FBVTFGLEdBQ3RDLElBQUk4SSxFQUNKLElBQ0lBLEVBQVN4SCxLQUFLa0gsUUFBUXRKLEtBQUtvQyxLQUFLbUgsUUFBU3pJLEVBQU9zQixLQUFLdUgsU0FFekQsTUFBTzVHLEdBRUgsWUFEQVgsS0FBS2tFLFlBQVlsRCxNQUFNTCxHQUczQlgsS0FBS2tFLFlBQVluRCxLQUFLeUcsSUFFbkJGLEVBcEJ1QixDQXFCaEMsR0NyQ0ssU0FBU0csRUFBVUMsRUFBUUMsRUFBV0MsRUFBU0MsR0FLbEQsT0FKSTNILEVBQVcwSCxLQUNYQyxFQUFpQkQsRUFDakJBLE9BQVVySCxHQUVWc0gsRUFDT0osRUFBVUMsRUFBUUMsRUFBV0MsR0FBU2QsS0FBS3BGLEdBQUksU0FBVW9HLEdBQVEsT0FBTzNHLEVBQVEyRyxHQUFRRCxFQUFlRSxXQUFNLEVBQVFELEdBQVFELEVBQWVDLE9BRWhKLElBQUksR0FBVyxTQUFVM0QsSUFZcEMsU0FBUzZELEVBQWtCQyxFQUFXTixFQUFXTyxFQUFTL0QsRUFBWXlELEdBQ2xFLElBQUk5RixFQUNKLEdBK0JKLFNBQXVCbUcsR0FDbkIsT0FBT0EsR0FBbUQsbUJBQS9CQSxFQUFVRSxrQkFBNEUsbUJBQWxDRixFQUFVRyxvQkFoQ3JGQyxDQUFjSixHQUFZLENBQzFCLElBQUlLLEVBQVdMLEVBQ2ZBLEVBQVVFLGlCQUFpQlIsRUFBV08sRUFBU04sR0FDL0M5RixFQUFjLFdBQWMsT0FBT3dHLEVBQVNGLG9CQUFvQlQsRUFBV08sRUFBU04sU0FFbkYsR0F1QlQsU0FBbUNLLEdBQy9CLE9BQU9BLEdBQXFDLG1CQUFqQkEsRUFBVU0sSUFBOEMsbUJBQWxCTixFQUFVTyxJQXhCbEVDLENBQTBCUixHQUFZLENBQzNDLElBQUlTLEVBQVdULEVBQ2ZBLEVBQVVNLEdBQUdaLEVBQVdPLEdBQ3hCcEcsRUFBYyxXQUFjLE9BQU80RyxFQUFTRixJQUFJYixFQUFXTyxTQUUxRCxHQWVULFNBQWlDRCxHQUM3QixPQUFPQSxHQUE4QyxtQkFBMUJBLEVBQVVVLGFBQWtFLG1CQUE3QlYsRUFBVVcsZUFoQjNFQyxDQUF3QlosR0FBWSxDQUN6QyxJQUFJYSxFQUFXYixFQUNmQSxFQUFVVSxZQUFZaEIsRUFBV08sR0FDakNwRyxFQUFjLFdBQWMsT0FBT2dILEVBQVNGLGVBQWVqQixFQUFXTyxRQUVyRSxLQUFJRCxJQUFhQSxFQUFVN0csT0FNNUIsTUFBTSxJQUFJZ0csVUFBVSx3QkFMcEIsSUFBSyxJQUFJM0osRUFBSSxFQUFHOEUsRUFBTTBGLEVBQVU3RyxPQUFRM0QsRUFBSThFLEVBQUs5RSxJQUM3Q3VLLEVBQWtCQyxFQUFVeEssR0FBSWtLLEVBQVdPLEVBQVMvRCxFQUFZeUQsR0FNeEV6RCxFQUFXeEIsSUFBSWIsR0E1QlhrRyxDQUFrQk4sRUFBUUMsR0FSMUIsU0FBaUJ0RixHQUNUNEIsVUFBVTdDLE9BQVMsRUFDbkIrQyxFQUFXcEQsS0FBS2xCLE1BQU1SLFVBQVUwSixNQUFNbkwsS0FBS3FHLFlBRzNDRSxFQUFXcEQsS0FBS3NCLEtBR3NCOEIsRUFBWXlELE1DdEIzRCxTQUFTb0IsRUFBWXRLLEdBQ3hCLE9BQU9BLEdBQW1DLG1CQUFuQkEsRUFBTXVLLFNDRDFCLElBQUlDLEVBQW1CLFNBQVVDLEdBQ3BDLE9BQU8sU0FBVWhGLEdBQ2IsSUFBSyxJQUFJMUcsRUFBSSxFQUFHOEUsRUFBTTRHLEVBQU0vSCxPQUFRM0QsRUFBSThFLElBQVE0QixFQUFXckQsT0FBUXJELElBQy9EMEcsRUFBV3BELEtBQUtvSSxFQUFNMUwsSUFFMUIwRyxFQUFXakQsYUNMWixTQUFTa0ksSUFDWixNQUFzQixtQkFBWDVLLFFBQTBCQSxPQUFPNkssU0FHckM3SyxPQUFPNkssU0FGSCxhQUlSLElBQUksRUFBeUJELElDTnpCRSxFQUFjLFNBQVduSixHQUFLLE9BQU9BLEdBQXlCLGlCQUFiQSxFQUFFaUIsUUFBb0MsbUJBQU5qQixHQ0FyRixTQUFTb0osRUFBVTdLLEdBQ3RCLFFBQVNBLEdBQW9DLG1CQUFwQkEsRUFBTStHLFdBQWtELG1CQUFmL0csRUFBTThLLEtDUXJFLElBQUlDLEVBQWMsU0FBVWpDLEdBQy9CLEdBQU1BLEdBQStDLG1CQUE5QkEsRUFBTyxHQUMxQixPQ1ZxQ2tDLEVEVVJsQyxFQ1QxQixTQUFVckQsR0FDYixJQUFJd0YsRUFBTUQsRUFBSSxLQUNkLEdBQTZCLG1CQUFsQkMsRUFBSWxFLFVBQ1gsTUFBTSxJQUFJMkIsVUFBVSxrRUFHcEIsT0FBT3VDLEVBQUlsRSxVQUFVdEIsSURLeEIsR0FBSW1GLEVBQVk5QixHQUNqQixPQUFPMEIsRUFBaUIxQixHQUV2QixHQUFJK0IsRUFBVS9CLEdBQ2YsT0VoQmtDb0MsRUZnQlJwQyxFRWZ2QixTQUFVckQsR0FRYixPQVBBeUYsRUFBUUosTUFBSyxTQUFVOUssR0FDZHlGLEVBQVdyRCxTQUNacUQsRUFBV3BELEtBQUtyQyxHQUNoQnlGLEVBQVdqRCxlQUVoQixTQUFVUCxHQUFPLE9BQU93RCxFQUFXbkQsTUFBTUwsTUFDdkM2SSxLQUFLLEtBQU05SSxHQUNUeUQsR0ZTTixHQUFNcUQsR0FBNkMsbUJBQTVCQSxFQUFPLEdBQy9CLE9HbkJtQ3FDLEVIbUJSckMsRUdsQnhCLFNBQVVyRCxHQUViLElBREEsSUFBSWtGLEVBQVdRLEVBQVMsT0FDckIsQ0FDQyxJQUFJQyxPQUFPLEVBQ1gsSUFDSUEsRUFBT1QsRUFBU3RJLE9BRXBCLE1BQU9KLEdBRUgsT0FEQXdELEVBQVduRCxNQUFNTCxHQUNWd0QsRUFFWCxHQUFJMkYsRUFBS0MsS0FBTSxDQUNYNUYsRUFBV2pELFdBQ1gsTUFHSixHQURBaUQsRUFBV3BELEtBQUsrSSxFQUFLcEwsT0FDakJ5RixFQUFXckQsT0FDWCxNQVVSLE1BUCtCLG1CQUFwQnVJLEVBQVNXLFFBQ2hCN0YsRUFBV3hCLEtBQUksV0FDUDBHLEVBQVNXLFFBQ1RYLEVBQVNXLFlBSWQ3RixHSE5QLElHdEJtQzBGLEVEQURELEVEQUdGLEVEc0JqQ2hMLEVBQVEyQyxFQUFTbUcsR0FBVSxvQkFBc0IsSUFBTUEsRUFBUyxJQUdwRSxNQUFNLElBQUlKLFVBRkEsZ0JBQWtCMUksRUFBbEIsOEZJdEJYLFNBQVN1TCxFQUFjM0UsRUFBTzRFLEdBQ2pDLE9BQU8sSUFBSSxHQUFXLFNBQVUvRixHQUM1QixJQUFJM0IsRUFBTSxJQUFJLEVBQ1YvRSxFQUFJLEVBV1IsT0FWQStFLEVBQUlHLElBQUl1SCxFQUFVakIsVUFBUyxXQUNuQnhMLElBQU02SCxFQUFNbEUsUUFJaEIrQyxFQUFXcEQsS0FBS3VFLEVBQU03SCxNQUNqQjBHLEVBQVdyRCxRQUNaMEIsRUFBSUcsSUFBSTNDLEtBQUtpSixhQUxiOUUsRUFBV2pELGVBUVpzQixLQ1JSLFNBQVMySCxFQUFVN0UsRUFBTzRFLEdBQzdCLEdBQWEsTUFBVDVFLEVBQWUsQ0FDZixHQ1RELFNBQTZCQSxHQUNoQyxPQUFPQSxHQUE2QyxtQkFBN0JBLEVBQU0sR0RRckI4RSxDQUFvQjlFLEdBQ3BCLE9FUkwsU0FBNEJBLEVBQU80RSxHQUN0QyxPQUFPLElBQUksR0FBVyxTQUFVL0YsR0FDNUIsSUFBSTNCLEVBQU0sSUFBSSxFQVNkLE9BUkFBLEVBQUlHLElBQUl1SCxFQUFVakIsVUFBUyxXQUN2QixJQUFJL0QsRUFBYUksRUFBTSxLQUN2QjlDLEVBQUlHLElBQUl1QyxFQUFXTyxVQUFVLENBQ3pCMUUsS0FBTSxTQUFVckMsR0FBUzhELEVBQUlHLElBQUl1SCxFQUFVakIsVUFBUyxXQUFjLE9BQU85RSxFQUFXcEQsS0FBS3JDLFFBQ3pGc0MsTUFBTyxTQUFVTCxHQUFPNkIsRUFBSUcsSUFBSXVILEVBQVVqQixVQUFTLFdBQWMsT0FBTzlFLEVBQVduRCxNQUFNTCxRQUN6Rk8sU0FBVSxXQUFjc0IsRUFBSUcsSUFBSXVILEVBQVVqQixVQUFTLFdBQWMsT0FBTzlFLEVBQVdqRCx1QkFHcEZzQixLRkhJNkgsQ0FBbUIvRSxFQUFPNEUsR0FFaEMsR0FBSVgsRUFBVWpFLEdBQ2YsT0daTCxTQUF5QkEsRUFBTzRFLEdBQ25DLE9BQU8sSUFBSSxHQUFXLFNBQVUvRixHQUM1QixJQUFJM0IsRUFBTSxJQUFJLEVBV2QsT0FWQUEsRUFBSUcsSUFBSXVILEVBQVVqQixVQUFTLFdBQ3ZCLE9BQU8zRCxFQUFNa0UsTUFBSyxTQUFVOUssR0FDeEI4RCxFQUFJRyxJQUFJdUgsRUFBVWpCLFVBQVMsV0FDdkI5RSxFQUFXcEQsS0FBS3JDLEdBQ2hCOEQsRUFBSUcsSUFBSXVILEVBQVVqQixVQUFTLFdBQWMsT0FBTzlFLEVBQVdqRCxzQkFFaEUsU0FBVVAsR0FDVDZCLEVBQUlHLElBQUl1SCxFQUFVakIsVUFBUyxXQUFjLE9BQU85RSxFQUFXbkQsTUFBTUwsY0FHbEU2QixLSERJOEgsQ0FBZ0JoRixFQUFPNEUsR0FFN0IsR0FBSVosRUFBWWhFLEdBQ2pCLE9BQU8yRSxFQUFjM0UsRUFBTzRFLEdBRTNCLEdJbEJOLFNBQW9CNUUsR0FDdkIsT0FBT0EsR0FBMkMsbUJBQTNCQSxFQUFNLEdKaUJoQmlGLENBQVdqRixJQUEyQixpQkFBVkEsRUFDakMsT0tqQkwsU0FBMEJBLEVBQU80RSxHQUNwQyxJQUFLNUUsRUFDRCxNQUFNLElBQUk5RSxNQUFNLDJCQUVwQixPQUFPLElBQUksR0FBVyxTQUFVMkQsR0FDNUIsSUFDSWtGLEVBREE3RyxFQUFNLElBQUksRUFpQ2QsT0EvQkFBLEVBQUlHLEtBQUksV0FDQTBHLEdBQXVDLG1CQUFwQkEsRUFBU1csUUFDNUJYLEVBQVNXLFlBR2pCeEgsRUFBSUcsSUFBSXVILEVBQVVqQixVQUFTLFdBQ3ZCSSxFQUFXL0QsRUFBTSxLQUNqQjlDLEVBQUlHLElBQUl1SCxFQUFVakIsVUFBUyxXQUN2QixJQUFJOUUsRUFBV3JELE9BQWYsQ0FHQSxJQUFJcEMsRUFDQXFMLEVBQ0osSUFDSSxJQUFJdkMsRUFBUzZCLEVBQVN0SSxPQUN0QnJDLEVBQVE4SSxFQUFPOUksTUFDZnFMLEVBQU92QyxFQUFPdUMsS0FFbEIsTUFBT3BKLEdBRUgsWUFEQXdELEVBQVduRCxNQUFNTCxHQUdqQm9KLEVBQ0E1RixFQUFXakQsWUFHWGlELEVBQVdwRCxLQUFLckMsR0FDaEJzQixLQUFLaUoscUJBSVZ6RyxLTHJCSWdJLENBQWlCbEYsRUFBTzRFLEdBR3ZDLE1BQU0sSUFBSTlDLFdBQXFCLE9BQVY5QixVQUF5QkEsR0FBU0EsR0FBUyxzQk1uQnBFLElBQUksRUFBdUMsU0FBVTdCLEdBRWpELFNBQVNnSCxFQUFzQnhGLEdBQzNCLElBQUlyQixFQUFRSCxFQUFPN0YsS0FBS29DLE9BQVNBLEtBRWpDLE9BREE0RCxFQUFNcUIsT0FBU0EsRUFDUnJCLEVBYVgsT0FqQkEsRUFBa0I2RyxFQUF1QmhILEdBTXpDZ0gsRUFBc0JwTCxVQUFVK0UsTUFBUSxTQUFVMUYsR0FDOUNzQixLQUFLaUYsT0FBT3lGLFdBQVdoTSxJQUUzQitMLEVBQXNCcEwsVUFBVWdGLE9BQVMsU0FBVXJELEdBQy9DaEIsS0FBS2lGLE9BQU8wRixZQUFZM0osR0FDeEJoQixLQUFLOEIsZUFFVDJJLEVBQXNCcEwsVUFBVWlGLFVBQVksV0FDeEN0RSxLQUFLaUYsT0FBTzJGLGlCQUNaNUssS0FBSzhCLGVBRUYySSxFQWxCK0IsQ0FtQnhDLEdBeUJFLEVBQXVDLFNBQVVoSCxHQUVqRCxTQUFTb0gsSUFDTCxPQUFrQixPQUFYcEgsR0FBbUJBLEVBQU9zRSxNQUFNL0gsS0FBTWlFLFlBQWNqRSxLQVcvRCxPQWJBLEVBQWtCNkssRUFBdUJwSCxHQUl6Q29ILEVBQXNCeEwsVUFBVXFMLFdBQWEsU0FBVUksR0FDbkQ5SyxLQUFLa0UsWUFBWW5ELEtBQUsrSixJQUUxQkQsRUFBc0J4TCxVQUFVc0wsWUFBYyxTQUFVaEssR0FDcERYLEtBQUtrRSxZQUFZbEQsTUFBTUwsSUFFM0JrSyxFQUFzQnhMLFVBQVV1TCxlQUFpQixXQUM3QzVLLEtBQUtrRSxZQUFZaEQsWUFFZDJKLEVBZCtCLENBZXhDLEdDM0RLLFNBQVNFLEVBQVM3RCxFQUFTVyxFQUFnQm1ELEdBSTlDLFlBSG1CLElBQWZBLElBQ0FBLEVBQWFDLE9BQU9DLG1CQUVNLG1CQUFuQnJELEVBQ0EsU0FBVS9CLEdBQVUsT0FBT0EsRUFBT2dCLEtBQUtpRSxHQUFTLFNBQVVJLEVBQUcxTixHQUFLLE9DTjVENkgsRURNd0U0QixFQUFRaUUsRUFBRzFOLEdDTC9GeU0sRUFPTUMsRUFBVTdFLEVBQU80RSxHQU5wQjVFLGFBQWlCLEVBQ1ZBLEVBRUosSUFBSSxFQUFXbUUsRUFBWW5FLEtEQ2tFd0IsS0FBS3BGLEdBQUksU0FBVWhDLEVBQUcwTCxHQUFNLE9BQU92RCxFQUFlc0QsRUFBR3pMLEVBQUdqQyxFQUFHMk4sT0NOaEssSUFBYzlGLEVBQU80RSxJRE13SmMsTUFFN0ksaUJBQW5CbkQsSUFDWm1ELEVBQWFuRCxHQUVWLFNBQVUvQixHQUFVLE9BQU9BLEVBQU9GLEtBQUssSUFBSXlGLEVBQWlCbkUsRUFBUzhELE1BRWhGLElBQUlLLEVBQWtDLFdBQ2xDLFNBQVNBLEVBQWlCbkUsRUFBUzhELFFBQ1osSUFBZkEsSUFDQUEsRUFBYUMsT0FBT0MsbUJBRXhCbEwsS0FBS2tILFFBQVVBLEVBQ2ZsSCxLQUFLZ0wsV0FBYUEsRUFLdEIsT0FIQUssRUFBaUJoTSxVQUFVekIsS0FBTyxTQUFVdUksRUFBVUwsR0FDbEQsT0FBT0EsRUFBT0wsVUFBVSxJQUFJLEVBQW1CVSxFQUFVbkcsS0FBS2tILFFBQVNsSCxLQUFLZ0wsY0FFekVLLEVBWDBCLEdBY2pDLEVBQW9DLFNBQVU1SCxHQUU5QyxTQUFTNkgsRUFBbUJwSCxFQUFhZ0QsRUFBUzhELFFBQzNCLElBQWZBLElBQ0FBLEVBQWFDLE9BQU9DLG1CQUV4QixJQUFJdEgsRUFBUUgsRUFBTzdGLEtBQUtvQyxLQUFNa0UsSUFBZ0JsRSxLQU85QyxPQU5BNEQsRUFBTXNELFFBQVVBLEVBQ2hCdEQsRUFBTW9ILFdBQWFBLEVBQ25CcEgsRUFBTTJILGNBQWUsRUFDckIzSCxFQUFNNEgsT0FBUyxHQUNmNUgsRUFBTTZILE9BQVMsRUFDZjdILEVBQU14QixNQUFRLEVBQ1B3QixFQW9EWCxPQWhFQSxFQUFrQjBILEVBQW9CN0gsR0FjdEM2SCxFQUFtQmpNLFVBQVUrRSxNQUFRLFNBQVUxRixHQUN2Q3NCLEtBQUt5TCxPQUFTekwsS0FBS2dMLFdBQ25CaEwsS0FBSzBMLFNBQVNoTixHQUdkc0IsS0FBS3dMLE9BQU85SSxLQUFLaEUsSUFHekI0TSxFQUFtQmpNLFVBQVVxTSxTQUFXLFNBQVVoTixHQUM5QyxJQUFJOEksRUFDQXBGLEVBQVFwQyxLQUFLb0MsUUFDakIsSUFDSW9GLEVBQVN4SCxLQUFLa0gsUUFBUXhJLEVBQU8wRCxHQUVqQyxNQUFPekIsR0FFSCxZQURBWCxLQUFLa0UsWUFBWWxELE1BQU1MLEdBRzNCWCxLQUFLeUwsU0FDTHpMLEtBQUsyTCxVQUFVbkUsSUFFbkI4RCxFQUFtQmpNLFVBQVVzTSxVQUFZLFNBQVVDLEdBQy9DLElBQUlDLEVBQWtCLElBQUksRUFBc0I3TCxNQUM1Q2tFLEVBQWNsRSxLQUFLa0UsWUFDdkJBLEVBQVl2QixJQUFJa0osR0FDaEIsSUFBSUMsRURZTCxTQUF3QnRFLEVBQVFxRSxHQUNuQyxJQUFJQSxFQUFnQi9LLE9BR3BCLE9BQUkwRyxhQUFrQixFQUNYQSxFQUFPL0IsVUFBVW9HLEdBRXJCcEMsRUFBWWpDLEVBQVppQyxDQUFvQm9DLEdDbkJDRSxDQUFlSCxFQUFLQyxHQUN4Q0MsSUFBc0JELEdBQ3RCM0gsRUFBWXZCLElBQUltSixJQUd4QlIsRUFBbUJqTSxVQUFVaUYsVUFBWSxXQUNyQ3RFLEtBQUt1TCxjQUFlLEVBQ0EsSUFBaEJ2TCxLQUFLeUwsUUFBdUMsSUFBdkJ6TCxLQUFLd0wsT0FBT3BLLFFBQ2pDcEIsS0FBS2tFLFlBQVloRCxXQUVyQmxCLEtBQUs4QixlQUVUd0osRUFBbUJqTSxVQUFVcUwsV0FBYSxTQUFVSSxHQUNoRDlLLEtBQUtrRSxZQUFZbkQsS0FBSytKLElBRTFCUSxFQUFtQmpNLFVBQVV1TCxlQUFpQixXQUMxQyxJQUFJWSxFQUFTeEwsS0FBS3dMLE9BQ2xCeEwsS0FBS3lMLFNBQ0RELEVBQU9wSyxPQUFTLEVBQ2hCcEIsS0FBS29FLE1BQU1vSCxFQUFPUSxTQUVHLElBQWhCaE0sS0FBS3lMLFFBQWdCekwsS0FBS3VMLGNBQy9CdkwsS0FBS2tFLFlBQVloRCxZQUdsQm9LLEVBakU0QixDQWtFckMsR0U5RkssU0FBU1csRUFBU2pCLEdBSXJCLFlBSG1CLElBQWZBLElBQ0FBLEVBQWFDLE9BQU9DLG1CQUVqQkgsRUFBUzVGLEVBQVU2RixHQ0h2QixTQUFTa0IsRUFBVTVHLEVBQU80RSxHQUM3QixPQUFLQSxFQUlNRCxFQUFjM0UsRUFBTzRFLEdBSHJCLElBQUksRUFBV2hCLEVBQWlCNUQsSUNBL0MsSUFBSTZHLEVBQThDLFdBQzlDLFNBQVNBLEVBQTZCQyxFQUFTQyxHQUMzQ3JNLEtBQUtvTSxRQUFVQSxFQUNmcE0sS0FBS3FNLFlBQWNBLEVBS3ZCLE9BSEFGLEVBQTZCOU0sVUFBVXpCLEtBQU8sU0FBVXVHLEVBQVkyQixHQUNoRSxPQUFPQSxFQUFPTCxVQUFVLElBQUksRUFBK0J0QixFQUFZbkUsS0FBS29NLFFBQVNwTSxLQUFLcU0sZUFFdkZGLEVBUnNDLEdBVTdDLEVBQWdELFNBQVUxSSxHQUUxRCxTQUFTNkksRUFBK0JwSSxFQUFha0ksRUFBU0MsR0FDMUQsSUFBSXpJLEVBQVFILEVBQU83RixLQUFLb0MsS0FBTWtFLElBQWdCbEUsS0FNOUMsT0FMQTRELEVBQU15SSxZQUFjQSxFQUNwQnpJLEVBQU0ySSxRQUFTLEVBQ1EsbUJBQVpILElBQ1B4SSxFQUFNd0ksUUFBVUEsR0FFYnhJLEVBZ0NYLE9BeENBLEVBQWtCMEksRUFBZ0M3SSxHQVVsRDZJLEVBQStCak4sVUFBVStNLFFBQVUsU0FBVWpNLEVBQUdxTSxHQUM1RCxPQUFPck0sSUFBTXFNLEdBRWpCRixFQUErQmpOLFVBQVUrRSxNQUFRLFNBQVUxRixHQUN2RCxJQUFJTSxFQUNKLElBQ0ksSUFBSXFOLEVBQWNyTSxLQUFLcU0sWUFDdkJyTixFQUFNcU4sRUFBY0EsRUFBWTNOLEdBQVNBLEVBRTdDLE1BQU9pQyxHQUNILE9BQU9YLEtBQUtrRSxZQUFZbEQsTUFBTUwsR0FFbEMsSUFBSTZHLEdBQVMsRUFDYixHQUFJeEgsS0FBS3VNLE9BQ0wsSUFFSS9FLEdBQVM0RSxFQURLcE0sS0FBS29NLFNBQ0ZwTSxLQUFLaEIsSUFBS0EsR0FFL0IsTUFBTzJCLEdBQ0gsT0FBT1gsS0FBS2tFLFlBQVlsRCxNQUFNTCxRQUlsQ1gsS0FBS3VNLFFBQVMsRUFFYi9FLElBQ0R4SCxLQUFLaEIsSUFBTUEsRUFDWGdCLEtBQUtrRSxZQUFZbkQsS0FBS3JDLEtBR3ZCNE4sRUF6Q3dDLENBMENqRCxHQ3JERixhQVFJLFdBQW9CRyxFQUFnQ0MsR0RWakQsSUFBOEJOLEVBQVNDLEVDVXRCLEtBQUFJLGFBQWdDLEtBQUFDLFVBTDVDLEtBQUFDLFFBQVVsRixFQUF5Qm1GLFNBQVUsV0FDN0MsS0FBQUMsTUFBUXBGLEVBQXlCbUYsU0FBVSxTQUsvQzVNLEtBQUs4TSxVQ1ROLFdBRUgsSUFEQSxJQUFJQyxFQUFjLEdBQ1QvRixFQUFLLEVBQUdBLEVBQUsvQyxVQUFVN0MsT0FBUTRGLElBQ3BDK0YsRUFBWS9GLEdBQU0vQyxVQUFVK0MsR0FFaEMsSUFBSWdFLEVBQWFDLE9BQU9DLGtCQUNwQmhCLEVBQVksS0FDWjhDLEVBQU9ELEVBQVlBLEVBQVkzTCxPQUFTLEdBVTVDLE9BVEk0SCxFQUFZZ0UsSUFDWjlDLEVBQVk2QyxFQUFZRSxNQUNwQkYsRUFBWTNMLE9BQVMsR0FBb0QsaUJBQXhDMkwsRUFBWUEsRUFBWTNMLE9BQVMsS0FDbEU0SixFQUFhK0IsRUFBWUUsUUFHUixpQkFBVEQsSUFDWmhDLEVBQWErQixFQUFZRSxPQUVYLE9BQWQvQyxHQUE2QyxJQUF2QjZDLEVBQVkzTCxRQUFnQjJMLEVBQVksYUFBYyxFQUNyRUEsRUFBWSxHQUVoQmQsRUFBU2pCLEVBQVRpQixDQUFxQkMsRUFBVWEsRUFBYTdDLElEWDlCZ0QsQ0FBTWxOLEtBQUsyTSxRQUFTM00sS0FBSzZNLE9BQU8vRixNRFhwQnNGLEVDWUosU0FBQ2pCLEVBQUd6TCxHQUFNLE9BQUF5TCxFQUFFZ0MsT0FBU3pOLEVBQUV5TixNQUFRaEMsRUFBRWlDLE9BQVMxTixFQUFFME4sTURYbEUsU0FBVXRILEdBQVUsT0FBT0EsRUFBT0YsS0FBSyxJQUFJdUcsRUFBNkJDLEVBQVNDLE9DYXBGck0sS0FBS3FOLGlCQStDYixPQTVDWSxZQUFBQyxzQkFBUixTQUE4QkMsR0FBOUIsV0FDSUEsSUFDQXZOLEtBQUswTSxRQUFRYyxpQkFDYnhOLEtBQUt5TixnQkFBa0JDLGFBQVksV0FDL0JILElBQ0EsRUFBS2IsUUFBUWMsbUJBQ2QsTUFHQyxZQUFBRyxvQkFBUixzQkFDSTNOLEtBQUs0TixpQkFBbUJGLGFBQVksV0FDaEMsRUFBS2pCLFdBQVdvQixXQUNoQixFQUFLbkIsUUFBUWMsbUJBQ2QsTUFHQyxZQUFBSCxlQUFSLHNCQUNJck4sS0FBSzJOLHNCQUNMM04sS0FBSzhNLFVBQVVySCxXQUFVLFNBQUM4SCxHQUN0QixHQUFtQixZQUFmQSxFQUFNSCxNQUF1QixFQUFLSyxnQkFnQlosVUFBZkYsRUFBTUgsT0FDTSxjQUFmRyxFQUFNSixNQUNOLEVBQUtRLHNCQUVURyxjQUFjLEVBQUtMLGlCQUNuQixFQUFLQSxnQkFBa0IsV0FwQnZCLE9BQVFGLEVBQU1KLE1BQ1YsSUFBSyxVQUNELEVBQUtHLHVCQUFzQixXQUFNLFNBQUtiLFdBQVdzQixZQUNqRCxNQUNKLElBQUssWUFDRCxFQUFLVCx1QkFBc0IsV0FBTSxTQUFLYixXQUFXdUIsY0FDakQsTUFDSixJQUFLLGFBQ0QsRUFBS1YsdUJBQXNCLFdBQU0sU0FBS2IsV0FBV3dCLGVBQ2pELE1BQ0osSUFBSyxZQUNESCxjQUFjLEVBQUtGLGtCQUNuQixFQUFLTix1QkFBc0IsV0FBTSxTQUFLYixXQUFXb0IsbUJBWXpFLEVBM0RBLEdFRkEsYUFLSSxXQUFvQkssRUFBbUR6QixHQUFuRCxLQUFBeUIsa0JBQW1ELEtBQUF6QixhQUYvRCxLQUFBMEIsaUJBQW1CLE9BQ25CLEtBQUFDLG1CQUFxQixPQUV6QnBPLEtBQUtxTyxNQUFRSCxFQUFnQkksT0FBT0QsTUFDcENyTyxLQUFLdU8sT0FBU0wsRUFBZ0JJLE9BQU9DLE9BMkI3QyxPQXhCVyxZQUFBZixlQUFQLFdBQ0ksSUFBTWdCLEVBQVlqTCxLQUFLa0wsTUFBTXpPLEtBQUt1TyxPQUFTdk8sS0FBS3lNLFdBQVdpQyxNQUNyREMsRUFBV3BMLEtBQUtrTCxNQUFNek8sS0FBS3FPLE1BQVFyTyxLQUFLeU0sV0FBV21DLE1BQ3pENU8sS0FBS2tPLGdCQUFnQlcsVUFBWTdPLEtBQUttTyxpQkFDdENuTyxLQUFLa08sZ0JBQWdCWSxZQUFjOU8sS0FBS29PLG1CQUV4Q3BPLEtBQUtrTyxnQkFBZ0JhLFVBQVUsRUFBRyxFQUFHL08sS0FBS3FPLE1BQU9yTyxLQUFLdU8sUUFFdEQsSSxlQUFTaFEsR0FDTCxJLGVBQVNULEdBQ0wsSUFBTWtSLEVBQVlMLEVBQVc3USxFQUN2Qm1SLEVBQVlULEVBQVlqUSxFQUN4QjJRLEVBQVUsRUFBS3pDLFdBQVcwQyxnQkFBZ0JDLE1BQUssU0FBQ0MsR0FDbEQsT0FBT0EsRUFBUWxQLElBQU1yQyxHQUFLdVIsRUFBUTdDLElBQU1qTyxLQUV4QzJRLEdBQ0EsRUFBS2hCLGdCQUFnQlcsVUFBWUssRUFBUUksTUFBUUosRUFBUUksTUFBUSxFQUFLbkIsaUJBQ3RFLEVBQUtELGdCQUFnQnFCLFNBQVNQLEVBQVdDLEVBQVdOLEVBQVVILElBRTlELEVBQUtOLGdCQUFnQnNCLFdBQVdSLEVBQVdDLEVBQVdOLEVBQVVILElBVi9EMVEsRUFBSSxFQUFHQSxFQUFJLEVBQUsyTyxXQUFXbUMsS0FBTTlRLEksRUFBakNBLEksT0FESlMsRUFBSSxFQUFHQSxFQUFJeUIsS0FBS3lNLFdBQVdpQyxLQUFNblEsSSxFQUFqQ0EsSUFnQmpCLEVBbENBLEdDSEEsYUFJSSxXQUFZNEIsRUFBV3FNLEVBQVc4QyxRQUFBLElBQUFBLE1BQUEsSUFDOUJ0UCxLQUFLRyxFQUFJQSxFQUNUSCxLQUFLd00sRUFBSUEsRUFDVHhNLEtBQUtzUCxNQUFRQSxFQXNCckIsT0FuQlcsWUFBQXJCLFVBQVAsV0FDSWpPLEtBQUtHLEtBR0YsWUFBQTZOLFNBQVAsV0FDSWhPLEtBQUtHLEtBR0YsWUFBQXNQLE9BQVAsV0FDSXpQLEtBQUt3TSxLQUdGLFlBQUFxQixTQUFQLFdBQ0k3TixLQUFLd00sS0FHRixZQUFBa0QsS0FBUCxXQUNJLE9BQU8sSUFBSUMsRUFBWTNQLEtBQUtHLEVBQUdILEtBQUt3TSxFQUFHeE0sS0FBS3NQLFFBRXBELEVBN0JBLEdDSUEsYUFLSSxXQUNZTSxFQUNBQyxFQUNBUCxRQUFBLElBQUFBLE1BQUEsUUFGQSxLQUFBTSxZQUNBLEtBQUFDLE9BQ0EsS0FBQVAsUUFQTCxLQUFBUSxnQkFBa0IsRUEyRDdCLE9BbERXLFlBQUFDLFlBQVAsV0FDSSxJQUFNQyxFQUFXek0sS0FBS2tMLE9BQU96TyxLQUFLeU0sV0FBV21DLEtBQVE1TyxLQUFTLE1BQUssR0FDbkVBLEtBQUtxUCxRQUFVLElBQUlNLEVBQVlLLElBQWFoUSxLQUFLNlAsS0FBTyxLQUdyRCxZQUFBSSxjQUFQLFNBQXFCeEQsR0FDakJ6TSxLQUFLeU0sV0FBYUEsR0FHZixZQUFBc0IsT0FBUCxXQUVJLE9BREEvTixLQUFLOFAsZ0JBQWtCOVAsS0FBSzhQLGdCQUFrQixHQUFLOVAsS0FBSzRQLFVBQVV4TyxPQUFTLEVBQUlwQixLQUFLOFAsZ0JBQWtCLEVBQy9GOVAsTUFHSixZQUFBaU8sVUFBUCxXQUVJLE9BREFqTyxLQUFLcVAsUUFBUXBCLFlBQ05qTyxNQUdKLFlBQUFnTyxTQUFQLFdBRUksT0FEQWhPLEtBQUtxUCxRQUFRckIsV0FDTmhPLE1BR0osWUFBQTZOLFNBQVAsV0FFSSxPQURBN04sS0FBS3FQLFFBQVF4QixXQUNON04sTUFHSixZQUFBMFAsS0FBUCxXQUNJLElBQU1RLEVBQVcsSUFBSUMsRUFBTW5RLEtBQUs0UCxVQUFXNVAsS0FBSzZQLE1BR2hELE9BRkFLLEVBQVNKLGdCQUFrQjlQLEtBQUs4UCxnQkFDaENJLEVBQVNiLFFBQVVyUCxLQUFLcVAsUUFBUUssT0FDekJRLEdBR0osWUFBQUUscUJBQVAsU0FBNEJDLEdBQTVCLFdBRUksWUFGd0IsSUFBQUEsTUFBa0NyUSxLQUFLcVAsU0FDdkNyUCxLQUFLc1EscUJBQ041TyxLQUFJLFNBQUM2TyxHQUN4QixNQUFPLENBQ0hwUSxFQUFHa1EsRUFBbUJsUSxFQUFJb1EsRUFBYXBRLEVBQ3ZDcU0sRUFBRzZELEVBQW1CN0QsRUFBSStELEVBQWEvRCxFQUN2QzhDLE1BQU8sRUFBS0EsV0FLaEIsWUFBQWdCLG1CQUFSLFdBQ0ksT0FBT3RRLEtBQUs0UCxVQUFVNVAsS0FBSzhQLGtCQUVuQyxFQTVEQSxHLGlXQ0FBLGNBT0ksYSxPQUNJLFlBQU0sQ0FDRixDQUNJLElBQUlILEVBQVksRUFBRyxHQUNuQixJQUFJQSxFQUFZLEVBQUcsR0FDbkIsSUFBSUEsRUFBWSxFQUFHLEdBQ25CLElBQUlBLEVBQVksRUFBRyxLQUV4QixFQUFHLFlBQVUsS0FFeEIsT0FqQjJCLE9BaUIzQixFQWpCQSxDQUEyQixHLGlXQ0EzQixjQVFJLGEsT0FDSSxZQUFNLENBQ0YsQ0FDSSxJQUFJQSxFQUFZLEVBQUcsR0FDbkIsSUFBSUEsRUFBWSxFQUFHLEdBQ25CLElBQUlBLEVBQVksRUFBRyxHQUNuQixJQUFJQSxFQUFZLEVBQUcsSUFFdkIsQ0FDSSxJQUFJQSxFQUFZLEVBQUcsR0FDbkIsSUFBSUEsRUFBWSxFQUFHLEdBQ25CLElBQUlBLEVBQVksRUFBRyxHQUNuQixJQUFJQSxFQUFZLEVBQUcsSUFFdkIsQ0FDSSxJQUFJQSxFQUFZLEVBQUcsR0FDbkIsSUFBSUEsRUFBWSxFQUFHLEdBQ25CLElBQUlBLEVBQVksRUFBRyxHQUNuQixJQUFJQSxFQUFZLEVBQUcsSUFFdkIsQ0FDSSxJQUFJQSxFQUFZLEVBQUcsR0FDbkIsSUFBSUEsRUFBWSxFQUFHLEdBQ25CLElBQUlBLEVBQVksRUFBRyxHQUNuQixJQUFJQSxFQUFZLEVBQUcsS0FFeEIsRUFBRyxZQUFVLEtBRXhCLE9BcENrQyxPQW9DbEMsRUFwQ0EsQ0FBa0MsRyxpV0NBbEMsZUFRSSxhLE9BQ0ksWUFBTSxDQUNGLENBQ0ksSUFBSUEsRUFBWSxFQUFHLEdBQ25CLElBQUlBLEVBQVksRUFBRyxHQUNuQixJQUFJQSxFQUFZLEVBQUcsR0FDbkIsSUFBSUEsRUFBWSxFQUFHLElBRXZCLENBQ0ksSUFBSUEsRUFBWSxFQUFHLEdBQ25CLElBQUlBLEVBQVksRUFBRyxHQUNuQixJQUFJQSxFQUFZLEVBQUcsR0FDbkIsSUFBSUEsRUFBWSxFQUFHLElBRXZCLENBQ0ksSUFBSUEsRUFBWSxFQUFHLEdBQ25CLElBQUlBLEVBQVksRUFBRyxHQUNuQixJQUFJQSxFQUFZLEVBQUcsR0FDbkIsSUFBSUEsRUFBWSxFQUFHLElBRXZCLENBQ0ksSUFBSUEsRUFBWSxFQUFHLEdBQ25CLElBQUlBLEVBQVksRUFBRyxHQUNuQixJQUFJQSxFQUFZLEVBQUcsR0FDbkIsSUFBSUEsRUFBWSxFQUFHLEtBRXhCLEVBQUcsWUFBVSxLQUV4QixPQXBDNEIsT0FvQzVCLEVBcENBLENBQTRCLEcsa1dDQTVCLGVBU0ksYSxPQUNJLFlBQU0sQ0FDRixDQUNJLElBQUlBLEVBQVksRUFBRyxHQUNuQixJQUFJQSxFQUFZLEVBQUcsR0FDbkIsSUFBSUEsRUFBWSxFQUFHLEdBQ25CLElBQUlBLEVBQVksRUFBRyxJQUV2QixDQUNJLElBQUlBLEVBQVksRUFBRyxHQUNuQixJQUFJQSxFQUFZLEVBQUcsR0FDbkIsSUFBSUEsRUFBWSxFQUFHLEdBQ25CLElBQUlBLEVBQVksRUFBRyxJQUV2QixDQUNJLElBQUlBLEVBQVksRUFBRyxHQUNuQixJQUFJQSxFQUFZLEVBQUcsR0FDbkIsSUFBSUEsRUFBWSxFQUFHLEdBQ25CLElBQUlBLEVBQVksRUFBRyxJQUV2QixDQUNJLElBQUlBLEVBQVksRUFBRyxHQUNuQixJQUFJQSxFQUFZLEVBQUcsR0FDbkIsSUFBSUEsRUFBWSxFQUFHLEdBQ25CLElBQUlBLEVBQVksRUFBRyxLQUV4QixFQUFHLFlBQVUsS0FFeEIsT0FyQzBCLFFBcUMxQixFQXJDQSxDQUEwQixHLGtXQ0ExQixlQVFJLGEsT0FDSSxZQUFNLENBQ0YsQ0FDSSxJQUFJQSxFQUFZLEVBQUcsR0FDbkIsSUFBSUEsRUFBWSxFQUFHLEdBQ25CLElBQUlBLEVBQVksRUFBRyxHQUNuQixJQUFJQSxFQUFZLEVBQUcsSUFFdkIsQ0FDSSxJQUFJQSxFQUFZLEVBQUcsR0FDbkIsSUFBSUEsRUFBWSxFQUFHLEdBQ25CLElBQUlBLEVBQVksRUFBRyxHQUNuQixJQUFJQSxFQUFZLEVBQUcsSUFFdkIsQ0FDSSxJQUFJQSxFQUFZLEVBQUcsR0FDbkIsSUFBSUEsRUFBWSxFQUFHLEdBQ25CLElBQUlBLEVBQVksRUFBRyxHQUNuQixJQUFJQSxFQUFZLEVBQUcsSUFFdkIsQ0FDSSxJQUFJQSxFQUFZLEVBQUcsR0FDbkIsSUFBSUEsRUFBWSxFQUFHLEdBQ25CLElBQUlBLEVBQVksRUFBRyxHQUNuQixJQUFJQSxFQUFZLEVBQUcsS0FFeEIsRUFBRyxZQUFVLEtBRXhCLE9BcEM0QixRQW9DNUIsRUFwQ0EsQ0FBNEIsRyxrV0NBNUIsZUFRSSxhLE9BQ0ksWUFBTSxDQUNGLENBQ0ksSUFBSUEsRUFBWSxFQUFHLEdBQ25CLElBQUlBLEVBQVksRUFBRyxHQUNuQixJQUFJQSxFQUFZLEVBQUcsR0FDbkIsSUFBSUEsRUFBWSxFQUFHLElBRXZCLENBQ0ksSUFBSUEsRUFBWSxFQUFHLEdBQ25CLElBQUlBLEVBQVksRUFBRyxHQUNuQixJQUFJQSxFQUFZLEVBQUcsR0FDbkIsSUFBSUEsRUFBWSxFQUFHLElBRXZCLENBQ0ksSUFBSUEsRUFBWSxFQUFHLEdBQ25CLElBQUlBLEVBQVksRUFBRyxHQUNuQixJQUFJQSxFQUFZLEVBQUcsR0FDbkIsSUFBSUEsRUFBWSxFQUFHLElBRXZCLENBQ0ksSUFBSUEsRUFBWSxFQUFHLEdBQ25CLElBQUlBLEVBQVksRUFBRyxHQUNuQixJQUFJQSxFQUFZLEVBQUcsR0FDbkIsSUFBSUEsRUFBWSxFQUFHLEtBRXhCLEVBQUcsWUFBVSxLQUV4QixPQXBDNEIsUUFvQzVCLEVBcENBLENBQTRCLEcsa1dDQTVCLGVBUUksYSxPQUNJLFlBQU0sQ0FDRixDQUNJLElBQUlBLEVBQVksRUFBRyxHQUNuQixJQUFJQSxFQUFZLEVBQUcsR0FDbkIsSUFBSUEsRUFBWSxFQUFHLEdBQ25CLElBQUlBLEVBQVksRUFBRyxJQUV2QixDQUNJLElBQUlBLEVBQVksRUFBRyxHQUNuQixJQUFJQSxFQUFZLEVBQUcsR0FDbkIsSUFBSUEsRUFBWSxFQUFHLEdBQ25CLElBQUlBLEVBQVksRUFBRyxJQUV2QixDQUNJLElBQUlBLEVBQVksRUFBRyxHQUNuQixJQUFJQSxFQUFZLEVBQUcsR0FDbkIsSUFBSUEsRUFBWSxFQUFHLEdBQ25CLElBQUlBLEVBQVksRUFBRyxJQUV2QixDQUNJLElBQUlBLEVBQVksRUFBRyxHQUNuQixJQUFJQSxFQUFZLEVBQUcsR0FDbkIsSUFBSUEsRUFBWSxFQUFHLEdBQ25CLElBQUlBLEVBQVksRUFBRyxLQUV4QixFQUFHLFlBQVUsS0FFeEIsT0FwQzRCLFFBb0M1QixFQXBDQSxDQUE0QixHLHlMQ081QixjQU1JLFdBQVlqQixFQUNSRSxHQUNBNU8sS0FBSzBPLEtBQU9BLEVBQ1oxTyxLQUFLNE8sS0FBT0EsRUErSHBCLE9BNUhXLFlBQUE0QixhQUFQLFdBQ0l4USxLQUFLeVEsWUFBYyxJQUFJNVEsTUFDdkJHLEtBQUswUSxrQkFHRixZQUFBQSxlQUFQLFdBQ0kxUSxLQUFLMlEsTUFBUTNRLEtBQUs0USxpQkFDbEI1USxLQUFLMlEsTUFBTVYsY0FBY2pRLE1BQ3pCQSxLQUFLMlEsTUFBTVosY0FDUC9QLEtBQUs2USw2QkFBNkI3USxLQUFLMlEsUUFDdkMzUSxLQUFLd1EsZ0JBSU4sWUFBQXJCLGNBQVAsV0FDSSxPQUFPLEdBQ0FuUCxLQUFLeVEsWUFDTHpRLEtBQUsyUSxNQUFNUCx5QkFJZixZQUFBVSxnQkFBUCxXQUNJLE9BQU85USxLQUFLMlEsT0FFVCxZQUFBMUMsVUFBUCxXQUNTak8sS0FBSzZRLDZCQUE2QjdRLEtBQUsyUSxNQUFNakIsT0FBT3pCLGNBQ3JEak8sS0FBSzJRLE1BQU0xQyxhQUdaLFlBQUFELFNBQVAsV0FDU2hPLEtBQUs2USw2QkFBNkI3USxLQUFLMlEsTUFBTWpCLE9BQU8xQixhQUNyRGhPLEtBQUsyUSxNQUFNM0MsWUFHWixZQUFBSCxTQUFQLFcsTUFDUzdOLEtBQUs2USw2QkFBNkI3USxLQUFLMlEsTUFBTWpCLE9BQU83QixjQUdyRCxFQUFBN04sS0FBS3lRLGFBQVkvTixLQUFJLFFBQUkxQyxLQUFLMlEsTUFBTVAsd0JBQ3BDcFEsS0FBSytRLDBCQUNML1EsS0FBSzBRLGtCQUpMMVEsS0FBSzJRLE1BQU05QyxZQVFaLFlBQUFFLE9BQVAsV0FDSSxJQUFNaUQsRUFBWWhSLEtBQUsyUSxNQUFNakIsT0FDN0JzQixFQUFVakQsU0FDTC9OLEtBQUs2USw2QkFBNkJHLEdBRzdCaFIsS0FBSzZRLDZCQUE2QkcsRUFBVXRCLE9BQU96QixhQUluRGpPLEtBQUs2USw2QkFBNkJHLEVBQVV0QixPQUFPMUIsWUFJbkRoTyxLQUFLNlEsNkJBQTZCRyxFQUFVdEIsT0FBT3pCLFlBQVlBLGFBSy9Eak8sS0FBSzZRLDZCQUE2QkcsRUFBVXRCLE9BQU8xQixXQUFXQSxjQUNwRWhPLEtBQUsyUSxNQUFNM0MsV0FDWGhPLEtBQUsyUSxNQUFNM0MsV0FDWGhPLEtBQUsyUSxNQUFNNUMsV0FQWC9OLEtBQUsyUSxNQUFNMUMsWUFDWGpPLEtBQUsyUSxNQUFNMUMsWUFDWGpPLEtBQUsyUSxNQUFNNUMsV0FOWC9OLEtBQUsyUSxNQUFNM0MsV0FDWGhPLEtBQUsyUSxNQUFNNUMsV0FMWC9OLEtBQUsyUSxNQUFNMUMsWUFDWGpPLEtBQUsyUSxNQUFNNUMsVUFKWC9OLEtBQUsyUSxNQUFNNUMsVUFzQlgsWUFBQThDLDZCQUFSLFNBQXFDRixHQUFyQyxXQUNVTSxFQUFjTixFQUFNUCx1QkFBdUJoQixNQUFLLFNBQUNDLEdBQ25ELE9BQ0tBLEVBQVFsUCxFQUFJLEdBQ1prUCxFQUFRbFAsR0FBSyxFQUFLeU8sTUFDbEJTLEVBQVE3QyxHQUFLLEVBQUtrQyxRQUdyQndDLEVBQVlQLEVBQU1QLHVCQUF1QmhCLE1BQUssU0FBQ0MsR0FDakQsUUFBUyxFQUFLb0IsWUFBWXJCLE1BQUssU0FBQytCLEdBQzVCLE9BQU9BLEVBQWtCaFIsSUFBTWtQLEVBQVFsUCxHQUFLZ1IsRUFBa0IzRSxJQUFNNkMsRUFBUTdDLFFBR3BGLFFBQVN5RSxLQUFpQkMsR0FHdEIsWUFBQUgsd0JBQVIsc0JBQ0kvUSxLQUFLb1IsaUJBQWlCM0ssU0FBUSxTQUFDNEssR0FDM0IsRUFBS1osWUFBYyxFQUFLQSxZQUFZYSxRQUFPLFNBQUNILEdBQ3hDLE9BQU9BLEVBQWtCM0UsSUFBTTZFLEtBRW5DLEVBQUtaLFlBQWMsRUFBS0EsWUFBWS9PLEtBQUksU0FBQ3lQLEdBSXJDLE9BSElBLEVBQWtCM0UsRUFBSTZFLEdBQ3RCRixFQUFrQjNFLElBRWYyRSxTQUtYLFlBQUFDLGVBQVIsV0FFSSxJQURBLElBQU1HLEVBQVksSUFBSTFSLE0sV0FDYjJSLEdBQ2lCLEVBQUtmLFlBQVlhLFFBQU8sU0FBQ0gsR0FDM0MsT0FBT0EsRUFBa0IzRSxJQUFNZ0YsS0FFakJwUSxTQUFXLEVBQUt3TixNQUM5QjJDLEVBQVU3TyxLQUFLOE8sSSxPQUxkQSxFQUFNLEVBQUdBLEVBQU14UixLQUFLME8sS0FBTThDLEksRUFBMUJBLEdBUVQsT0FBT0QsR0FHSCxZQUFBWCxlQUFSLFdBQ0ksT0FBUXJOLEtBQUtrTyxNQUFzQixFQUFoQmxPLEtBQUtDLFdBQ3BCLEtBQUssRUFBRyxPQUFPLElBQUksRUFDbkIsS0FBSyxFQUFHLE9BQU8sSUFBSSxFQUNuQixLQUFLLEVBQUcsT0FBTyxJQUFJLEdBQ25CLEtBQUssRUFBRyxPQUFPLElBQUksR0FDbkIsS0FBSyxFQUFHLE9BQU8sSUFBSSxHQUNuQixLQUFLLEVBQUcsT0FBTyxJQUFJLEdBQ25CLEtBQUssRUFBRyxPQUFPLElBQUksS0FHL0IsRUF4SUEsR0NUQSxJQ1FJLFNBQVk4SyxHQUZKLEtBQUFNLEtBQU8sRUFDUCxLQUFBRixLQUFPLEdBRVgxTyxLQUFLeU0sV0FBYSxJQUFJLEdBQVd6TSxLQUFLME8sS0FBTTFPLEtBQUs0TyxNQUNqRDVPLEtBQUswTSxRQUFVLElBQUlnRixFQUFRcEQsRUFBUXRPLEtBQUt5TSxZQUN4Q3pNLEtBQUsyUixPQUFTLElBQUksRUFBTzNSLEtBQUt5TSxXQUFZek0sS0FBSzBNLFNBQy9DMU0sS0FBS3lNLFdBQVcrRCxlQUNoQnhRLEtBQUswTSxRQUFRYyxpQkRickIsQ0FBWVosU0FBU2dGLGVBQWUsUUFBOEJDLFdBQVciLCJmaWxlIjoiYnVuZGxlLmpzIiwic291cmNlc0NvbnRlbnQiOlsiIFx0Ly8gVGhlIG1vZHVsZSBjYWNoZVxuIFx0dmFyIGluc3RhbGxlZE1vZHVsZXMgPSB7fTtcblxuIFx0Ly8gVGhlIHJlcXVpcmUgZnVuY3Rpb25cbiBcdGZ1bmN0aW9uIF9fd2VicGFja19yZXF1aXJlX18obW9kdWxlSWQpIHtcblxuIFx0XHQvLyBDaGVjayBpZiBtb2R1bGUgaXMgaW4gY2FjaGVcbiBcdFx0aWYoaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0pIHtcbiBcdFx0XHRyZXR1cm4gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0uZXhwb3J0cztcbiBcdFx0fVxuIFx0XHQvLyBDcmVhdGUgYSBuZXcgbW9kdWxlIChhbmQgcHV0IGl0IGludG8gdGhlIGNhY2hlKVxuIFx0XHR2YXIgbW9kdWxlID0gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0gPSB7XG4gXHRcdFx0aTogbW9kdWxlSWQsXG4gXHRcdFx0bDogZmFsc2UsXG4gXHRcdFx0ZXhwb3J0czoge31cbiBcdFx0fTtcblxuIFx0XHQvLyBFeGVjdXRlIHRoZSBtb2R1bGUgZnVuY3Rpb25cbiBcdFx0bW9kdWxlc1ttb2R1bGVJZF0uY2FsbChtb2R1bGUuZXhwb3J0cywgbW9kdWxlLCBtb2R1bGUuZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXyk7XG5cbiBcdFx0Ly8gRmxhZyB0aGUgbW9kdWxlIGFzIGxvYWRlZFxuIFx0XHRtb2R1bGUubCA9IHRydWU7XG5cbiBcdFx0Ly8gUmV0dXJuIHRoZSBleHBvcnRzIG9mIHRoZSBtb2R1bGVcbiBcdFx0cmV0dXJuIG1vZHVsZS5leHBvcnRzO1xuIFx0fVxuXG5cbiBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlcyBvYmplY3QgKF9fd2VicGFja19tb2R1bGVzX18pXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm0gPSBtb2R1bGVzO1xuXG4gXHQvLyBleHBvc2UgdGhlIG1vZHVsZSBjYWNoZVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5jID0gaW5zdGFsbGVkTW9kdWxlcztcblxuIFx0Ly8gZGVmaW5lIGdldHRlciBmdW5jdGlvbiBmb3IgaGFybW9ueSBleHBvcnRzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmQgPSBmdW5jdGlvbihleHBvcnRzLCBuYW1lLCBnZXR0ZXIpIHtcbiBcdFx0aWYoIV9fd2VicGFja19yZXF1aXJlX18ubyhleHBvcnRzLCBuYW1lKSkge1xuIFx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBuYW1lLCB7IGVudW1lcmFibGU6IHRydWUsIGdldDogZ2V0dGVyIH0pO1xuIFx0XHR9XG4gXHR9O1xuXG4gXHQvLyBkZWZpbmUgX19lc01vZHVsZSBvbiBleHBvcnRzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnIgPSBmdW5jdGlvbihleHBvcnRzKSB7XG4gXHRcdGlmKHR5cGVvZiBTeW1ib2wgIT09ICd1bmRlZmluZWQnICYmIFN5bWJvbC50b1N0cmluZ1RhZykge1xuIFx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBTeW1ib2wudG9TdHJpbmdUYWcsIHsgdmFsdWU6ICdNb2R1bGUnIH0pO1xuIFx0XHR9XG4gXHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAnX19lc01vZHVsZScsIHsgdmFsdWU6IHRydWUgfSk7XG4gXHR9O1xuXG4gXHQvLyBjcmVhdGUgYSBmYWtlIG5hbWVzcGFjZSBvYmplY3RcbiBcdC8vIG1vZGUgJiAxOiB2YWx1ZSBpcyBhIG1vZHVsZSBpZCwgcmVxdWlyZSBpdFxuIFx0Ly8gbW9kZSAmIDI6IG1lcmdlIGFsbCBwcm9wZXJ0aWVzIG9mIHZhbHVlIGludG8gdGhlIG5zXG4gXHQvLyBtb2RlICYgNDogcmV0dXJuIHZhbHVlIHdoZW4gYWxyZWFkeSBucyBvYmplY3RcbiBcdC8vIG1vZGUgJiA4fDE6IGJlaGF2ZSBsaWtlIHJlcXVpcmVcbiBcdF9fd2VicGFja19yZXF1aXJlX18udCA9IGZ1bmN0aW9uKHZhbHVlLCBtb2RlKSB7XG4gXHRcdGlmKG1vZGUgJiAxKSB2YWx1ZSA9IF9fd2VicGFja19yZXF1aXJlX18odmFsdWUpO1xuIFx0XHRpZihtb2RlICYgOCkgcmV0dXJuIHZhbHVlO1xuIFx0XHRpZigobW9kZSAmIDQpICYmIHR5cGVvZiB2YWx1ZSA9PT0gJ29iamVjdCcgJiYgdmFsdWUgJiYgdmFsdWUuX19lc01vZHVsZSkgcmV0dXJuIHZhbHVlO1xuIFx0XHR2YXIgbnMgPSBPYmplY3QuY3JlYXRlKG51bGwpO1xuIFx0XHRfX3dlYnBhY2tfcmVxdWlyZV9fLnIobnMpO1xuIFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkobnMsICdkZWZhdWx0JywgeyBlbnVtZXJhYmxlOiB0cnVlLCB2YWx1ZTogdmFsdWUgfSk7XG4gXHRcdGlmKG1vZGUgJiAyICYmIHR5cGVvZiB2YWx1ZSAhPSAnc3RyaW5nJykgZm9yKHZhciBrZXkgaW4gdmFsdWUpIF9fd2VicGFja19yZXF1aXJlX18uZChucywga2V5LCBmdW5jdGlvbihrZXkpIHsgcmV0dXJuIHZhbHVlW2tleV07IH0uYmluZChudWxsLCBrZXkpKTtcbiBcdFx0cmV0dXJuIG5zO1xuIFx0fTtcblxuIFx0Ly8gZ2V0RGVmYXVsdEV4cG9ydCBmdW5jdGlvbiBmb3IgY29tcGF0aWJpbGl0eSB3aXRoIG5vbi1oYXJtb255IG1vZHVsZXNcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubiA9IGZ1bmN0aW9uKG1vZHVsZSkge1xuIFx0XHR2YXIgZ2V0dGVyID0gbW9kdWxlICYmIG1vZHVsZS5fX2VzTW9kdWxlID9cbiBcdFx0XHRmdW5jdGlvbiBnZXREZWZhdWx0KCkgeyByZXR1cm4gbW9kdWxlWydkZWZhdWx0J107IH0gOlxuIFx0XHRcdGZ1bmN0aW9uIGdldE1vZHVsZUV4cG9ydHMoKSB7IHJldHVybiBtb2R1bGU7IH07XG4gXHRcdF9fd2VicGFja19yZXF1aXJlX18uZChnZXR0ZXIsICdhJywgZ2V0dGVyKTtcbiBcdFx0cmV0dXJuIGdldHRlcjtcbiBcdH07XG5cbiBcdC8vIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbFxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5vID0gZnVuY3Rpb24ob2JqZWN0LCBwcm9wZXJ0eSkgeyByZXR1cm4gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iamVjdCwgcHJvcGVydHkpOyB9O1xuXG4gXHQvLyBfX3dlYnBhY2tfcHVibGljX3BhdGhfX1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5wID0gXCJcIjtcblxuXG4gXHQvLyBMb2FkIGVudHJ5IG1vZHVsZSBhbmQgcmV0dXJuIGV4cG9ydHNcbiBcdHJldHVybiBfX3dlYnBhY2tfcmVxdWlyZV9fKF9fd2VicGFja19yZXF1aXJlX18ucyA9IDApO1xuIiwiLyohICoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqXHJcbkNvcHlyaWdodCAoYykgTWljcm9zb2Z0IENvcnBvcmF0aW9uLlxyXG5cclxuUGVybWlzc2lvbiB0byB1c2UsIGNvcHksIG1vZGlmeSwgYW5kL29yIGRpc3RyaWJ1dGUgdGhpcyBzb2Z0d2FyZSBmb3IgYW55XHJcbnB1cnBvc2Ugd2l0aCBvciB3aXRob3V0IGZlZSBpcyBoZXJlYnkgZ3JhbnRlZC5cclxuXHJcblRIRSBTT0ZUV0FSRSBJUyBQUk9WSURFRCBcIkFTIElTXCIgQU5EIFRIRSBBVVRIT1IgRElTQ0xBSU1TIEFMTCBXQVJSQU5USUVTIFdJVEhcclxuUkVHQVJEIFRPIFRISVMgU09GVFdBUkUgSU5DTFVESU5HIEFMTCBJTVBMSUVEIFdBUlJBTlRJRVMgT0YgTUVSQ0hBTlRBQklMSVRZXHJcbkFORCBGSVRORVNTLiBJTiBOTyBFVkVOVCBTSEFMTCBUSEUgQVVUSE9SIEJFIExJQUJMRSBGT1IgQU5ZIFNQRUNJQUwsIERJUkVDVCxcclxuSU5ESVJFQ1QsIE9SIENPTlNFUVVFTlRJQUwgREFNQUdFUyBPUiBBTlkgREFNQUdFUyBXSEFUU09FVkVSIFJFU1VMVElORyBGUk9NXHJcbkxPU1MgT0YgVVNFLCBEQVRBIE9SIFBST0ZJVFMsIFdIRVRIRVIgSU4gQU4gQUNUSU9OIE9GIENPTlRSQUNULCBORUdMSUdFTkNFIE9SXHJcbk9USEVSIFRPUlRJT1VTIEFDVElPTiwgQVJJU0lORyBPVVQgT0YgT1IgSU4gQ09OTkVDVElPTiBXSVRIIFRIRSBVU0UgT1JcclxuUEVSRk9STUFOQ0UgT0YgVEhJUyBTT0ZUV0FSRS5cclxuKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiogKi9cclxuLyogZ2xvYmFsIFJlZmxlY3QsIFByb21pc2UgKi9cclxuXHJcbnZhciBleHRlbmRTdGF0aWNzID0gZnVuY3Rpb24oZCwgYikge1xyXG4gICAgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fFxyXG4gICAgICAgICh7IF9fcHJvdG9fXzogW10gfSBpbnN0YW5jZW9mIEFycmF5ICYmIGZ1bmN0aW9uIChkLCBiKSB7IGQuX19wcm90b19fID0gYjsgfSkgfHxcclxuICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTsgfTtcclxuICAgIHJldHVybiBleHRlbmRTdGF0aWNzKGQsIGIpO1xyXG59O1xyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fZXh0ZW5kcyhkLCBiKSB7XHJcbiAgICBleHRlbmRTdGF0aWNzKGQsIGIpO1xyXG4gICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XHJcbiAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XHJcbn1cclxuXHJcbmV4cG9ydCB2YXIgX19hc3NpZ24gPSBmdW5jdGlvbigpIHtcclxuICAgIF9fYXNzaWduID0gT2JqZWN0LmFzc2lnbiB8fCBmdW5jdGlvbiBfX2Fzc2lnbih0KSB7XHJcbiAgICAgICAgZm9yICh2YXIgcywgaSA9IDEsIG4gPSBhcmd1bWVudHMubGVuZ3RoOyBpIDwgbjsgaSsrKSB7XHJcbiAgICAgICAgICAgIHMgPSBhcmd1bWVudHNbaV07XHJcbiAgICAgICAgICAgIGZvciAodmFyIHAgaW4gcykgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChzLCBwKSkgdFtwXSA9IHNbcF07XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiB0O1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIF9fYXNzaWduLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX3Jlc3QocywgZSkge1xyXG4gICAgdmFyIHQgPSB7fTtcclxuICAgIGZvciAodmFyIHAgaW4gcykgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChzLCBwKSAmJiBlLmluZGV4T2YocCkgPCAwKVxyXG4gICAgICAgIHRbcF0gPSBzW3BdO1xyXG4gICAgaWYgKHMgIT0gbnVsbCAmJiB0eXBlb2YgT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scyA9PT0gXCJmdW5jdGlvblwiKVxyXG4gICAgICAgIGZvciAodmFyIGkgPSAwLCBwID0gT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scyhzKTsgaSA8IHAubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgaWYgKGUuaW5kZXhPZihwW2ldKSA8IDAgJiYgT2JqZWN0LnByb3RvdHlwZS5wcm9wZXJ0eUlzRW51bWVyYWJsZS5jYWxsKHMsIHBbaV0pKVxyXG4gICAgICAgICAgICAgICAgdFtwW2ldXSA9IHNbcFtpXV07XHJcbiAgICAgICAgfVxyXG4gICAgcmV0dXJuIHQ7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX2RlY29yYXRlKGRlY29yYXRvcnMsIHRhcmdldCwga2V5LCBkZXNjKSB7XHJcbiAgICB2YXIgYyA9IGFyZ3VtZW50cy5sZW5ndGgsIHIgPSBjIDwgMyA/IHRhcmdldCA6IGRlc2MgPT09IG51bGwgPyBkZXNjID0gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcih0YXJnZXQsIGtleSkgOiBkZXNjLCBkO1xyXG4gICAgaWYgKHR5cGVvZiBSZWZsZWN0ID09PSBcIm9iamVjdFwiICYmIHR5cGVvZiBSZWZsZWN0LmRlY29yYXRlID09PSBcImZ1bmN0aW9uXCIpIHIgPSBSZWZsZWN0LmRlY29yYXRlKGRlY29yYXRvcnMsIHRhcmdldCwga2V5LCBkZXNjKTtcclxuICAgIGVsc2UgZm9yICh2YXIgaSA9IGRlY29yYXRvcnMubGVuZ3RoIC0gMTsgaSA+PSAwOyBpLS0pIGlmIChkID0gZGVjb3JhdG9yc1tpXSkgciA9IChjIDwgMyA/IGQocikgOiBjID4gMyA/IGQodGFyZ2V0LCBrZXksIHIpIDogZCh0YXJnZXQsIGtleSkpIHx8IHI7XHJcbiAgICByZXR1cm4gYyA+IDMgJiYgciAmJiBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBrZXksIHIpLCByO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19wYXJhbShwYXJhbUluZGV4LCBkZWNvcmF0b3IpIHtcclxuICAgIHJldHVybiBmdW5jdGlvbiAodGFyZ2V0LCBrZXkpIHsgZGVjb3JhdG9yKHRhcmdldCwga2V5LCBwYXJhbUluZGV4KTsgfVxyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19tZXRhZGF0YShtZXRhZGF0YUtleSwgbWV0YWRhdGFWYWx1ZSkge1xyXG4gICAgaWYgKHR5cGVvZiBSZWZsZWN0ID09PSBcIm9iamVjdFwiICYmIHR5cGVvZiBSZWZsZWN0Lm1ldGFkYXRhID09PSBcImZ1bmN0aW9uXCIpIHJldHVybiBSZWZsZWN0Lm1ldGFkYXRhKG1ldGFkYXRhS2V5LCBtZXRhZGF0YVZhbHVlKTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fYXdhaXRlcih0aGlzQXJnLCBfYXJndW1lbnRzLCBQLCBnZW5lcmF0b3IpIHtcclxuICAgIGZ1bmN0aW9uIGFkb3B0KHZhbHVlKSB7IHJldHVybiB2YWx1ZSBpbnN0YW5jZW9mIFAgPyB2YWx1ZSA6IG5ldyBQKGZ1bmN0aW9uIChyZXNvbHZlKSB7IHJlc29sdmUodmFsdWUpOyB9KTsgfVxyXG4gICAgcmV0dXJuIG5ldyAoUCB8fCAoUCA9IFByb21pc2UpKShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7XHJcbiAgICAgICAgZnVuY3Rpb24gZnVsZmlsbGVkKHZhbHVlKSB7IHRyeSB7IHN0ZXAoZ2VuZXJhdG9yLm5leHQodmFsdWUpKTsgfSBjYXRjaCAoZSkgeyByZWplY3QoZSk7IH0gfVxyXG4gICAgICAgIGZ1bmN0aW9uIHJlamVjdGVkKHZhbHVlKSB7IHRyeSB7IHN0ZXAoZ2VuZXJhdG9yW1widGhyb3dcIl0odmFsdWUpKTsgfSBjYXRjaCAoZSkgeyByZWplY3QoZSk7IH0gfVxyXG4gICAgICAgIGZ1bmN0aW9uIHN0ZXAocmVzdWx0KSB7IHJlc3VsdC5kb25lID8gcmVzb2x2ZShyZXN1bHQudmFsdWUpIDogYWRvcHQocmVzdWx0LnZhbHVlKS50aGVuKGZ1bGZpbGxlZCwgcmVqZWN0ZWQpOyB9XHJcbiAgICAgICAgc3RlcCgoZ2VuZXJhdG9yID0gZ2VuZXJhdG9yLmFwcGx5KHRoaXNBcmcsIF9hcmd1bWVudHMgfHwgW10pKS5uZXh0KCkpO1xyXG4gICAgfSk7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX2dlbmVyYXRvcih0aGlzQXJnLCBib2R5KSB7XHJcbiAgICB2YXIgXyA9IHsgbGFiZWw6IDAsIHNlbnQ6IGZ1bmN0aW9uKCkgeyBpZiAodFswXSAmIDEpIHRocm93IHRbMV07IHJldHVybiB0WzFdOyB9LCB0cnlzOiBbXSwgb3BzOiBbXSB9LCBmLCB5LCB0LCBnO1xyXG4gICAgcmV0dXJuIGcgPSB7IG5leHQ6IHZlcmIoMCksIFwidGhyb3dcIjogdmVyYigxKSwgXCJyZXR1cm5cIjogdmVyYigyKSB9LCB0eXBlb2YgU3ltYm9sID09PSBcImZ1bmN0aW9uXCIgJiYgKGdbU3ltYm9sLml0ZXJhdG9yXSA9IGZ1bmN0aW9uKCkgeyByZXR1cm4gdGhpczsgfSksIGc7XHJcbiAgICBmdW5jdGlvbiB2ZXJiKG4pIHsgcmV0dXJuIGZ1bmN0aW9uICh2KSB7IHJldHVybiBzdGVwKFtuLCB2XSk7IH07IH1cclxuICAgIGZ1bmN0aW9uIHN0ZXAob3ApIHtcclxuICAgICAgICBpZiAoZikgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkdlbmVyYXRvciBpcyBhbHJlYWR5IGV4ZWN1dGluZy5cIik7XHJcbiAgICAgICAgd2hpbGUgKF8pIHRyeSB7XHJcbiAgICAgICAgICAgIGlmIChmID0gMSwgeSAmJiAodCA9IG9wWzBdICYgMiA/IHlbXCJyZXR1cm5cIl0gOiBvcFswXSA/IHlbXCJ0aHJvd1wiXSB8fCAoKHQgPSB5W1wicmV0dXJuXCJdKSAmJiB0LmNhbGwoeSksIDApIDogeS5uZXh0KSAmJiAhKHQgPSB0LmNhbGwoeSwgb3BbMV0pKS5kb25lKSByZXR1cm4gdDtcclxuICAgICAgICAgICAgaWYgKHkgPSAwLCB0KSBvcCA9IFtvcFswXSAmIDIsIHQudmFsdWVdO1xyXG4gICAgICAgICAgICBzd2l0Y2ggKG9wWzBdKSB7XHJcbiAgICAgICAgICAgICAgICBjYXNlIDA6IGNhc2UgMTogdCA9IG9wOyBicmVhaztcclxuICAgICAgICAgICAgICAgIGNhc2UgNDogXy5sYWJlbCsrOyByZXR1cm4geyB2YWx1ZTogb3BbMV0sIGRvbmU6IGZhbHNlIH07XHJcbiAgICAgICAgICAgICAgICBjYXNlIDU6IF8ubGFiZWwrKzsgeSA9IG9wWzFdOyBvcCA9IFswXTsgY29udGludWU7XHJcbiAgICAgICAgICAgICAgICBjYXNlIDc6IG9wID0gXy5vcHMucG9wKCk7IF8udHJ5cy5wb3AoKTsgY29udGludWU7XHJcbiAgICAgICAgICAgICAgICBkZWZhdWx0OlxyXG4gICAgICAgICAgICAgICAgICAgIGlmICghKHQgPSBfLnRyeXMsIHQgPSB0Lmxlbmd0aCA+IDAgJiYgdFt0Lmxlbmd0aCAtIDFdKSAmJiAob3BbMF0gPT09IDYgfHwgb3BbMF0gPT09IDIpKSB7IF8gPSAwOyBjb250aW51ZTsgfVxyXG4gICAgICAgICAgICAgICAgICAgIGlmIChvcFswXSA9PT0gMyAmJiAoIXQgfHwgKG9wWzFdID4gdFswXSAmJiBvcFsxXSA8IHRbM10pKSkgeyBfLmxhYmVsID0gb3BbMV07IGJyZWFrOyB9XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKG9wWzBdID09PSA2ICYmIF8ubGFiZWwgPCB0WzFdKSB7IF8ubGFiZWwgPSB0WzFdOyB0ID0gb3A7IGJyZWFrOyB9XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHQgJiYgXy5sYWJlbCA8IHRbMl0pIHsgXy5sYWJlbCA9IHRbMl07IF8ub3BzLnB1c2gob3ApOyBicmVhazsgfVxyXG4gICAgICAgICAgICAgICAgICAgIGlmICh0WzJdKSBfLm9wcy5wb3AoKTtcclxuICAgICAgICAgICAgICAgICAgICBfLnRyeXMucG9wKCk7IGNvbnRpbnVlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIG9wID0gYm9keS5jYWxsKHRoaXNBcmcsIF8pO1xyXG4gICAgICAgIH0gY2F0Y2ggKGUpIHsgb3AgPSBbNiwgZV07IHkgPSAwOyB9IGZpbmFsbHkgeyBmID0gdCA9IDA7IH1cclxuICAgICAgICBpZiAob3BbMF0gJiA1KSB0aHJvdyBvcFsxXTsgcmV0dXJuIHsgdmFsdWU6IG9wWzBdID8gb3BbMV0gOiB2b2lkIDAsIGRvbmU6IHRydWUgfTtcclxuICAgIH1cclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fY3JlYXRlQmluZGluZyhvLCBtLCBrLCBrMikge1xyXG4gICAgaWYgKGsyID09PSB1bmRlZmluZWQpIGsyID0gaztcclxuICAgIG9bazJdID0gbVtrXTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fZXhwb3J0U3RhcihtLCBleHBvcnRzKSB7XHJcbiAgICBmb3IgKHZhciBwIGluIG0pIGlmIChwICE9PSBcImRlZmF1bHRcIiAmJiAhZXhwb3J0cy5oYXNPd25Qcm9wZXJ0eShwKSkgZXhwb3J0c1twXSA9IG1bcF07XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX3ZhbHVlcyhvKSB7XHJcbiAgICB2YXIgcyA9IHR5cGVvZiBTeW1ib2wgPT09IFwiZnVuY3Rpb25cIiAmJiBTeW1ib2wuaXRlcmF0b3IsIG0gPSBzICYmIG9bc10sIGkgPSAwO1xyXG4gICAgaWYgKG0pIHJldHVybiBtLmNhbGwobyk7XHJcbiAgICBpZiAobyAmJiB0eXBlb2Ygby5sZW5ndGggPT09IFwibnVtYmVyXCIpIHJldHVybiB7XHJcbiAgICAgICAgbmV4dDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICBpZiAobyAmJiBpID49IG8ubGVuZ3RoKSBvID0gdm9pZCAwO1xyXG4gICAgICAgICAgICByZXR1cm4geyB2YWx1ZTogbyAmJiBvW2krK10sIGRvbmU6ICFvIH07XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuICAgIHRocm93IG5ldyBUeXBlRXJyb3IocyA/IFwiT2JqZWN0IGlzIG5vdCBpdGVyYWJsZS5cIiA6IFwiU3ltYm9sLml0ZXJhdG9yIGlzIG5vdCBkZWZpbmVkLlwiKTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fcmVhZChvLCBuKSB7XHJcbiAgICB2YXIgbSA9IHR5cGVvZiBTeW1ib2wgPT09IFwiZnVuY3Rpb25cIiAmJiBvW1N5bWJvbC5pdGVyYXRvcl07XHJcbiAgICBpZiAoIW0pIHJldHVybiBvO1xyXG4gICAgdmFyIGkgPSBtLmNhbGwobyksIHIsIGFyID0gW10sIGU7XHJcbiAgICB0cnkge1xyXG4gICAgICAgIHdoaWxlICgobiA9PT0gdm9pZCAwIHx8IG4tLSA+IDApICYmICEociA9IGkubmV4dCgpKS5kb25lKSBhci5wdXNoKHIudmFsdWUpO1xyXG4gICAgfVxyXG4gICAgY2F0Y2ggKGVycm9yKSB7IGUgPSB7IGVycm9yOiBlcnJvciB9OyB9XHJcbiAgICBmaW5hbGx5IHtcclxuICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICBpZiAociAmJiAhci5kb25lICYmIChtID0gaVtcInJldHVyblwiXSkpIG0uY2FsbChpKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZmluYWxseSB7IGlmIChlKSB0aHJvdyBlLmVycm9yOyB9XHJcbiAgICB9XHJcbiAgICByZXR1cm4gYXI7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX3NwcmVhZCgpIHtcclxuICAgIGZvciAodmFyIGFyID0gW10sIGkgPSAwOyBpIDwgYXJndW1lbnRzLmxlbmd0aDsgaSsrKVxyXG4gICAgICAgIGFyID0gYXIuY29uY2F0KF9fcmVhZChhcmd1bWVudHNbaV0pKTtcclxuICAgIHJldHVybiBhcjtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fc3ByZWFkQXJyYXlzKCkge1xyXG4gICAgZm9yICh2YXIgcyA9IDAsIGkgPSAwLCBpbCA9IGFyZ3VtZW50cy5sZW5ndGg7IGkgPCBpbDsgaSsrKSBzICs9IGFyZ3VtZW50c1tpXS5sZW5ndGg7XHJcbiAgICBmb3IgKHZhciByID0gQXJyYXkocyksIGsgPSAwLCBpID0gMDsgaSA8IGlsOyBpKyspXHJcbiAgICAgICAgZm9yICh2YXIgYSA9IGFyZ3VtZW50c1tpXSwgaiA9IDAsIGpsID0gYS5sZW5ndGg7IGogPCBqbDsgaisrLCBrKyspXHJcbiAgICAgICAgICAgIHJba10gPSBhW2pdO1xyXG4gICAgcmV0dXJuIHI7XHJcbn07XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19hd2FpdCh2KSB7XHJcbiAgICByZXR1cm4gdGhpcyBpbnN0YW5jZW9mIF9fYXdhaXQgPyAodGhpcy52ID0gdiwgdGhpcykgOiBuZXcgX19hd2FpdCh2KTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fYXN5bmNHZW5lcmF0b3IodGhpc0FyZywgX2FyZ3VtZW50cywgZ2VuZXJhdG9yKSB7XHJcbiAgICBpZiAoIVN5bWJvbC5hc3luY0l0ZXJhdG9yKSB0aHJvdyBuZXcgVHlwZUVycm9yKFwiU3ltYm9sLmFzeW5jSXRlcmF0b3IgaXMgbm90IGRlZmluZWQuXCIpO1xyXG4gICAgdmFyIGcgPSBnZW5lcmF0b3IuYXBwbHkodGhpc0FyZywgX2FyZ3VtZW50cyB8fCBbXSksIGksIHEgPSBbXTtcclxuICAgIHJldHVybiBpID0ge30sIHZlcmIoXCJuZXh0XCIpLCB2ZXJiKFwidGhyb3dcIiksIHZlcmIoXCJyZXR1cm5cIiksIGlbU3ltYm9sLmFzeW5jSXRlcmF0b3JdID0gZnVuY3Rpb24gKCkgeyByZXR1cm4gdGhpczsgfSwgaTtcclxuICAgIGZ1bmN0aW9uIHZlcmIobikgeyBpZiAoZ1tuXSkgaVtuXSA9IGZ1bmN0aW9uICh2KSB7IHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAoYSwgYikgeyBxLnB1c2goW24sIHYsIGEsIGJdKSA+IDEgfHwgcmVzdW1lKG4sIHYpOyB9KTsgfTsgfVxyXG4gICAgZnVuY3Rpb24gcmVzdW1lKG4sIHYpIHsgdHJ5IHsgc3RlcChnW25dKHYpKTsgfSBjYXRjaCAoZSkgeyBzZXR0bGUocVswXVszXSwgZSk7IH0gfVxyXG4gICAgZnVuY3Rpb24gc3RlcChyKSB7IHIudmFsdWUgaW5zdGFuY2VvZiBfX2F3YWl0ID8gUHJvbWlzZS5yZXNvbHZlKHIudmFsdWUudikudGhlbihmdWxmaWxsLCByZWplY3QpIDogc2V0dGxlKHFbMF1bMl0sIHIpOyB9XHJcbiAgICBmdW5jdGlvbiBmdWxmaWxsKHZhbHVlKSB7IHJlc3VtZShcIm5leHRcIiwgdmFsdWUpOyB9XHJcbiAgICBmdW5jdGlvbiByZWplY3QodmFsdWUpIHsgcmVzdW1lKFwidGhyb3dcIiwgdmFsdWUpOyB9XHJcbiAgICBmdW5jdGlvbiBzZXR0bGUoZiwgdikgeyBpZiAoZih2KSwgcS5zaGlmdCgpLCBxLmxlbmd0aCkgcmVzdW1lKHFbMF1bMF0sIHFbMF1bMV0pOyB9XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX2FzeW5jRGVsZWdhdG9yKG8pIHtcclxuICAgIHZhciBpLCBwO1xyXG4gICAgcmV0dXJuIGkgPSB7fSwgdmVyYihcIm5leHRcIiksIHZlcmIoXCJ0aHJvd1wiLCBmdW5jdGlvbiAoZSkgeyB0aHJvdyBlOyB9KSwgdmVyYihcInJldHVyblwiKSwgaVtTeW1ib2wuaXRlcmF0b3JdID0gZnVuY3Rpb24gKCkgeyByZXR1cm4gdGhpczsgfSwgaTtcclxuICAgIGZ1bmN0aW9uIHZlcmIobiwgZikgeyBpW25dID0gb1tuXSA/IGZ1bmN0aW9uICh2KSB7IHJldHVybiAocCA9ICFwKSA/IHsgdmFsdWU6IF9fYXdhaXQob1tuXSh2KSksIGRvbmU6IG4gPT09IFwicmV0dXJuXCIgfSA6IGYgPyBmKHYpIDogdjsgfSA6IGY7IH1cclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fYXN5bmNWYWx1ZXMobykge1xyXG4gICAgaWYgKCFTeW1ib2wuYXN5bmNJdGVyYXRvcikgdGhyb3cgbmV3IFR5cGVFcnJvcihcIlN5bWJvbC5hc3luY0l0ZXJhdG9yIGlzIG5vdCBkZWZpbmVkLlwiKTtcclxuICAgIHZhciBtID0gb1tTeW1ib2wuYXN5bmNJdGVyYXRvcl0sIGk7XHJcbiAgICByZXR1cm4gbSA/IG0uY2FsbChvKSA6IChvID0gdHlwZW9mIF9fdmFsdWVzID09PSBcImZ1bmN0aW9uXCIgPyBfX3ZhbHVlcyhvKSA6IG9bU3ltYm9sLml0ZXJhdG9yXSgpLCBpID0ge30sIHZlcmIoXCJuZXh0XCIpLCB2ZXJiKFwidGhyb3dcIiksIHZlcmIoXCJyZXR1cm5cIiksIGlbU3ltYm9sLmFzeW5jSXRlcmF0b3JdID0gZnVuY3Rpb24gKCkgeyByZXR1cm4gdGhpczsgfSwgaSk7XHJcbiAgICBmdW5jdGlvbiB2ZXJiKG4pIHsgaVtuXSA9IG9bbl0gJiYgZnVuY3Rpb24gKHYpIHsgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHsgdiA9IG9bbl0odiksIHNldHRsZShyZXNvbHZlLCByZWplY3QsIHYuZG9uZSwgdi52YWx1ZSk7IH0pOyB9OyB9XHJcbiAgICBmdW5jdGlvbiBzZXR0bGUocmVzb2x2ZSwgcmVqZWN0LCBkLCB2KSB7IFByb21pc2UucmVzb2x2ZSh2KS50aGVuKGZ1bmN0aW9uKHYpIHsgcmVzb2x2ZSh7IHZhbHVlOiB2LCBkb25lOiBkIH0pOyB9LCByZWplY3QpOyB9XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX21ha2VUZW1wbGF0ZU9iamVjdChjb29rZWQsIHJhdykge1xyXG4gICAgaWYgKE9iamVjdC5kZWZpbmVQcm9wZXJ0eSkgeyBPYmplY3QuZGVmaW5lUHJvcGVydHkoY29va2VkLCBcInJhd1wiLCB7IHZhbHVlOiByYXcgfSk7IH0gZWxzZSB7IGNvb2tlZC5yYXcgPSByYXc7IH1cclxuICAgIHJldHVybiBjb29rZWQ7XHJcbn07XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19pbXBvcnRTdGFyKG1vZCkge1xyXG4gICAgaWYgKG1vZCAmJiBtb2QuX19lc01vZHVsZSkgcmV0dXJuIG1vZDtcclxuICAgIHZhciByZXN1bHQgPSB7fTtcclxuICAgIGlmIChtb2QgIT0gbnVsbCkgZm9yICh2YXIgayBpbiBtb2QpIGlmIChPYmplY3QuaGFzT3duUHJvcGVydHkuY2FsbChtb2QsIGspKSByZXN1bHRba10gPSBtb2Rba107XHJcbiAgICByZXN1bHQuZGVmYXVsdCA9IG1vZDtcclxuICAgIHJldHVybiByZXN1bHQ7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX2ltcG9ydERlZmF1bHQobW9kKSB7XHJcbiAgICByZXR1cm4gKG1vZCAmJiBtb2QuX19lc01vZHVsZSkgPyBtb2QgOiB7IGRlZmF1bHQ6IG1vZCB9O1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19jbGFzc1ByaXZhdGVGaWVsZEdldChyZWNlaXZlciwgcHJpdmF0ZU1hcCkge1xyXG4gICAgaWYgKCFwcml2YXRlTWFwLmhhcyhyZWNlaXZlcikpIHtcclxuICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKFwiYXR0ZW1wdGVkIHRvIGdldCBwcml2YXRlIGZpZWxkIG9uIG5vbi1pbnN0YW5jZVwiKTtcclxuICAgIH1cclxuICAgIHJldHVybiBwcml2YXRlTWFwLmdldChyZWNlaXZlcik7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX2NsYXNzUHJpdmF0ZUZpZWxkU2V0KHJlY2VpdmVyLCBwcml2YXRlTWFwLCB2YWx1ZSkge1xyXG4gICAgaWYgKCFwcml2YXRlTWFwLmhhcyhyZWNlaXZlcikpIHtcclxuICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKFwiYXR0ZW1wdGVkIHRvIHNldCBwcml2YXRlIGZpZWxkIG9uIG5vbi1pbnN0YW5jZVwiKTtcclxuICAgIH1cclxuICAgIHByaXZhdGVNYXAuc2V0KHJlY2VpdmVyLCB2YWx1ZSk7XHJcbiAgICByZXR1cm4gdmFsdWU7XHJcbn1cclxuIiwiLyoqIFBVUkVfSU1QT1JUU19TVEFSVCAgUFVSRV9JTVBPUlRTX0VORCAqL1xuZXhwb3J0IGZ1bmN0aW9uIGlzRnVuY3Rpb24oeCkge1xuICAgIHJldHVybiB0eXBlb2YgeCA9PT0gJ2Z1bmN0aW9uJztcbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWlzRnVuY3Rpb24uanMubWFwXG4iLCIvKiogUFVSRV9JTVBPUlRTX1NUQVJUICBQVVJFX0lNUE9SVFNfRU5EICovXG52YXIgX2VuYWJsZV9zdXBlcl9ncm9zc19tb2RlX3RoYXRfd2lsbF9jYXVzZV9iYWRfdGhpbmdzID0gZmFsc2U7XG5leHBvcnQgdmFyIGNvbmZpZyA9IHtcbiAgICBQcm9taXNlOiB1bmRlZmluZWQsXG4gICAgc2V0IHVzZURlcHJlY2F0ZWRTeW5jaHJvbm91c0Vycm9ySGFuZGxpbmcodmFsdWUpIHtcbiAgICAgICAgaWYgKHZhbHVlKSB7XG4gICAgICAgICAgICB2YXIgZXJyb3IgPSAvKkBfX1BVUkVfXyovIG5ldyBFcnJvcigpO1xuICAgICAgICAgICAgLypAX19QVVJFX18qLyBjb25zb2xlLndhcm4oJ0RFUFJFQ0FURUQhIFJ4SlMgd2FzIHNldCB0byB1c2UgZGVwcmVjYXRlZCBzeW5jaHJvbm91cyBlcnJvciBoYW5kbGluZyBiZWhhdmlvciBieSBjb2RlIGF0OiBcXG4nICsgZXJyb3Iuc3RhY2spO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKF9lbmFibGVfc3VwZXJfZ3Jvc3NfbW9kZV90aGF0X3dpbGxfY2F1c2VfYmFkX3RoaW5ncykge1xuICAgICAgICAgICAgLypAX19QVVJFX18qLyBjb25zb2xlLmxvZygnUnhKUzogQmFjayB0byBhIGJldHRlciBlcnJvciBiZWhhdmlvci4gVGhhbmsgeW91LiA8MycpO1xuICAgICAgICB9XG4gICAgICAgIF9lbmFibGVfc3VwZXJfZ3Jvc3NfbW9kZV90aGF0X3dpbGxfY2F1c2VfYmFkX3RoaW5ncyA9IHZhbHVlO1xuICAgIH0sXG4gICAgZ2V0IHVzZURlcHJlY2F0ZWRTeW5jaHJvbm91c0Vycm9ySGFuZGxpbmcoKSB7XG4gICAgICAgIHJldHVybiBfZW5hYmxlX3N1cGVyX2dyb3NzX21vZGVfdGhhdF93aWxsX2NhdXNlX2JhZF90aGluZ3M7XG4gICAgfSxcbn07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1jb25maWcuanMubWFwXG4iLCIvKiogUFVSRV9JTVBPUlRTX1NUQVJUICBQVVJFX0lNUE9SVFNfRU5EICovXG5leHBvcnQgZnVuY3Rpb24gaG9zdFJlcG9ydEVycm9yKGVycikge1xuICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkgeyB0aHJvdyBlcnI7IH0sIDApO1xufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9aG9zdFJlcG9ydEVycm9yLmpzLm1hcFxuIiwiLyoqIFBVUkVfSU1QT1JUU19TVEFSVCBfY29uZmlnLF91dGlsX2hvc3RSZXBvcnRFcnJvciBQVVJFX0lNUE9SVFNfRU5EICovXG5pbXBvcnQgeyBjb25maWcgfSBmcm9tICcuL2NvbmZpZyc7XG5pbXBvcnQgeyBob3N0UmVwb3J0RXJyb3IgfSBmcm9tICcuL3V0aWwvaG9zdFJlcG9ydEVycm9yJztcbmV4cG9ydCB2YXIgZW1wdHkgPSB7XG4gICAgY2xvc2VkOiB0cnVlLFxuICAgIG5leHQ6IGZ1bmN0aW9uICh2YWx1ZSkgeyB9LFxuICAgIGVycm9yOiBmdW5jdGlvbiAoZXJyKSB7XG4gICAgICAgIGlmIChjb25maWcudXNlRGVwcmVjYXRlZFN5bmNocm9ub3VzRXJyb3JIYW5kbGluZykge1xuICAgICAgICAgICAgdGhyb3cgZXJyO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgaG9zdFJlcG9ydEVycm9yKGVycik7XG4gICAgICAgIH1cbiAgICB9LFxuICAgIGNvbXBsZXRlOiBmdW5jdGlvbiAoKSB7IH1cbn07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1PYnNlcnZlci5qcy5tYXBcbiIsIi8qKiBQVVJFX0lNUE9SVFNfU1RBUlQgIFBVUkVfSU1QT1JUU19FTkQgKi9cbmV4cG9ydCB2YXIgaXNBcnJheSA9IC8qQF9fUFVSRV9fKi8gKGZ1bmN0aW9uICgpIHsgcmV0dXJuIEFycmF5LmlzQXJyYXkgfHwgKGZ1bmN0aW9uICh4KSB7IHJldHVybiB4ICYmIHR5cGVvZiB4Lmxlbmd0aCA9PT0gJ251bWJlcic7IH0pOyB9KSgpO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9aXNBcnJheS5qcy5tYXBcbiIsIi8qKiBQVVJFX0lNUE9SVFNfU1RBUlQgIFBVUkVfSU1QT1JUU19FTkQgKi9cbmV4cG9ydCBmdW5jdGlvbiBpc09iamVjdCh4KSB7XG4gICAgcmV0dXJuIHggIT09IG51bGwgJiYgdHlwZW9mIHggPT09ICdvYmplY3QnO1xufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9aXNPYmplY3QuanMubWFwXG4iLCIvKiogUFVSRV9JTVBPUlRTX1NUQVJUICBQVVJFX0lNUE9SVFNfRU5EICovXG52YXIgVW5zdWJzY3JpcHRpb25FcnJvckltcGwgPSAvKkBfX1BVUkVfXyovIChmdW5jdGlvbiAoKSB7XG4gICAgZnVuY3Rpb24gVW5zdWJzY3JpcHRpb25FcnJvckltcGwoZXJyb3JzKSB7XG4gICAgICAgIEVycm9yLmNhbGwodGhpcyk7XG4gICAgICAgIHRoaXMubWVzc2FnZSA9IGVycm9ycyA/XG4gICAgICAgICAgICBlcnJvcnMubGVuZ3RoICsgXCIgZXJyb3JzIG9jY3VycmVkIGR1cmluZyB1bnN1YnNjcmlwdGlvbjpcXG5cIiArIGVycm9ycy5tYXAoZnVuY3Rpb24gKGVyciwgaSkgeyByZXR1cm4gaSArIDEgKyBcIikgXCIgKyBlcnIudG9TdHJpbmcoKTsgfSkuam9pbignXFxuICAnKSA6ICcnO1xuICAgICAgICB0aGlzLm5hbWUgPSAnVW5zdWJzY3JpcHRpb25FcnJvcic7XG4gICAgICAgIHRoaXMuZXJyb3JzID0gZXJyb3JzO1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9XG4gICAgVW5zdWJzY3JpcHRpb25FcnJvckltcGwucHJvdG90eXBlID0gLypAX19QVVJFX18qLyBPYmplY3QuY3JlYXRlKEVycm9yLnByb3RvdHlwZSk7XG4gICAgcmV0dXJuIFVuc3Vic2NyaXB0aW9uRXJyb3JJbXBsO1xufSkoKTtcbmV4cG9ydCB2YXIgVW5zdWJzY3JpcHRpb25FcnJvciA9IFVuc3Vic2NyaXB0aW9uRXJyb3JJbXBsO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9VW5zdWJzY3JpcHRpb25FcnJvci5qcy5tYXBcbiIsIi8qKiBQVVJFX0lNUE9SVFNfU1RBUlQgX3V0aWxfaXNBcnJheSxfdXRpbF9pc09iamVjdCxfdXRpbF9pc0Z1bmN0aW9uLF91dGlsX1Vuc3Vic2NyaXB0aW9uRXJyb3IgUFVSRV9JTVBPUlRTX0VORCAqL1xuaW1wb3J0IHsgaXNBcnJheSB9IGZyb20gJy4vdXRpbC9pc0FycmF5JztcbmltcG9ydCB7IGlzT2JqZWN0IH0gZnJvbSAnLi91dGlsL2lzT2JqZWN0JztcbmltcG9ydCB7IGlzRnVuY3Rpb24gfSBmcm9tICcuL3V0aWwvaXNGdW5jdGlvbic7XG5pbXBvcnQgeyBVbnN1YnNjcmlwdGlvbkVycm9yIH0gZnJvbSAnLi91dGlsL1Vuc3Vic2NyaXB0aW9uRXJyb3InO1xudmFyIFN1YnNjcmlwdGlvbiA9IC8qQF9fUFVSRV9fKi8gKGZ1bmN0aW9uICgpIHtcbiAgICBmdW5jdGlvbiBTdWJzY3JpcHRpb24odW5zdWJzY3JpYmUpIHtcbiAgICAgICAgdGhpcy5jbG9zZWQgPSBmYWxzZTtcbiAgICAgICAgdGhpcy5fcGFyZW50T3JQYXJlbnRzID0gbnVsbDtcbiAgICAgICAgdGhpcy5fc3Vic2NyaXB0aW9ucyA9IG51bGw7XG4gICAgICAgIGlmICh1bnN1YnNjcmliZSkge1xuICAgICAgICAgICAgdGhpcy5fY3RvclVuc3Vic2NyaWJlID0gdHJ1ZTtcbiAgICAgICAgICAgIHRoaXMuX3Vuc3Vic2NyaWJlID0gdW5zdWJzY3JpYmU7XG4gICAgICAgIH1cbiAgICB9XG4gICAgU3Vic2NyaXB0aW9uLnByb3RvdHlwZS51bnN1YnNjcmliZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIGVycm9ycztcbiAgICAgICAgaWYgKHRoaXMuY2xvc2VkKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgdmFyIF9hID0gdGhpcywgX3BhcmVudE9yUGFyZW50cyA9IF9hLl9wYXJlbnRPclBhcmVudHMsIF9jdG9yVW5zdWJzY3JpYmUgPSBfYS5fY3RvclVuc3Vic2NyaWJlLCBfdW5zdWJzY3JpYmUgPSBfYS5fdW5zdWJzY3JpYmUsIF9zdWJzY3JpcHRpb25zID0gX2EuX3N1YnNjcmlwdGlvbnM7XG4gICAgICAgIHRoaXMuY2xvc2VkID0gdHJ1ZTtcbiAgICAgICAgdGhpcy5fcGFyZW50T3JQYXJlbnRzID0gbnVsbDtcbiAgICAgICAgdGhpcy5fc3Vic2NyaXB0aW9ucyA9IG51bGw7XG4gICAgICAgIGlmIChfcGFyZW50T3JQYXJlbnRzIGluc3RhbmNlb2YgU3Vic2NyaXB0aW9uKSB7XG4gICAgICAgICAgICBfcGFyZW50T3JQYXJlbnRzLnJlbW92ZSh0aGlzKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChfcGFyZW50T3JQYXJlbnRzICE9PSBudWxsKSB7XG4gICAgICAgICAgICBmb3IgKHZhciBpbmRleCA9IDA7IGluZGV4IDwgX3BhcmVudE9yUGFyZW50cy5sZW5ndGg7ICsraW5kZXgpIHtcbiAgICAgICAgICAgICAgICB2YXIgcGFyZW50XzEgPSBfcGFyZW50T3JQYXJlbnRzW2luZGV4XTtcbiAgICAgICAgICAgICAgICBwYXJlbnRfMS5yZW1vdmUodGhpcyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGlzRnVuY3Rpb24oX3Vuc3Vic2NyaWJlKSkge1xuICAgICAgICAgICAgaWYgKF9jdG9yVW5zdWJzY3JpYmUpIHtcbiAgICAgICAgICAgICAgICB0aGlzLl91bnN1YnNjcmliZSA9IHVuZGVmaW5lZDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgX3Vuc3Vic2NyaWJlLmNhbGwodGhpcyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjYXRjaCAoZSkge1xuICAgICAgICAgICAgICAgIGVycm9ycyA9IGUgaW5zdGFuY2VvZiBVbnN1YnNjcmlwdGlvbkVycm9yID8gZmxhdHRlblVuc3Vic2NyaXB0aW9uRXJyb3JzKGUuZXJyb3JzKSA6IFtlXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBpZiAoaXNBcnJheShfc3Vic2NyaXB0aW9ucykpIHtcbiAgICAgICAgICAgIHZhciBpbmRleCA9IC0xO1xuICAgICAgICAgICAgdmFyIGxlbiA9IF9zdWJzY3JpcHRpb25zLmxlbmd0aDtcbiAgICAgICAgICAgIHdoaWxlICgrK2luZGV4IDwgbGVuKSB7XG4gICAgICAgICAgICAgICAgdmFyIHN1YiA9IF9zdWJzY3JpcHRpb25zW2luZGV4XTtcbiAgICAgICAgICAgICAgICBpZiAoaXNPYmplY3Qoc3ViKSkge1xuICAgICAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICAgICAgc3ViLnVuc3Vic2NyaWJlKCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGVycm9ycyA9IGVycm9ycyB8fCBbXTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChlIGluc3RhbmNlb2YgVW5zdWJzY3JpcHRpb25FcnJvcikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVycm9ycyA9IGVycm9ycy5jb25jYXQoZmxhdHRlblVuc3Vic2NyaXB0aW9uRXJyb3JzKGUuZXJyb3JzKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlcnJvcnMucHVzaChlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBpZiAoZXJyb3JzKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgVW5zdWJzY3JpcHRpb25FcnJvcihlcnJvcnMpO1xuICAgICAgICB9XG4gICAgfTtcbiAgICBTdWJzY3JpcHRpb24ucHJvdG90eXBlLmFkZCA9IGZ1bmN0aW9uICh0ZWFyZG93bikge1xuICAgICAgICB2YXIgc3Vic2NyaXB0aW9uID0gdGVhcmRvd247XG4gICAgICAgIGlmICghdGVhcmRvd24pIHtcbiAgICAgICAgICAgIHJldHVybiBTdWJzY3JpcHRpb24uRU1QVFk7XG4gICAgICAgIH1cbiAgICAgICAgc3dpdGNoICh0eXBlb2YgdGVhcmRvd24pIHtcbiAgICAgICAgICAgIGNhc2UgJ2Z1bmN0aW9uJzpcbiAgICAgICAgICAgICAgICBzdWJzY3JpcHRpb24gPSBuZXcgU3Vic2NyaXB0aW9uKHRlYXJkb3duKTtcbiAgICAgICAgICAgIGNhc2UgJ29iamVjdCc6XG4gICAgICAgICAgICAgICAgaWYgKHN1YnNjcmlwdGlvbiA9PT0gdGhpcyB8fCBzdWJzY3JpcHRpb24uY2xvc2VkIHx8IHR5cGVvZiBzdWJzY3JpcHRpb24udW5zdWJzY3JpYmUgIT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHN1YnNjcmlwdGlvbjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSBpZiAodGhpcy5jbG9zZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgc3Vic2NyaXB0aW9uLnVuc3Vic2NyaWJlKCk7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBzdWJzY3JpcHRpb247XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2UgaWYgKCEoc3Vic2NyaXB0aW9uIGluc3RhbmNlb2YgU3Vic2NyaXB0aW9uKSkge1xuICAgICAgICAgICAgICAgICAgICB2YXIgdG1wID0gc3Vic2NyaXB0aW9uO1xuICAgICAgICAgICAgICAgICAgICBzdWJzY3JpcHRpb24gPSBuZXcgU3Vic2NyaXB0aW9uKCk7XG4gICAgICAgICAgICAgICAgICAgIHN1YnNjcmlwdGlvbi5fc3Vic2NyaXB0aW9ucyA9IFt0bXBdO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGRlZmF1bHQ6IHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ3VucmVjb2duaXplZCB0ZWFyZG93biAnICsgdGVhcmRvd24gKyAnIGFkZGVkIHRvIFN1YnNjcmlwdGlvbi4nKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICB2YXIgX3BhcmVudE9yUGFyZW50cyA9IHN1YnNjcmlwdGlvbi5fcGFyZW50T3JQYXJlbnRzO1xuICAgICAgICBpZiAoX3BhcmVudE9yUGFyZW50cyA9PT0gbnVsbCkge1xuICAgICAgICAgICAgc3Vic2NyaXB0aW9uLl9wYXJlbnRPclBhcmVudHMgPSB0aGlzO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKF9wYXJlbnRPclBhcmVudHMgaW5zdGFuY2VvZiBTdWJzY3JpcHRpb24pIHtcbiAgICAgICAgICAgIGlmIChfcGFyZW50T3JQYXJlbnRzID09PSB0aGlzKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHN1YnNjcmlwdGlvbjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHN1YnNjcmlwdGlvbi5fcGFyZW50T3JQYXJlbnRzID0gW19wYXJlbnRPclBhcmVudHMsIHRoaXNdO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKF9wYXJlbnRPclBhcmVudHMuaW5kZXhPZih0aGlzKSA9PT0gLTEpIHtcbiAgICAgICAgICAgIF9wYXJlbnRPclBhcmVudHMucHVzaCh0aGlzKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiBzdWJzY3JpcHRpb247XG4gICAgICAgIH1cbiAgICAgICAgdmFyIHN1YnNjcmlwdGlvbnMgPSB0aGlzLl9zdWJzY3JpcHRpb25zO1xuICAgICAgICBpZiAoc3Vic2NyaXB0aW9ucyA9PT0gbnVsbCkge1xuICAgICAgICAgICAgdGhpcy5fc3Vic2NyaXB0aW9ucyA9IFtzdWJzY3JpcHRpb25dO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgc3Vic2NyaXB0aW9ucy5wdXNoKHN1YnNjcmlwdGlvbik7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHN1YnNjcmlwdGlvbjtcbiAgICB9O1xuICAgIFN1YnNjcmlwdGlvbi5wcm90b3R5cGUucmVtb3ZlID0gZnVuY3Rpb24gKHN1YnNjcmlwdGlvbikge1xuICAgICAgICB2YXIgc3Vic2NyaXB0aW9ucyA9IHRoaXMuX3N1YnNjcmlwdGlvbnM7XG4gICAgICAgIGlmIChzdWJzY3JpcHRpb25zKSB7XG4gICAgICAgICAgICB2YXIgc3Vic2NyaXB0aW9uSW5kZXggPSBzdWJzY3JpcHRpb25zLmluZGV4T2Yoc3Vic2NyaXB0aW9uKTtcbiAgICAgICAgICAgIGlmIChzdWJzY3JpcHRpb25JbmRleCAhPT0gLTEpIHtcbiAgICAgICAgICAgICAgICBzdWJzY3JpcHRpb25zLnNwbGljZShzdWJzY3JpcHRpb25JbmRleCwgMSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9O1xuICAgIFN1YnNjcmlwdGlvbi5FTVBUWSA9IChmdW5jdGlvbiAoZW1wdHkpIHtcbiAgICAgICAgZW1wdHkuY2xvc2VkID0gdHJ1ZTtcbiAgICAgICAgcmV0dXJuIGVtcHR5O1xuICAgIH0obmV3IFN1YnNjcmlwdGlvbigpKSk7XG4gICAgcmV0dXJuIFN1YnNjcmlwdGlvbjtcbn0oKSk7XG5leHBvcnQgeyBTdWJzY3JpcHRpb24gfTtcbmZ1bmN0aW9uIGZsYXR0ZW5VbnN1YnNjcmlwdGlvbkVycm9ycyhlcnJvcnMpIHtcbiAgICByZXR1cm4gZXJyb3JzLnJlZHVjZShmdW5jdGlvbiAoZXJycywgZXJyKSB7IHJldHVybiBlcnJzLmNvbmNhdCgoZXJyIGluc3RhbmNlb2YgVW5zdWJzY3JpcHRpb25FcnJvcikgPyBlcnIuZXJyb3JzIDogZXJyKTsgfSwgW10pO1xufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9U3Vic2NyaXB0aW9uLmpzLm1hcFxuIiwiLyoqIFBVUkVfSU1QT1JUU19TVEFSVCAgUFVSRV9JTVBPUlRTX0VORCAqL1xuZXhwb3J0IHZhciByeFN1YnNjcmliZXIgPSAvKkBfX1BVUkVfXyovIChmdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuIHR5cGVvZiBTeW1ib2wgPT09ICdmdW5jdGlvbidcbiAgICAgICAgPyAvKkBfX1BVUkVfXyovIFN5bWJvbCgncnhTdWJzY3JpYmVyJylcbiAgICAgICAgOiAnQEByeFN1YnNjcmliZXJfJyArIC8qQF9fUFVSRV9fKi8gTWF0aC5yYW5kb20oKTtcbn0pKCk7XG5leHBvcnQgdmFyICQkcnhTdWJzY3JpYmVyID0gcnhTdWJzY3JpYmVyO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9cnhTdWJzY3JpYmVyLmpzLm1hcFxuIiwiLyoqIFBVUkVfSU1QT1JUU19TVEFSVCB0c2xpYixfdXRpbF9pc0Z1bmN0aW9uLF9PYnNlcnZlcixfU3Vic2NyaXB0aW9uLF9pbnRlcm5hbF9zeW1ib2xfcnhTdWJzY3JpYmVyLF9jb25maWcsX3V0aWxfaG9zdFJlcG9ydEVycm9yIFBVUkVfSU1QT1JUU19FTkQgKi9cbmltcG9ydCAqIGFzIHRzbGliXzEgZnJvbSBcInRzbGliXCI7XG5pbXBvcnQgeyBpc0Z1bmN0aW9uIH0gZnJvbSAnLi91dGlsL2lzRnVuY3Rpb24nO1xuaW1wb3J0IHsgZW1wdHkgYXMgZW1wdHlPYnNlcnZlciB9IGZyb20gJy4vT2JzZXJ2ZXInO1xuaW1wb3J0IHsgU3Vic2NyaXB0aW9uIH0gZnJvbSAnLi9TdWJzY3JpcHRpb24nO1xuaW1wb3J0IHsgcnhTdWJzY3JpYmVyIGFzIHJ4U3Vic2NyaWJlclN5bWJvbCB9IGZyb20gJy4uL2ludGVybmFsL3N5bWJvbC9yeFN1YnNjcmliZXInO1xuaW1wb3J0IHsgY29uZmlnIH0gZnJvbSAnLi9jb25maWcnO1xuaW1wb3J0IHsgaG9zdFJlcG9ydEVycm9yIH0gZnJvbSAnLi91dGlsL2hvc3RSZXBvcnRFcnJvcic7XG52YXIgU3Vic2NyaWJlciA9IC8qQF9fUFVSRV9fKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICB0c2xpYl8xLl9fZXh0ZW5kcyhTdWJzY3JpYmVyLCBfc3VwZXIpO1xuICAgIGZ1bmN0aW9uIFN1YnNjcmliZXIoZGVzdGluYXRpb25Pck5leHQsIGVycm9yLCBjb21wbGV0ZSkge1xuICAgICAgICB2YXIgX3RoaXMgPSBfc3VwZXIuY2FsbCh0aGlzKSB8fCB0aGlzO1xuICAgICAgICBfdGhpcy5zeW5jRXJyb3JWYWx1ZSA9IG51bGw7XG4gICAgICAgIF90aGlzLnN5bmNFcnJvclRocm93biA9IGZhbHNlO1xuICAgICAgICBfdGhpcy5zeW5jRXJyb3JUaHJvd2FibGUgPSBmYWxzZTtcbiAgICAgICAgX3RoaXMuaXNTdG9wcGVkID0gZmFsc2U7XG4gICAgICAgIHN3aXRjaCAoYXJndW1lbnRzLmxlbmd0aCkge1xuICAgICAgICAgICAgY2FzZSAwOlxuICAgICAgICAgICAgICAgIF90aGlzLmRlc3RpbmF0aW9uID0gZW1wdHlPYnNlcnZlcjtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgMTpcbiAgICAgICAgICAgICAgICBpZiAoIWRlc3RpbmF0aW9uT3JOZXh0KSB7XG4gICAgICAgICAgICAgICAgICAgIF90aGlzLmRlc3RpbmF0aW9uID0gZW1wdHlPYnNlcnZlcjtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgZGVzdGluYXRpb25Pck5leHQgPT09ICdvYmplY3QnKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChkZXN0aW5hdGlvbk9yTmV4dCBpbnN0YW5jZW9mIFN1YnNjcmliZXIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzLnN5bmNFcnJvclRocm93YWJsZSA9IGRlc3RpbmF0aW9uT3JOZXh0LnN5bmNFcnJvclRocm93YWJsZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzLmRlc3RpbmF0aW9uID0gZGVzdGluYXRpb25Pck5leHQ7XG4gICAgICAgICAgICAgICAgICAgICAgICBkZXN0aW5hdGlvbk9yTmV4dC5hZGQoX3RoaXMpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMuc3luY0Vycm9yVGhyb3dhYmxlID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzLmRlc3RpbmF0aW9uID0gbmV3IFNhZmVTdWJzY3JpYmVyKF90aGlzLCBkZXN0aW5hdGlvbk9yTmV4dCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICBfdGhpcy5zeW5jRXJyb3JUaHJvd2FibGUgPSB0cnVlO1xuICAgICAgICAgICAgICAgIF90aGlzLmRlc3RpbmF0aW9uID0gbmV3IFNhZmVTdWJzY3JpYmVyKF90aGlzLCBkZXN0aW5hdGlvbk9yTmV4dCwgZXJyb3IsIGNvbXBsZXRlKTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gX3RoaXM7XG4gICAgfVxuICAgIFN1YnNjcmliZXIucHJvdG90eXBlW3J4U3Vic2NyaWJlclN5bWJvbF0gPSBmdW5jdGlvbiAoKSB7IHJldHVybiB0aGlzOyB9O1xuICAgIFN1YnNjcmliZXIuY3JlYXRlID0gZnVuY3Rpb24gKG5leHQsIGVycm9yLCBjb21wbGV0ZSkge1xuICAgICAgICB2YXIgc3Vic2NyaWJlciA9IG5ldyBTdWJzY3JpYmVyKG5leHQsIGVycm9yLCBjb21wbGV0ZSk7XG4gICAgICAgIHN1YnNjcmliZXIuc3luY0Vycm9yVGhyb3dhYmxlID0gZmFsc2U7XG4gICAgICAgIHJldHVybiBzdWJzY3JpYmVyO1xuICAgIH07XG4gICAgU3Vic2NyaWJlci5wcm90b3R5cGUubmV4dCA9IGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgICAgICBpZiAoIXRoaXMuaXNTdG9wcGVkKSB7XG4gICAgICAgICAgICB0aGlzLl9uZXh0KHZhbHVlKTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgU3Vic2NyaWJlci5wcm90b3R5cGUuZXJyb3IgPSBmdW5jdGlvbiAoZXJyKSB7XG4gICAgICAgIGlmICghdGhpcy5pc1N0b3BwZWQpIHtcbiAgICAgICAgICAgIHRoaXMuaXNTdG9wcGVkID0gdHJ1ZTtcbiAgICAgICAgICAgIHRoaXMuX2Vycm9yKGVycik7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIFN1YnNjcmliZXIucHJvdG90eXBlLmNvbXBsZXRlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICBpZiAoIXRoaXMuaXNTdG9wcGVkKSB7XG4gICAgICAgICAgICB0aGlzLmlzU3RvcHBlZCA9IHRydWU7XG4gICAgICAgICAgICB0aGlzLl9jb21wbGV0ZSgpO1xuICAgICAgICB9XG4gICAgfTtcbiAgICBTdWJzY3JpYmVyLnByb3RvdHlwZS51bnN1YnNjcmliZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgaWYgKHRoaXMuY2xvc2VkKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5pc1N0b3BwZWQgPSB0cnVlO1xuICAgICAgICBfc3VwZXIucHJvdG90eXBlLnVuc3Vic2NyaWJlLmNhbGwodGhpcyk7XG4gICAgfTtcbiAgICBTdWJzY3JpYmVyLnByb3RvdHlwZS5fbmV4dCA9IGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgICAgICB0aGlzLmRlc3RpbmF0aW9uLm5leHQodmFsdWUpO1xuICAgIH07XG4gICAgU3Vic2NyaWJlci5wcm90b3R5cGUuX2Vycm9yID0gZnVuY3Rpb24gKGVycikge1xuICAgICAgICB0aGlzLmRlc3RpbmF0aW9uLmVycm9yKGVycik7XG4gICAgICAgIHRoaXMudW5zdWJzY3JpYmUoKTtcbiAgICB9O1xuICAgIFN1YnNjcmliZXIucHJvdG90eXBlLl9jb21wbGV0ZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdGhpcy5kZXN0aW5hdGlvbi5jb21wbGV0ZSgpO1xuICAgICAgICB0aGlzLnVuc3Vic2NyaWJlKCk7XG4gICAgfTtcbiAgICBTdWJzY3JpYmVyLnByb3RvdHlwZS5fdW5zdWJzY3JpYmVBbmRSZWN5Y2xlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgX3BhcmVudE9yUGFyZW50cyA9IHRoaXMuX3BhcmVudE9yUGFyZW50cztcbiAgICAgICAgdGhpcy5fcGFyZW50T3JQYXJlbnRzID0gbnVsbDtcbiAgICAgICAgdGhpcy51bnN1YnNjcmliZSgpO1xuICAgICAgICB0aGlzLmNsb3NlZCA9IGZhbHNlO1xuICAgICAgICB0aGlzLmlzU3RvcHBlZCA9IGZhbHNlO1xuICAgICAgICB0aGlzLl9wYXJlbnRPclBhcmVudHMgPSBfcGFyZW50T3JQYXJlbnRzO1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9O1xuICAgIHJldHVybiBTdWJzY3JpYmVyO1xufShTdWJzY3JpcHRpb24pKTtcbmV4cG9ydCB7IFN1YnNjcmliZXIgfTtcbnZhciBTYWZlU3Vic2NyaWJlciA9IC8qQF9fUFVSRV9fKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICB0c2xpYl8xLl9fZXh0ZW5kcyhTYWZlU3Vic2NyaWJlciwgX3N1cGVyKTtcbiAgICBmdW5jdGlvbiBTYWZlU3Vic2NyaWJlcihfcGFyZW50U3Vic2NyaWJlciwgb2JzZXJ2ZXJPck5leHQsIGVycm9yLCBjb21wbGV0ZSkge1xuICAgICAgICB2YXIgX3RoaXMgPSBfc3VwZXIuY2FsbCh0aGlzKSB8fCB0aGlzO1xuICAgICAgICBfdGhpcy5fcGFyZW50U3Vic2NyaWJlciA9IF9wYXJlbnRTdWJzY3JpYmVyO1xuICAgICAgICB2YXIgbmV4dDtcbiAgICAgICAgdmFyIGNvbnRleHQgPSBfdGhpcztcbiAgICAgICAgaWYgKGlzRnVuY3Rpb24ob2JzZXJ2ZXJPck5leHQpKSB7XG4gICAgICAgICAgICBuZXh0ID0gb2JzZXJ2ZXJPck5leHQ7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAob2JzZXJ2ZXJPck5leHQpIHtcbiAgICAgICAgICAgIG5leHQgPSBvYnNlcnZlck9yTmV4dC5uZXh0O1xuICAgICAgICAgICAgZXJyb3IgPSBvYnNlcnZlck9yTmV4dC5lcnJvcjtcbiAgICAgICAgICAgIGNvbXBsZXRlID0gb2JzZXJ2ZXJPck5leHQuY29tcGxldGU7XG4gICAgICAgICAgICBpZiAob2JzZXJ2ZXJPck5leHQgIT09IGVtcHR5T2JzZXJ2ZXIpIHtcbiAgICAgICAgICAgICAgICBjb250ZXh0ID0gT2JqZWN0LmNyZWF0ZShvYnNlcnZlck9yTmV4dCk7XG4gICAgICAgICAgICAgICAgaWYgKGlzRnVuY3Rpb24oY29udGV4dC51bnN1YnNjcmliZSkpIHtcbiAgICAgICAgICAgICAgICAgICAgX3RoaXMuYWRkKGNvbnRleHQudW5zdWJzY3JpYmUuYmluZChjb250ZXh0KSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGNvbnRleHQudW5zdWJzY3JpYmUgPSBfdGhpcy51bnN1YnNjcmliZS5iaW5kKF90aGlzKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBfdGhpcy5fY29udGV4dCA9IGNvbnRleHQ7XG4gICAgICAgIF90aGlzLl9uZXh0ID0gbmV4dDtcbiAgICAgICAgX3RoaXMuX2Vycm9yID0gZXJyb3I7XG4gICAgICAgIF90aGlzLl9jb21wbGV0ZSA9IGNvbXBsZXRlO1xuICAgICAgICByZXR1cm4gX3RoaXM7XG4gICAgfVxuICAgIFNhZmVTdWJzY3JpYmVyLnByb3RvdHlwZS5uZXh0ID0gZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgICAgIGlmICghdGhpcy5pc1N0b3BwZWQgJiYgdGhpcy5fbmV4dCkge1xuICAgICAgICAgICAgdmFyIF9wYXJlbnRTdWJzY3JpYmVyID0gdGhpcy5fcGFyZW50U3Vic2NyaWJlcjtcbiAgICAgICAgICAgIGlmICghY29uZmlnLnVzZURlcHJlY2F0ZWRTeW5jaHJvbm91c0Vycm9ySGFuZGxpbmcgfHwgIV9wYXJlbnRTdWJzY3JpYmVyLnN5bmNFcnJvclRocm93YWJsZSkge1xuICAgICAgICAgICAgICAgIHRoaXMuX190cnlPclVuc3ViKHRoaXMuX25leHQsIHZhbHVlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKHRoaXMuX190cnlPclNldEVycm9yKF9wYXJlbnRTdWJzY3JpYmVyLCB0aGlzLl9uZXh0LCB2YWx1ZSkpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnVuc3Vic2NyaWJlKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9O1xuICAgIFNhZmVTdWJzY3JpYmVyLnByb3RvdHlwZS5lcnJvciA9IGZ1bmN0aW9uIChlcnIpIHtcbiAgICAgICAgaWYgKCF0aGlzLmlzU3RvcHBlZCkge1xuICAgICAgICAgICAgdmFyIF9wYXJlbnRTdWJzY3JpYmVyID0gdGhpcy5fcGFyZW50U3Vic2NyaWJlcjtcbiAgICAgICAgICAgIHZhciB1c2VEZXByZWNhdGVkU3luY2hyb25vdXNFcnJvckhhbmRsaW5nID0gY29uZmlnLnVzZURlcHJlY2F0ZWRTeW5jaHJvbm91c0Vycm9ySGFuZGxpbmc7XG4gICAgICAgICAgICBpZiAodGhpcy5fZXJyb3IpIHtcbiAgICAgICAgICAgICAgICBpZiAoIXVzZURlcHJlY2F0ZWRTeW5jaHJvbm91c0Vycm9ySGFuZGxpbmcgfHwgIV9wYXJlbnRTdWJzY3JpYmVyLnN5bmNFcnJvclRocm93YWJsZSkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLl9fdHJ5T3JVbnN1Yih0aGlzLl9lcnJvciwgZXJyKTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy51bnN1YnNjcmliZSgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5fX3RyeU9yU2V0RXJyb3IoX3BhcmVudFN1YnNjcmliZXIsIHRoaXMuX2Vycm9yLCBlcnIpO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnVuc3Vic2NyaWJlKCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoIV9wYXJlbnRTdWJzY3JpYmVyLnN5bmNFcnJvclRocm93YWJsZSkge1xuICAgICAgICAgICAgICAgIHRoaXMudW5zdWJzY3JpYmUoKTtcbiAgICAgICAgICAgICAgICBpZiAodXNlRGVwcmVjYXRlZFN5bmNocm9ub3VzRXJyb3JIYW5kbGluZykge1xuICAgICAgICAgICAgICAgICAgICB0aHJvdyBlcnI7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGhvc3RSZXBvcnRFcnJvcihlcnIpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgaWYgKHVzZURlcHJlY2F0ZWRTeW5jaHJvbm91c0Vycm9ySGFuZGxpbmcpIHtcbiAgICAgICAgICAgICAgICAgICAgX3BhcmVudFN1YnNjcmliZXIuc3luY0Vycm9yVmFsdWUgPSBlcnI7XG4gICAgICAgICAgICAgICAgICAgIF9wYXJlbnRTdWJzY3JpYmVyLnN5bmNFcnJvclRocm93biA9IHRydWU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBob3N0UmVwb3J0RXJyb3IoZXJyKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdGhpcy51bnN1YnNjcmliZSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfTtcbiAgICBTYWZlU3Vic2NyaWJlci5wcm90b3R5cGUuY29tcGxldGUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgIGlmICghdGhpcy5pc1N0b3BwZWQpIHtcbiAgICAgICAgICAgIHZhciBfcGFyZW50U3Vic2NyaWJlciA9IHRoaXMuX3BhcmVudFN1YnNjcmliZXI7XG4gICAgICAgICAgICBpZiAodGhpcy5fY29tcGxldGUpIHtcbiAgICAgICAgICAgICAgICB2YXIgd3JhcHBlZENvbXBsZXRlID0gZnVuY3Rpb24gKCkgeyByZXR1cm4gX3RoaXMuX2NvbXBsZXRlLmNhbGwoX3RoaXMuX2NvbnRleHQpOyB9O1xuICAgICAgICAgICAgICAgIGlmICghY29uZmlnLnVzZURlcHJlY2F0ZWRTeW5jaHJvbm91c0Vycm9ySGFuZGxpbmcgfHwgIV9wYXJlbnRTdWJzY3JpYmVyLnN5bmNFcnJvclRocm93YWJsZSkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLl9fdHJ5T3JVbnN1Yih3cmFwcGVkQ29tcGxldGUpO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnVuc3Vic2NyaWJlKCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLl9fdHJ5T3JTZXRFcnJvcihfcGFyZW50U3Vic2NyaWJlciwgd3JhcHBlZENvbXBsZXRlKTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy51bnN1YnNjcmliZSgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHRoaXMudW5zdWJzY3JpYmUoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH07XG4gICAgU2FmZVN1YnNjcmliZXIucHJvdG90eXBlLl9fdHJ5T3JVbnN1YiA9IGZ1bmN0aW9uIChmbiwgdmFsdWUpIHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGZuLmNhbGwodGhpcy5fY29udGV4dCwgdmFsdWUpO1xuICAgICAgICB9XG4gICAgICAgIGNhdGNoIChlcnIpIHtcbiAgICAgICAgICAgIHRoaXMudW5zdWJzY3JpYmUoKTtcbiAgICAgICAgICAgIGlmIChjb25maWcudXNlRGVwcmVjYXRlZFN5bmNocm9ub3VzRXJyb3JIYW5kbGluZykge1xuICAgICAgICAgICAgICAgIHRocm93IGVycjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGhvc3RSZXBvcnRFcnJvcihlcnIpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfTtcbiAgICBTYWZlU3Vic2NyaWJlci5wcm90b3R5cGUuX190cnlPclNldEVycm9yID0gZnVuY3Rpb24gKHBhcmVudCwgZm4sIHZhbHVlKSB7XG4gICAgICAgIGlmICghY29uZmlnLnVzZURlcHJlY2F0ZWRTeW5jaHJvbm91c0Vycm9ySGFuZGxpbmcpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignYmFkIGNhbGwnKTtcbiAgICAgICAgfVxuICAgICAgICB0cnkge1xuICAgICAgICAgICAgZm4uY2FsbCh0aGlzLl9jb250ZXh0LCB2YWx1ZSk7XG4gICAgICAgIH1cbiAgICAgICAgY2F0Y2ggKGVycikge1xuICAgICAgICAgICAgaWYgKGNvbmZpZy51c2VEZXByZWNhdGVkU3luY2hyb25vdXNFcnJvckhhbmRsaW5nKSB7XG4gICAgICAgICAgICAgICAgcGFyZW50LnN5bmNFcnJvclZhbHVlID0gZXJyO1xuICAgICAgICAgICAgICAgIHBhcmVudC5zeW5jRXJyb3JUaHJvd24gPSB0cnVlO1xuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgaG9zdFJlcG9ydEVycm9yKGVycik7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH07XG4gICAgU2FmZVN1YnNjcmliZXIucHJvdG90eXBlLl91bnN1YnNjcmliZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIF9wYXJlbnRTdWJzY3JpYmVyID0gdGhpcy5fcGFyZW50U3Vic2NyaWJlcjtcbiAgICAgICAgdGhpcy5fY29udGV4dCA9IG51bGw7XG4gICAgICAgIHRoaXMuX3BhcmVudFN1YnNjcmliZXIgPSBudWxsO1xuICAgICAgICBfcGFyZW50U3Vic2NyaWJlci51bnN1YnNjcmliZSgpO1xuICAgIH07XG4gICAgcmV0dXJuIFNhZmVTdWJzY3JpYmVyO1xufShTdWJzY3JpYmVyKSk7XG5leHBvcnQgeyBTYWZlU3Vic2NyaWJlciB9O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9U3Vic2NyaWJlci5qcy5tYXBcbiIsIi8qKiBQVVJFX0lNUE9SVFNfU1RBUlQgIFBVUkVfSU1QT1JUU19FTkQgKi9cbmV4cG9ydCB2YXIgb2JzZXJ2YWJsZSA9IC8qQF9fUFVSRV9fKi8gKGZ1bmN0aW9uICgpIHsgcmV0dXJuIHR5cGVvZiBTeW1ib2wgPT09ICdmdW5jdGlvbicgJiYgU3ltYm9sLm9ic2VydmFibGUgfHwgJ0BAb2JzZXJ2YWJsZSc7IH0pKCk7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1vYnNlcnZhYmxlLmpzLm1hcFxuIiwiLyoqIFBVUkVfSU1QT1JUU19TVEFSVCAgUFVSRV9JTVBPUlRTX0VORCAqL1xuZXhwb3J0IGZ1bmN0aW9uIGlkZW50aXR5KHgpIHtcbiAgICByZXR1cm4geDtcbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWlkZW50aXR5LmpzLm1hcFxuIiwiLyoqIFBVUkVfSU1QT1JUU19TVEFSVCBfaWRlbnRpdHkgUFVSRV9JTVBPUlRTX0VORCAqL1xuaW1wb3J0IHsgaWRlbnRpdHkgfSBmcm9tICcuL2lkZW50aXR5JztcbmV4cG9ydCBmdW5jdGlvbiBwaXBlKCkge1xuICAgIHZhciBmbnMgPSBbXTtcbiAgICBmb3IgKHZhciBfaSA9IDA7IF9pIDwgYXJndW1lbnRzLmxlbmd0aDsgX2krKykge1xuICAgICAgICBmbnNbX2ldID0gYXJndW1lbnRzW19pXTtcbiAgICB9XG4gICAgcmV0dXJuIHBpcGVGcm9tQXJyYXkoZm5zKTtcbn1cbmV4cG9ydCBmdW5jdGlvbiBwaXBlRnJvbUFycmF5KGZucykge1xuICAgIGlmIChmbnMubGVuZ3RoID09PSAwKSB7XG4gICAgICAgIHJldHVybiBpZGVudGl0eTtcbiAgICB9XG4gICAgaWYgKGZucy5sZW5ndGggPT09IDEpIHtcbiAgICAgICAgcmV0dXJuIGZuc1swXTtcbiAgICB9XG4gICAgcmV0dXJuIGZ1bmN0aW9uIHBpcGVkKGlucHV0KSB7XG4gICAgICAgIHJldHVybiBmbnMucmVkdWNlKGZ1bmN0aW9uIChwcmV2LCBmbikgeyByZXR1cm4gZm4ocHJldik7IH0sIGlucHV0KTtcbiAgICB9O1xufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9cGlwZS5qcy5tYXBcbiIsIi8qKiBQVVJFX0lNUE9SVFNfU1RBUlQgX3V0aWxfY2FuUmVwb3J0RXJyb3IsX3V0aWxfdG9TdWJzY3JpYmVyLF9zeW1ib2xfb2JzZXJ2YWJsZSxfdXRpbF9waXBlLF9jb25maWcgUFVSRV9JTVBPUlRTX0VORCAqL1xuaW1wb3J0IHsgY2FuUmVwb3J0RXJyb3IgfSBmcm9tICcuL3V0aWwvY2FuUmVwb3J0RXJyb3InO1xuaW1wb3J0IHsgdG9TdWJzY3JpYmVyIH0gZnJvbSAnLi91dGlsL3RvU3Vic2NyaWJlcic7XG5pbXBvcnQgeyBvYnNlcnZhYmxlIGFzIFN5bWJvbF9vYnNlcnZhYmxlIH0gZnJvbSAnLi9zeW1ib2wvb2JzZXJ2YWJsZSc7XG5pbXBvcnQgeyBwaXBlRnJvbUFycmF5IH0gZnJvbSAnLi91dGlsL3BpcGUnO1xuaW1wb3J0IHsgY29uZmlnIH0gZnJvbSAnLi9jb25maWcnO1xudmFyIE9ic2VydmFibGUgPSAvKkBfX1BVUkVfXyovIChmdW5jdGlvbiAoKSB7XG4gICAgZnVuY3Rpb24gT2JzZXJ2YWJsZShzdWJzY3JpYmUpIHtcbiAgICAgICAgdGhpcy5faXNTY2FsYXIgPSBmYWxzZTtcbiAgICAgICAgaWYgKHN1YnNjcmliZSkge1xuICAgICAgICAgICAgdGhpcy5fc3Vic2NyaWJlID0gc3Vic2NyaWJlO1xuICAgICAgICB9XG4gICAgfVxuICAgIE9ic2VydmFibGUucHJvdG90eXBlLmxpZnQgPSBmdW5jdGlvbiAob3BlcmF0b3IpIHtcbiAgICAgICAgdmFyIG9ic2VydmFibGUgPSBuZXcgT2JzZXJ2YWJsZSgpO1xuICAgICAgICBvYnNlcnZhYmxlLnNvdXJjZSA9IHRoaXM7XG4gICAgICAgIG9ic2VydmFibGUub3BlcmF0b3IgPSBvcGVyYXRvcjtcbiAgICAgICAgcmV0dXJuIG9ic2VydmFibGU7XG4gICAgfTtcbiAgICBPYnNlcnZhYmxlLnByb3RvdHlwZS5zdWJzY3JpYmUgPSBmdW5jdGlvbiAob2JzZXJ2ZXJPck5leHQsIGVycm9yLCBjb21wbGV0ZSkge1xuICAgICAgICB2YXIgb3BlcmF0b3IgPSB0aGlzLm9wZXJhdG9yO1xuICAgICAgICB2YXIgc2luayA9IHRvU3Vic2NyaWJlcihvYnNlcnZlck9yTmV4dCwgZXJyb3IsIGNvbXBsZXRlKTtcbiAgICAgICAgaWYgKG9wZXJhdG9yKSB7XG4gICAgICAgICAgICBzaW5rLmFkZChvcGVyYXRvci5jYWxsKHNpbmssIHRoaXMuc291cmNlKSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBzaW5rLmFkZCh0aGlzLnNvdXJjZSB8fCAoY29uZmlnLnVzZURlcHJlY2F0ZWRTeW5jaHJvbm91c0Vycm9ySGFuZGxpbmcgJiYgIXNpbmsuc3luY0Vycm9yVGhyb3dhYmxlKSA/XG4gICAgICAgICAgICAgICAgdGhpcy5fc3Vic2NyaWJlKHNpbmspIDpcbiAgICAgICAgICAgICAgICB0aGlzLl90cnlTdWJzY3JpYmUoc2luaykpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChjb25maWcudXNlRGVwcmVjYXRlZFN5bmNocm9ub3VzRXJyb3JIYW5kbGluZykge1xuICAgICAgICAgICAgaWYgKHNpbmsuc3luY0Vycm9yVGhyb3dhYmxlKSB7XG4gICAgICAgICAgICAgICAgc2luay5zeW5jRXJyb3JUaHJvd2FibGUgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICBpZiAoc2luay5zeW5jRXJyb3JUaHJvd24pIHtcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgc2luay5zeW5jRXJyb3JWYWx1ZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHNpbms7XG4gICAgfTtcbiAgICBPYnNlcnZhYmxlLnByb3RvdHlwZS5fdHJ5U3Vic2NyaWJlID0gZnVuY3Rpb24gKHNpbmspIHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLl9zdWJzY3JpYmUoc2luayk7XG4gICAgICAgIH1cbiAgICAgICAgY2F0Y2ggKGVycikge1xuICAgICAgICAgICAgaWYgKGNvbmZpZy51c2VEZXByZWNhdGVkU3luY2hyb25vdXNFcnJvckhhbmRsaW5nKSB7XG4gICAgICAgICAgICAgICAgc2luay5zeW5jRXJyb3JUaHJvd24gPSB0cnVlO1xuICAgICAgICAgICAgICAgIHNpbmsuc3luY0Vycm9yVmFsdWUgPSBlcnI7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoY2FuUmVwb3J0RXJyb3Ioc2luaykpIHtcbiAgICAgICAgICAgICAgICBzaW5rLmVycm9yKGVycik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLndhcm4oZXJyKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH07XG4gICAgT2JzZXJ2YWJsZS5wcm90b3R5cGUuZm9yRWFjaCA9IGZ1bmN0aW9uIChuZXh0LCBwcm9taXNlQ3Rvcikge1xuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICBwcm9taXNlQ3RvciA9IGdldFByb21pc2VDdG9yKHByb21pc2VDdG9yKTtcbiAgICAgICAgcmV0dXJuIG5ldyBwcm9taXNlQ3RvcihmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7XG4gICAgICAgICAgICB2YXIgc3Vic2NyaXB0aW9uO1xuICAgICAgICAgICAgc3Vic2NyaXB0aW9uID0gX3RoaXMuc3Vic2NyaWJlKGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgIG5leHQodmFsdWUpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjYXRjaCAoZXJyKSB7XG4gICAgICAgICAgICAgICAgICAgIHJlamVjdChlcnIpO1xuICAgICAgICAgICAgICAgICAgICBpZiAoc3Vic2NyaXB0aW9uKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBzdWJzY3JpcHRpb24udW5zdWJzY3JpYmUoKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0sIHJlamVjdCwgcmVzb2x2ZSk7XG4gICAgICAgIH0pO1xuICAgIH07XG4gICAgT2JzZXJ2YWJsZS5wcm90b3R5cGUuX3N1YnNjcmliZSA9IGZ1bmN0aW9uIChzdWJzY3JpYmVyKSB7XG4gICAgICAgIHZhciBzb3VyY2UgPSB0aGlzLnNvdXJjZTtcbiAgICAgICAgcmV0dXJuIHNvdXJjZSAmJiBzb3VyY2Uuc3Vic2NyaWJlKHN1YnNjcmliZXIpO1xuICAgIH07XG4gICAgT2JzZXJ2YWJsZS5wcm90b3R5cGVbU3ltYm9sX29ic2VydmFibGVdID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9O1xuICAgIE9ic2VydmFibGUucHJvdG90eXBlLnBpcGUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBvcGVyYXRpb25zID0gW107XG4gICAgICAgIGZvciAodmFyIF9pID0gMDsgX2kgPCBhcmd1bWVudHMubGVuZ3RoOyBfaSsrKSB7XG4gICAgICAgICAgICBvcGVyYXRpb25zW19pXSA9IGFyZ3VtZW50c1tfaV07XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG9wZXJhdGlvbnMubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcztcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gcGlwZUZyb21BcnJheShvcGVyYXRpb25zKSh0aGlzKTtcbiAgICB9O1xuICAgIE9ic2VydmFibGUucHJvdG90eXBlLnRvUHJvbWlzZSA9IGZ1bmN0aW9uIChwcm9taXNlQ3Rvcikge1xuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICBwcm9taXNlQ3RvciA9IGdldFByb21pc2VDdG9yKHByb21pc2VDdG9yKTtcbiAgICAgICAgcmV0dXJuIG5ldyBwcm9taXNlQ3RvcihmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7XG4gICAgICAgICAgICB2YXIgdmFsdWU7XG4gICAgICAgICAgICBfdGhpcy5zdWJzY3JpYmUoZnVuY3Rpb24gKHgpIHsgcmV0dXJuIHZhbHVlID0geDsgfSwgZnVuY3Rpb24gKGVycikgeyByZXR1cm4gcmVqZWN0KGVycik7IH0sIGZ1bmN0aW9uICgpIHsgcmV0dXJuIHJlc29sdmUodmFsdWUpOyB9KTtcbiAgICAgICAgfSk7XG4gICAgfTtcbiAgICBPYnNlcnZhYmxlLmNyZWF0ZSA9IGZ1bmN0aW9uIChzdWJzY3JpYmUpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBPYnNlcnZhYmxlKHN1YnNjcmliZSk7XG4gICAgfTtcbiAgICByZXR1cm4gT2JzZXJ2YWJsZTtcbn0oKSk7XG5leHBvcnQgeyBPYnNlcnZhYmxlIH07XG5mdW5jdGlvbiBnZXRQcm9taXNlQ3Rvcihwcm9taXNlQ3Rvcikge1xuICAgIGlmICghcHJvbWlzZUN0b3IpIHtcbiAgICAgICAgcHJvbWlzZUN0b3IgPSBjb25maWcuUHJvbWlzZSB8fCBQcm9taXNlO1xuICAgIH1cbiAgICBpZiAoIXByb21pc2VDdG9yKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcignbm8gUHJvbWlzZSBpbXBsIGZvdW5kJyk7XG4gICAgfVxuICAgIHJldHVybiBwcm9taXNlQ3Rvcjtcbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPU9ic2VydmFibGUuanMubWFwXG4iLCIvKiogUFVSRV9JTVBPUlRTX1NUQVJUIF9TdWJzY3JpYmVyLF9zeW1ib2xfcnhTdWJzY3JpYmVyLF9PYnNlcnZlciBQVVJFX0lNUE9SVFNfRU5EICovXG5pbXBvcnQgeyBTdWJzY3JpYmVyIH0gZnJvbSAnLi4vU3Vic2NyaWJlcic7XG5pbXBvcnQgeyByeFN1YnNjcmliZXIgYXMgcnhTdWJzY3JpYmVyU3ltYm9sIH0gZnJvbSAnLi4vc3ltYm9sL3J4U3Vic2NyaWJlcic7XG5pbXBvcnQgeyBlbXB0eSBhcyBlbXB0eU9ic2VydmVyIH0gZnJvbSAnLi4vT2JzZXJ2ZXInO1xuZXhwb3J0IGZ1bmN0aW9uIHRvU3Vic2NyaWJlcihuZXh0T3JPYnNlcnZlciwgZXJyb3IsIGNvbXBsZXRlKSB7XG4gICAgaWYgKG5leHRPck9ic2VydmVyKSB7XG4gICAgICAgIGlmIChuZXh0T3JPYnNlcnZlciBpbnN0YW5jZW9mIFN1YnNjcmliZXIpIHtcbiAgICAgICAgICAgIHJldHVybiBuZXh0T3JPYnNlcnZlcjtcbiAgICAgICAgfVxuICAgICAgICBpZiAobmV4dE9yT2JzZXJ2ZXJbcnhTdWJzY3JpYmVyU3ltYm9sXSkge1xuICAgICAgICAgICAgcmV0dXJuIG5leHRPck9ic2VydmVyW3J4U3Vic2NyaWJlclN5bWJvbF0oKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBpZiAoIW5leHRPck9ic2VydmVyICYmICFlcnJvciAmJiAhY29tcGxldGUpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBTdWJzY3JpYmVyKGVtcHR5T2JzZXJ2ZXIpO1xuICAgIH1cbiAgICByZXR1cm4gbmV3IFN1YnNjcmliZXIobmV4dE9yT2JzZXJ2ZXIsIGVycm9yLCBjb21wbGV0ZSk7XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD10b1N1YnNjcmliZXIuanMubWFwXG4iLCIvKiogUFVSRV9JTVBPUlRTX1NUQVJUIF9TdWJzY3JpYmVyIFBVUkVfSU1QT1JUU19FTkQgKi9cbmltcG9ydCB7IFN1YnNjcmliZXIgfSBmcm9tICcuLi9TdWJzY3JpYmVyJztcbmV4cG9ydCBmdW5jdGlvbiBjYW5SZXBvcnRFcnJvcihvYnNlcnZlcikge1xuICAgIHdoaWxlIChvYnNlcnZlcikge1xuICAgICAgICB2YXIgX2EgPSBvYnNlcnZlciwgY2xvc2VkXzEgPSBfYS5jbG9zZWQsIGRlc3RpbmF0aW9uID0gX2EuZGVzdGluYXRpb24sIGlzU3RvcHBlZCA9IF9hLmlzU3RvcHBlZDtcbiAgICAgICAgaWYgKGNsb3NlZF8xIHx8IGlzU3RvcHBlZCkge1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKGRlc3RpbmF0aW9uICYmIGRlc3RpbmF0aW9uIGluc3RhbmNlb2YgU3Vic2NyaWJlcikge1xuICAgICAgICAgICAgb2JzZXJ2ZXIgPSBkZXN0aW5hdGlvbjtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIG9ic2VydmVyID0gbnVsbDtcbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gdHJ1ZTtcbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWNhblJlcG9ydEVycm9yLmpzLm1hcFxuIiwiLyoqIFBVUkVfSU1QT1JUU19TVEFSVCB0c2xpYixfU3Vic2NyaWJlciBQVVJFX0lNUE9SVFNfRU5EICovXG5pbXBvcnQgKiBhcyB0c2xpYl8xIGZyb20gXCJ0c2xpYlwiO1xuaW1wb3J0IHsgU3Vic2NyaWJlciB9IGZyb20gJy4uL1N1YnNjcmliZXInO1xuZXhwb3J0IGZ1bmN0aW9uIG1hcChwcm9qZWN0LCB0aGlzQXJnKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIG1hcE9wZXJhdGlvbihzb3VyY2UpIHtcbiAgICAgICAgaWYgKHR5cGVvZiBwcm9qZWN0ICE9PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdhcmd1bWVudCBpcyBub3QgYSBmdW5jdGlvbi4gQXJlIHlvdSBsb29raW5nIGZvciBgbWFwVG8oKWA/Jyk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHNvdXJjZS5saWZ0KG5ldyBNYXBPcGVyYXRvcihwcm9qZWN0LCB0aGlzQXJnKSk7XG4gICAgfTtcbn1cbnZhciBNYXBPcGVyYXRvciA9IC8qQF9fUFVSRV9fKi8gKGZ1bmN0aW9uICgpIHtcbiAgICBmdW5jdGlvbiBNYXBPcGVyYXRvcihwcm9qZWN0LCB0aGlzQXJnKSB7XG4gICAgICAgIHRoaXMucHJvamVjdCA9IHByb2plY3Q7XG4gICAgICAgIHRoaXMudGhpc0FyZyA9IHRoaXNBcmc7XG4gICAgfVxuICAgIE1hcE9wZXJhdG9yLnByb3RvdHlwZS5jYWxsID0gZnVuY3Rpb24gKHN1YnNjcmliZXIsIHNvdXJjZSkge1xuICAgICAgICByZXR1cm4gc291cmNlLnN1YnNjcmliZShuZXcgTWFwU3Vic2NyaWJlcihzdWJzY3JpYmVyLCB0aGlzLnByb2plY3QsIHRoaXMudGhpc0FyZykpO1xuICAgIH07XG4gICAgcmV0dXJuIE1hcE9wZXJhdG9yO1xufSgpKTtcbmV4cG9ydCB7IE1hcE9wZXJhdG9yIH07XG52YXIgTWFwU3Vic2NyaWJlciA9IC8qQF9fUFVSRV9fKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICB0c2xpYl8xLl9fZXh0ZW5kcyhNYXBTdWJzY3JpYmVyLCBfc3VwZXIpO1xuICAgIGZ1bmN0aW9uIE1hcFN1YnNjcmliZXIoZGVzdGluYXRpb24sIHByb2plY3QsIHRoaXNBcmcpIHtcbiAgICAgICAgdmFyIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcywgZGVzdGluYXRpb24pIHx8IHRoaXM7XG4gICAgICAgIF90aGlzLnByb2plY3QgPSBwcm9qZWN0O1xuICAgICAgICBfdGhpcy5jb3VudCA9IDA7XG4gICAgICAgIF90aGlzLnRoaXNBcmcgPSB0aGlzQXJnIHx8IF90aGlzO1xuICAgICAgICByZXR1cm4gX3RoaXM7XG4gICAgfVxuICAgIE1hcFN1YnNjcmliZXIucHJvdG90eXBlLl9uZXh0ID0gZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgICAgIHZhciByZXN1bHQ7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICByZXN1bHQgPSB0aGlzLnByb2plY3QuY2FsbCh0aGlzLnRoaXNBcmcsIHZhbHVlLCB0aGlzLmNvdW50KyspO1xuICAgICAgICB9XG4gICAgICAgIGNhdGNoIChlcnIpIHtcbiAgICAgICAgICAgIHRoaXMuZGVzdGluYXRpb24uZXJyb3IoZXJyKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmRlc3RpbmF0aW9uLm5leHQocmVzdWx0KTtcbiAgICB9O1xuICAgIHJldHVybiBNYXBTdWJzY3JpYmVyO1xufShTdWJzY3JpYmVyKSk7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1tYXAuanMubWFwXG4iLCIvKiogUFVSRV9JTVBPUlRTX1NUQVJUIF9PYnNlcnZhYmxlLF91dGlsX2lzQXJyYXksX3V0aWxfaXNGdW5jdGlvbixfb3BlcmF0b3JzX21hcCBQVVJFX0lNUE9SVFNfRU5EICovXG5pbXBvcnQgeyBPYnNlcnZhYmxlIH0gZnJvbSAnLi4vT2JzZXJ2YWJsZSc7XG5pbXBvcnQgeyBpc0FycmF5IH0gZnJvbSAnLi4vdXRpbC9pc0FycmF5JztcbmltcG9ydCB7IGlzRnVuY3Rpb24gfSBmcm9tICcuLi91dGlsL2lzRnVuY3Rpb24nO1xuaW1wb3J0IHsgbWFwIH0gZnJvbSAnLi4vb3BlcmF0b3JzL21hcCc7XG52YXIgdG9TdHJpbmcgPSAvKkBfX1BVUkVfXyovIChmdW5jdGlvbiAoKSB7IHJldHVybiBPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nOyB9KSgpO1xuZXhwb3J0IGZ1bmN0aW9uIGZyb21FdmVudCh0YXJnZXQsIGV2ZW50TmFtZSwgb3B0aW9ucywgcmVzdWx0U2VsZWN0b3IpIHtcbiAgICBpZiAoaXNGdW5jdGlvbihvcHRpb25zKSkge1xuICAgICAgICByZXN1bHRTZWxlY3RvciA9IG9wdGlvbnM7XG4gICAgICAgIG9wdGlvbnMgPSB1bmRlZmluZWQ7XG4gICAgfVxuICAgIGlmIChyZXN1bHRTZWxlY3Rvcikge1xuICAgICAgICByZXR1cm4gZnJvbUV2ZW50KHRhcmdldCwgZXZlbnROYW1lLCBvcHRpb25zKS5waXBlKG1hcChmdW5jdGlvbiAoYXJncykgeyByZXR1cm4gaXNBcnJheShhcmdzKSA/IHJlc3VsdFNlbGVjdG9yLmFwcGx5KHZvaWQgMCwgYXJncykgOiByZXN1bHRTZWxlY3RvcihhcmdzKTsgfSkpO1xuICAgIH1cbiAgICByZXR1cm4gbmV3IE9ic2VydmFibGUoZnVuY3Rpb24gKHN1YnNjcmliZXIpIHtcbiAgICAgICAgZnVuY3Rpb24gaGFuZGxlcihlKSB7XG4gICAgICAgICAgICBpZiAoYXJndW1lbnRzLmxlbmd0aCA+IDEpIHtcbiAgICAgICAgICAgICAgICBzdWJzY3JpYmVyLm5leHQoQXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoYXJndW1lbnRzKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBzdWJzY3JpYmVyLm5leHQoZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgc2V0dXBTdWJzY3JpcHRpb24odGFyZ2V0LCBldmVudE5hbWUsIGhhbmRsZXIsIHN1YnNjcmliZXIsIG9wdGlvbnMpO1xuICAgIH0pO1xufVxuZnVuY3Rpb24gc2V0dXBTdWJzY3JpcHRpb24oc291cmNlT2JqLCBldmVudE5hbWUsIGhhbmRsZXIsIHN1YnNjcmliZXIsIG9wdGlvbnMpIHtcbiAgICB2YXIgdW5zdWJzY3JpYmU7XG4gICAgaWYgKGlzRXZlbnRUYXJnZXQoc291cmNlT2JqKSkge1xuICAgICAgICB2YXIgc291cmNlXzEgPSBzb3VyY2VPYmo7XG4gICAgICAgIHNvdXJjZU9iai5hZGRFdmVudExpc3RlbmVyKGV2ZW50TmFtZSwgaGFuZGxlciwgb3B0aW9ucyk7XG4gICAgICAgIHVuc3Vic2NyaWJlID0gZnVuY3Rpb24gKCkgeyByZXR1cm4gc291cmNlXzEucmVtb3ZlRXZlbnRMaXN0ZW5lcihldmVudE5hbWUsIGhhbmRsZXIsIG9wdGlvbnMpOyB9O1xuICAgIH1cbiAgICBlbHNlIGlmIChpc0pRdWVyeVN0eWxlRXZlbnRFbWl0dGVyKHNvdXJjZU9iaikpIHtcbiAgICAgICAgdmFyIHNvdXJjZV8yID0gc291cmNlT2JqO1xuICAgICAgICBzb3VyY2VPYmoub24oZXZlbnROYW1lLCBoYW5kbGVyKTtcbiAgICAgICAgdW5zdWJzY3JpYmUgPSBmdW5jdGlvbiAoKSB7IHJldHVybiBzb3VyY2VfMi5vZmYoZXZlbnROYW1lLCBoYW5kbGVyKTsgfTtcbiAgICB9XG4gICAgZWxzZSBpZiAoaXNOb2RlU3R5bGVFdmVudEVtaXR0ZXIoc291cmNlT2JqKSkge1xuICAgICAgICB2YXIgc291cmNlXzMgPSBzb3VyY2VPYmo7XG4gICAgICAgIHNvdXJjZU9iai5hZGRMaXN0ZW5lcihldmVudE5hbWUsIGhhbmRsZXIpO1xuICAgICAgICB1bnN1YnNjcmliZSA9IGZ1bmN0aW9uICgpIHsgcmV0dXJuIHNvdXJjZV8zLnJlbW92ZUxpc3RlbmVyKGV2ZW50TmFtZSwgaGFuZGxlcik7IH07XG4gICAgfVxuICAgIGVsc2UgaWYgKHNvdXJjZU9iaiAmJiBzb3VyY2VPYmoubGVuZ3RoKSB7XG4gICAgICAgIGZvciAodmFyIGkgPSAwLCBsZW4gPSBzb3VyY2VPYmoubGVuZ3RoOyBpIDwgbGVuOyBpKyspIHtcbiAgICAgICAgICAgIHNldHVwU3Vic2NyaXB0aW9uKHNvdXJjZU9ialtpXSwgZXZlbnROYW1lLCBoYW5kbGVyLCBzdWJzY3JpYmVyLCBvcHRpb25zKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcignSW52YWxpZCBldmVudCB0YXJnZXQnKTtcbiAgICB9XG4gICAgc3Vic2NyaWJlci5hZGQodW5zdWJzY3JpYmUpO1xufVxuZnVuY3Rpb24gaXNOb2RlU3R5bGVFdmVudEVtaXR0ZXIoc291cmNlT2JqKSB7XG4gICAgcmV0dXJuIHNvdXJjZU9iaiAmJiB0eXBlb2Ygc291cmNlT2JqLmFkZExpc3RlbmVyID09PSAnZnVuY3Rpb24nICYmIHR5cGVvZiBzb3VyY2VPYmoucmVtb3ZlTGlzdGVuZXIgPT09ICdmdW5jdGlvbic7XG59XG5mdW5jdGlvbiBpc0pRdWVyeVN0eWxlRXZlbnRFbWl0dGVyKHNvdXJjZU9iaikge1xuICAgIHJldHVybiBzb3VyY2VPYmogJiYgdHlwZW9mIHNvdXJjZU9iai5vbiA9PT0gJ2Z1bmN0aW9uJyAmJiB0eXBlb2Ygc291cmNlT2JqLm9mZiA9PT0gJ2Z1bmN0aW9uJztcbn1cbmZ1bmN0aW9uIGlzRXZlbnRUYXJnZXQoc291cmNlT2JqKSB7XG4gICAgcmV0dXJuIHNvdXJjZU9iaiAmJiB0eXBlb2Ygc291cmNlT2JqLmFkZEV2ZW50TGlzdGVuZXIgPT09ICdmdW5jdGlvbicgJiYgdHlwZW9mIHNvdXJjZU9iai5yZW1vdmVFdmVudExpc3RlbmVyID09PSAnZnVuY3Rpb24nO1xufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9ZnJvbUV2ZW50LmpzLm1hcFxuIiwiLyoqIFBVUkVfSU1QT1JUU19TVEFSVCAgUFVSRV9JTVBPUlRTX0VORCAqL1xuZXhwb3J0IGZ1bmN0aW9uIGlzU2NoZWR1bGVyKHZhbHVlKSB7XG4gICAgcmV0dXJuIHZhbHVlICYmIHR5cGVvZiB2YWx1ZS5zY2hlZHVsZSA9PT0gJ2Z1bmN0aW9uJztcbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWlzU2NoZWR1bGVyLmpzLm1hcFxuIiwiLyoqIFBVUkVfSU1QT1JUU19TVEFSVCAgUFVSRV9JTVBPUlRTX0VORCAqL1xuZXhwb3J0IHZhciBzdWJzY3JpYmVUb0FycmF5ID0gZnVuY3Rpb24gKGFycmF5KSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChzdWJzY3JpYmVyKSB7XG4gICAgICAgIGZvciAodmFyIGkgPSAwLCBsZW4gPSBhcnJheS5sZW5ndGg7IGkgPCBsZW4gJiYgIXN1YnNjcmliZXIuY2xvc2VkOyBpKyspIHtcbiAgICAgICAgICAgIHN1YnNjcmliZXIubmV4dChhcnJheVtpXSk7XG4gICAgICAgIH1cbiAgICAgICAgc3Vic2NyaWJlci5jb21wbGV0ZSgpO1xuICAgIH07XG59O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9c3Vic2NyaWJlVG9BcnJheS5qcy5tYXBcbiIsIi8qKiBQVVJFX0lNUE9SVFNfU1RBUlQgIFBVUkVfSU1QT1JUU19FTkQgKi9cbmV4cG9ydCBmdW5jdGlvbiBnZXRTeW1ib2xJdGVyYXRvcigpIHtcbiAgICBpZiAodHlwZW9mIFN5bWJvbCAhPT0gJ2Z1bmN0aW9uJyB8fCAhU3ltYm9sLml0ZXJhdG9yKSB7XG4gICAgICAgIHJldHVybiAnQEBpdGVyYXRvcic7XG4gICAgfVxuICAgIHJldHVybiBTeW1ib2wuaXRlcmF0b3I7XG59XG5leHBvcnQgdmFyIGl0ZXJhdG9yID0gLypAX19QVVJFX18qLyBnZXRTeW1ib2xJdGVyYXRvcigpO1xuZXhwb3J0IHZhciAkJGl0ZXJhdG9yID0gaXRlcmF0b3I7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1pdGVyYXRvci5qcy5tYXBcbiIsIi8qKiBQVVJFX0lNUE9SVFNfU1RBUlQgIFBVUkVfSU1QT1JUU19FTkQgKi9cbmV4cG9ydCB2YXIgaXNBcnJheUxpa2UgPSAoZnVuY3Rpb24gKHgpIHsgcmV0dXJuIHggJiYgdHlwZW9mIHgubGVuZ3RoID09PSAnbnVtYmVyJyAmJiB0eXBlb2YgeCAhPT0gJ2Z1bmN0aW9uJzsgfSk7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1pc0FycmF5TGlrZS5qcy5tYXBcbiIsIi8qKiBQVVJFX0lNUE9SVFNfU1RBUlQgIFBVUkVfSU1QT1JUU19FTkQgKi9cbmV4cG9ydCBmdW5jdGlvbiBpc1Byb21pc2UodmFsdWUpIHtcbiAgICByZXR1cm4gISF2YWx1ZSAmJiB0eXBlb2YgdmFsdWUuc3Vic2NyaWJlICE9PSAnZnVuY3Rpb24nICYmIHR5cGVvZiB2YWx1ZS50aGVuID09PSAnZnVuY3Rpb24nO1xufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9aXNQcm9taXNlLmpzLm1hcFxuIiwiLyoqIFBVUkVfSU1QT1JUU19TVEFSVCBfc3Vic2NyaWJlVG9BcnJheSxfc3Vic2NyaWJlVG9Qcm9taXNlLF9zdWJzY3JpYmVUb0l0ZXJhYmxlLF9zdWJzY3JpYmVUb09ic2VydmFibGUsX2lzQXJyYXlMaWtlLF9pc1Byb21pc2UsX2lzT2JqZWN0LF9zeW1ib2xfaXRlcmF0b3IsX3N5bWJvbF9vYnNlcnZhYmxlIFBVUkVfSU1QT1JUU19FTkQgKi9cbmltcG9ydCB7IHN1YnNjcmliZVRvQXJyYXkgfSBmcm9tICcuL3N1YnNjcmliZVRvQXJyYXknO1xuaW1wb3J0IHsgc3Vic2NyaWJlVG9Qcm9taXNlIH0gZnJvbSAnLi9zdWJzY3JpYmVUb1Byb21pc2UnO1xuaW1wb3J0IHsgc3Vic2NyaWJlVG9JdGVyYWJsZSB9IGZyb20gJy4vc3Vic2NyaWJlVG9JdGVyYWJsZSc7XG5pbXBvcnQgeyBzdWJzY3JpYmVUb09ic2VydmFibGUgfSBmcm9tICcuL3N1YnNjcmliZVRvT2JzZXJ2YWJsZSc7XG5pbXBvcnQgeyBpc0FycmF5TGlrZSB9IGZyb20gJy4vaXNBcnJheUxpa2UnO1xuaW1wb3J0IHsgaXNQcm9taXNlIH0gZnJvbSAnLi9pc1Byb21pc2UnO1xuaW1wb3J0IHsgaXNPYmplY3QgfSBmcm9tICcuL2lzT2JqZWN0JztcbmltcG9ydCB7IGl0ZXJhdG9yIGFzIFN5bWJvbF9pdGVyYXRvciB9IGZyb20gJy4uL3N5bWJvbC9pdGVyYXRvcic7XG5pbXBvcnQgeyBvYnNlcnZhYmxlIGFzIFN5bWJvbF9vYnNlcnZhYmxlIH0gZnJvbSAnLi4vc3ltYm9sL29ic2VydmFibGUnO1xuZXhwb3J0IHZhciBzdWJzY3JpYmVUbyA9IGZ1bmN0aW9uIChyZXN1bHQpIHtcbiAgICBpZiAoISFyZXN1bHQgJiYgdHlwZW9mIHJlc3VsdFtTeW1ib2xfb2JzZXJ2YWJsZV0gPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgcmV0dXJuIHN1YnNjcmliZVRvT2JzZXJ2YWJsZShyZXN1bHQpO1xuICAgIH1cbiAgICBlbHNlIGlmIChpc0FycmF5TGlrZShyZXN1bHQpKSB7XG4gICAgICAgIHJldHVybiBzdWJzY3JpYmVUb0FycmF5KHJlc3VsdCk7XG4gICAgfVxuICAgIGVsc2UgaWYgKGlzUHJvbWlzZShyZXN1bHQpKSB7XG4gICAgICAgIHJldHVybiBzdWJzY3JpYmVUb1Byb21pc2UocmVzdWx0KTtcbiAgICB9XG4gICAgZWxzZSBpZiAoISFyZXN1bHQgJiYgdHlwZW9mIHJlc3VsdFtTeW1ib2xfaXRlcmF0b3JdID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgIHJldHVybiBzdWJzY3JpYmVUb0l0ZXJhYmxlKHJlc3VsdCk7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICB2YXIgdmFsdWUgPSBpc09iamVjdChyZXN1bHQpID8gJ2FuIGludmFsaWQgb2JqZWN0JyA6IFwiJ1wiICsgcmVzdWx0ICsgXCInXCI7XG4gICAgICAgIHZhciBtc2cgPSBcIllvdSBwcm92aWRlZCBcIiArIHZhbHVlICsgXCIgd2hlcmUgYSBzdHJlYW0gd2FzIGV4cGVjdGVkLlwiXG4gICAgICAgICAgICArICcgWW91IGNhbiBwcm92aWRlIGFuIE9ic2VydmFibGUsIFByb21pc2UsIEFycmF5LCBvciBJdGVyYWJsZS4nO1xuICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKG1zZyk7XG4gICAgfVxufTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXN1YnNjcmliZVRvLmpzLm1hcFxuIiwiLyoqIFBVUkVfSU1QT1JUU19TVEFSVCBfc3ltYm9sX29ic2VydmFibGUgUFVSRV9JTVBPUlRTX0VORCAqL1xuaW1wb3J0IHsgb2JzZXJ2YWJsZSBhcyBTeW1ib2xfb2JzZXJ2YWJsZSB9IGZyb20gJy4uL3N5bWJvbC9vYnNlcnZhYmxlJztcbmV4cG9ydCB2YXIgc3Vic2NyaWJlVG9PYnNlcnZhYmxlID0gZnVuY3Rpb24gKG9iaikge1xuICAgIHJldHVybiBmdW5jdGlvbiAoc3Vic2NyaWJlcikge1xuICAgICAgICB2YXIgb2JzID0gb2JqW1N5bWJvbF9vYnNlcnZhYmxlXSgpO1xuICAgICAgICBpZiAodHlwZW9mIG9icy5zdWJzY3JpYmUgIT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ1Byb3ZpZGVkIG9iamVjdCBkb2VzIG5vdCBjb3JyZWN0bHkgaW1wbGVtZW50IFN5bWJvbC5vYnNlcnZhYmxlJyk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4gb2JzLnN1YnNjcmliZShzdWJzY3JpYmVyKTtcbiAgICAgICAgfVxuICAgIH07XG59O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9c3Vic2NyaWJlVG9PYnNlcnZhYmxlLmpzLm1hcFxuIiwiLyoqIFBVUkVfSU1QT1JUU19TVEFSVCBfaG9zdFJlcG9ydEVycm9yIFBVUkVfSU1QT1JUU19FTkQgKi9cbmltcG9ydCB7IGhvc3RSZXBvcnRFcnJvciB9IGZyb20gJy4vaG9zdFJlcG9ydEVycm9yJztcbmV4cG9ydCB2YXIgc3Vic2NyaWJlVG9Qcm9taXNlID0gZnVuY3Rpb24gKHByb21pc2UpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gKHN1YnNjcmliZXIpIHtcbiAgICAgICAgcHJvbWlzZS50aGVuKGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgICAgICAgICAgaWYgKCFzdWJzY3JpYmVyLmNsb3NlZCkge1xuICAgICAgICAgICAgICAgIHN1YnNjcmliZXIubmV4dCh2YWx1ZSk7XG4gICAgICAgICAgICAgICAgc3Vic2NyaWJlci5jb21wbGV0ZSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9LCBmdW5jdGlvbiAoZXJyKSB7IHJldHVybiBzdWJzY3JpYmVyLmVycm9yKGVycik7IH0pXG4gICAgICAgICAgICAudGhlbihudWxsLCBob3N0UmVwb3J0RXJyb3IpO1xuICAgICAgICByZXR1cm4gc3Vic2NyaWJlcjtcbiAgICB9O1xufTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXN1YnNjcmliZVRvUHJvbWlzZS5qcy5tYXBcbiIsIi8qKiBQVVJFX0lNUE9SVFNfU1RBUlQgX3N5bWJvbF9pdGVyYXRvciBQVVJFX0lNUE9SVFNfRU5EICovXG5pbXBvcnQgeyBpdGVyYXRvciBhcyBTeW1ib2xfaXRlcmF0b3IgfSBmcm9tICcuLi9zeW1ib2wvaXRlcmF0b3InO1xuZXhwb3J0IHZhciBzdWJzY3JpYmVUb0l0ZXJhYmxlID0gZnVuY3Rpb24gKGl0ZXJhYmxlKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChzdWJzY3JpYmVyKSB7XG4gICAgICAgIHZhciBpdGVyYXRvciA9IGl0ZXJhYmxlW1N5bWJvbF9pdGVyYXRvcl0oKTtcbiAgICAgICAgZG8ge1xuICAgICAgICAgICAgdmFyIGl0ZW0gPSB2b2lkIDA7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIGl0ZW0gPSBpdGVyYXRvci5uZXh0KCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjYXRjaCAoZXJyKSB7XG4gICAgICAgICAgICAgICAgc3Vic2NyaWJlci5lcnJvcihlcnIpO1xuICAgICAgICAgICAgICAgIHJldHVybiBzdWJzY3JpYmVyO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGl0ZW0uZG9uZSkge1xuICAgICAgICAgICAgICAgIHN1YnNjcmliZXIuY29tcGxldGUoKTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHN1YnNjcmliZXIubmV4dChpdGVtLnZhbHVlKTtcbiAgICAgICAgICAgIGlmIChzdWJzY3JpYmVyLmNsb3NlZCkge1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICB9IHdoaWxlICh0cnVlKTtcbiAgICAgICAgaWYgKHR5cGVvZiBpdGVyYXRvci5yZXR1cm4gPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICAgIHN1YnNjcmliZXIuYWRkKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICBpZiAoaXRlcmF0b3IucmV0dXJuKSB7XG4gICAgICAgICAgICAgICAgICAgIGl0ZXJhdG9yLnJldHVybigpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBzdWJzY3JpYmVyO1xuICAgIH07XG59O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9c3Vic2NyaWJlVG9JdGVyYWJsZS5qcy5tYXBcbiIsIi8qKiBQVVJFX0lNUE9SVFNfU1RBUlQgX09ic2VydmFibGUsX1N1YnNjcmlwdGlvbiBQVVJFX0lNUE9SVFNfRU5EICovXG5pbXBvcnQgeyBPYnNlcnZhYmxlIH0gZnJvbSAnLi4vT2JzZXJ2YWJsZSc7XG5pbXBvcnQgeyBTdWJzY3JpcHRpb24gfSBmcm9tICcuLi9TdWJzY3JpcHRpb24nO1xuZXhwb3J0IGZ1bmN0aW9uIHNjaGVkdWxlQXJyYXkoaW5wdXQsIHNjaGVkdWxlcikge1xuICAgIHJldHVybiBuZXcgT2JzZXJ2YWJsZShmdW5jdGlvbiAoc3Vic2NyaWJlcikge1xuICAgICAgICB2YXIgc3ViID0gbmV3IFN1YnNjcmlwdGlvbigpO1xuICAgICAgICB2YXIgaSA9IDA7XG4gICAgICAgIHN1Yi5hZGQoc2NoZWR1bGVyLnNjaGVkdWxlKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGlmIChpID09PSBpbnB1dC5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICBzdWJzY3JpYmVyLmNvbXBsZXRlKCk7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgc3Vic2NyaWJlci5uZXh0KGlucHV0W2krK10pO1xuICAgICAgICAgICAgaWYgKCFzdWJzY3JpYmVyLmNsb3NlZCkge1xuICAgICAgICAgICAgICAgIHN1Yi5hZGQodGhpcy5zY2hlZHVsZSgpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSkpO1xuICAgICAgICByZXR1cm4gc3ViO1xuICAgIH0pO1xufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9c2NoZWR1bGVBcnJheS5qcy5tYXBcbiIsIi8qKiBQVVJFX0lNUE9SVFNfU1RBUlQgX3NjaGVkdWxlT2JzZXJ2YWJsZSxfc2NoZWR1bGVQcm9taXNlLF9zY2hlZHVsZUFycmF5LF9zY2hlZHVsZUl0ZXJhYmxlLF91dGlsX2lzSW50ZXJvcE9ic2VydmFibGUsX3V0aWxfaXNQcm9taXNlLF91dGlsX2lzQXJyYXlMaWtlLF91dGlsX2lzSXRlcmFibGUgUFVSRV9JTVBPUlRTX0VORCAqL1xuaW1wb3J0IHsgc2NoZWR1bGVPYnNlcnZhYmxlIH0gZnJvbSAnLi9zY2hlZHVsZU9ic2VydmFibGUnO1xuaW1wb3J0IHsgc2NoZWR1bGVQcm9taXNlIH0gZnJvbSAnLi9zY2hlZHVsZVByb21pc2UnO1xuaW1wb3J0IHsgc2NoZWR1bGVBcnJheSB9IGZyb20gJy4vc2NoZWR1bGVBcnJheSc7XG5pbXBvcnQgeyBzY2hlZHVsZUl0ZXJhYmxlIH0gZnJvbSAnLi9zY2hlZHVsZUl0ZXJhYmxlJztcbmltcG9ydCB7IGlzSW50ZXJvcE9ic2VydmFibGUgfSBmcm9tICcuLi91dGlsL2lzSW50ZXJvcE9ic2VydmFibGUnO1xuaW1wb3J0IHsgaXNQcm9taXNlIH0gZnJvbSAnLi4vdXRpbC9pc1Byb21pc2UnO1xuaW1wb3J0IHsgaXNBcnJheUxpa2UgfSBmcm9tICcuLi91dGlsL2lzQXJyYXlMaWtlJztcbmltcG9ydCB7IGlzSXRlcmFibGUgfSBmcm9tICcuLi91dGlsL2lzSXRlcmFibGUnO1xuZXhwb3J0IGZ1bmN0aW9uIHNjaGVkdWxlZChpbnB1dCwgc2NoZWR1bGVyKSB7XG4gICAgaWYgKGlucHV0ICE9IG51bGwpIHtcbiAgICAgICAgaWYgKGlzSW50ZXJvcE9ic2VydmFibGUoaW5wdXQpKSB7XG4gICAgICAgICAgICByZXR1cm4gc2NoZWR1bGVPYnNlcnZhYmxlKGlucHV0LCBzY2hlZHVsZXIpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKGlzUHJvbWlzZShpbnB1dCkpIHtcbiAgICAgICAgICAgIHJldHVybiBzY2hlZHVsZVByb21pc2UoaW5wdXQsIHNjaGVkdWxlcik7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoaXNBcnJheUxpa2UoaW5wdXQpKSB7XG4gICAgICAgICAgICByZXR1cm4gc2NoZWR1bGVBcnJheShpbnB1dCwgc2NoZWR1bGVyKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChpc0l0ZXJhYmxlKGlucHV0KSB8fCB0eXBlb2YgaW5wdXQgPT09ICdzdHJpbmcnKSB7XG4gICAgICAgICAgICByZXR1cm4gc2NoZWR1bGVJdGVyYWJsZShpbnB1dCwgc2NoZWR1bGVyKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICB0aHJvdyBuZXcgVHlwZUVycm9yKChpbnB1dCAhPT0gbnVsbCAmJiB0eXBlb2YgaW5wdXQgfHwgaW5wdXQpICsgJyBpcyBub3Qgb2JzZXJ2YWJsZScpO1xufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9c2NoZWR1bGVkLmpzLm1hcFxuIiwiLyoqIFBVUkVfSU1QT1JUU19TVEFSVCBfc3ltYm9sX29ic2VydmFibGUgUFVSRV9JTVBPUlRTX0VORCAqL1xuaW1wb3J0IHsgb2JzZXJ2YWJsZSBhcyBTeW1ib2xfb2JzZXJ2YWJsZSB9IGZyb20gJy4uL3N5bWJvbC9vYnNlcnZhYmxlJztcbmV4cG9ydCBmdW5jdGlvbiBpc0ludGVyb3BPYnNlcnZhYmxlKGlucHV0KSB7XG4gICAgcmV0dXJuIGlucHV0ICYmIHR5cGVvZiBpbnB1dFtTeW1ib2xfb2JzZXJ2YWJsZV0gPT09ICdmdW5jdGlvbic7XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD1pc0ludGVyb3BPYnNlcnZhYmxlLmpzLm1hcFxuIiwiLyoqIFBVUkVfSU1QT1JUU19TVEFSVCBfT2JzZXJ2YWJsZSxfU3Vic2NyaXB0aW9uLF9zeW1ib2xfb2JzZXJ2YWJsZSBQVVJFX0lNUE9SVFNfRU5EICovXG5pbXBvcnQgeyBPYnNlcnZhYmxlIH0gZnJvbSAnLi4vT2JzZXJ2YWJsZSc7XG5pbXBvcnQgeyBTdWJzY3JpcHRpb24gfSBmcm9tICcuLi9TdWJzY3JpcHRpb24nO1xuaW1wb3J0IHsgb2JzZXJ2YWJsZSBhcyBTeW1ib2xfb2JzZXJ2YWJsZSB9IGZyb20gJy4uL3N5bWJvbC9vYnNlcnZhYmxlJztcbmV4cG9ydCBmdW5jdGlvbiBzY2hlZHVsZU9ic2VydmFibGUoaW5wdXQsIHNjaGVkdWxlcikge1xuICAgIHJldHVybiBuZXcgT2JzZXJ2YWJsZShmdW5jdGlvbiAoc3Vic2NyaWJlcikge1xuICAgICAgICB2YXIgc3ViID0gbmV3IFN1YnNjcmlwdGlvbigpO1xuICAgICAgICBzdWIuYWRkKHNjaGVkdWxlci5zY2hlZHVsZShmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgb2JzZXJ2YWJsZSA9IGlucHV0W1N5bWJvbF9vYnNlcnZhYmxlXSgpO1xuICAgICAgICAgICAgc3ViLmFkZChvYnNlcnZhYmxlLnN1YnNjcmliZSh7XG4gICAgICAgICAgICAgICAgbmV4dDogZnVuY3Rpb24gKHZhbHVlKSB7IHN1Yi5hZGQoc2NoZWR1bGVyLnNjaGVkdWxlKGZ1bmN0aW9uICgpIHsgcmV0dXJuIHN1YnNjcmliZXIubmV4dCh2YWx1ZSk7IH0pKTsgfSxcbiAgICAgICAgICAgICAgICBlcnJvcjogZnVuY3Rpb24gKGVycikgeyBzdWIuYWRkKHNjaGVkdWxlci5zY2hlZHVsZShmdW5jdGlvbiAoKSB7IHJldHVybiBzdWJzY3JpYmVyLmVycm9yKGVycik7IH0pKTsgfSxcbiAgICAgICAgICAgICAgICBjb21wbGV0ZTogZnVuY3Rpb24gKCkgeyBzdWIuYWRkKHNjaGVkdWxlci5zY2hlZHVsZShmdW5jdGlvbiAoKSB7IHJldHVybiBzdWJzY3JpYmVyLmNvbXBsZXRlKCk7IH0pKTsgfSxcbiAgICAgICAgICAgIH0pKTtcbiAgICAgICAgfSkpO1xuICAgICAgICByZXR1cm4gc3ViO1xuICAgIH0pO1xufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9c2NoZWR1bGVPYnNlcnZhYmxlLmpzLm1hcFxuIiwiLyoqIFBVUkVfSU1QT1JUU19TVEFSVCBfT2JzZXJ2YWJsZSxfU3Vic2NyaXB0aW9uIFBVUkVfSU1QT1JUU19FTkQgKi9cbmltcG9ydCB7IE9ic2VydmFibGUgfSBmcm9tICcuLi9PYnNlcnZhYmxlJztcbmltcG9ydCB7IFN1YnNjcmlwdGlvbiB9IGZyb20gJy4uL1N1YnNjcmlwdGlvbic7XG5leHBvcnQgZnVuY3Rpb24gc2NoZWR1bGVQcm9taXNlKGlucHV0LCBzY2hlZHVsZXIpIHtcbiAgICByZXR1cm4gbmV3IE9ic2VydmFibGUoZnVuY3Rpb24gKHN1YnNjcmliZXIpIHtcbiAgICAgICAgdmFyIHN1YiA9IG5ldyBTdWJzY3JpcHRpb24oKTtcbiAgICAgICAgc3ViLmFkZChzY2hlZHVsZXIuc2NoZWR1bGUoZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIGlucHV0LnRoZW4oZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgICAgICAgICAgICAgc3ViLmFkZChzY2hlZHVsZXIuc2NoZWR1bGUoZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICBzdWJzY3JpYmVyLm5leHQodmFsdWUpO1xuICAgICAgICAgICAgICAgICAgICBzdWIuYWRkKHNjaGVkdWxlci5zY2hlZHVsZShmdW5jdGlvbiAoKSB7IHJldHVybiBzdWJzY3JpYmVyLmNvbXBsZXRlKCk7IH0pKTtcbiAgICAgICAgICAgICAgICB9KSk7XG4gICAgICAgICAgICB9LCBmdW5jdGlvbiAoZXJyKSB7XG4gICAgICAgICAgICAgICAgc3ViLmFkZChzY2hlZHVsZXIuc2NoZWR1bGUoZnVuY3Rpb24gKCkgeyByZXR1cm4gc3Vic2NyaWJlci5lcnJvcihlcnIpOyB9KSk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSkpO1xuICAgICAgICByZXR1cm4gc3ViO1xuICAgIH0pO1xufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9c2NoZWR1bGVQcm9taXNlLmpzLm1hcFxuIiwiLyoqIFBVUkVfSU1QT1JUU19TVEFSVCBfc3ltYm9sX2l0ZXJhdG9yIFBVUkVfSU1QT1JUU19FTkQgKi9cbmltcG9ydCB7IGl0ZXJhdG9yIGFzIFN5bWJvbF9pdGVyYXRvciB9IGZyb20gJy4uL3N5bWJvbC9pdGVyYXRvcic7XG5leHBvcnQgZnVuY3Rpb24gaXNJdGVyYWJsZShpbnB1dCkge1xuICAgIHJldHVybiBpbnB1dCAmJiB0eXBlb2YgaW5wdXRbU3ltYm9sX2l0ZXJhdG9yXSA9PT0gJ2Z1bmN0aW9uJztcbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWlzSXRlcmFibGUuanMubWFwXG4iLCIvKiogUFVSRV9JTVBPUlRTX1NUQVJUIF9PYnNlcnZhYmxlLF9TdWJzY3JpcHRpb24sX3N5bWJvbF9pdGVyYXRvciBQVVJFX0lNUE9SVFNfRU5EICovXG5pbXBvcnQgeyBPYnNlcnZhYmxlIH0gZnJvbSAnLi4vT2JzZXJ2YWJsZSc7XG5pbXBvcnQgeyBTdWJzY3JpcHRpb24gfSBmcm9tICcuLi9TdWJzY3JpcHRpb24nO1xuaW1wb3J0IHsgaXRlcmF0b3IgYXMgU3ltYm9sX2l0ZXJhdG9yIH0gZnJvbSAnLi4vc3ltYm9sL2l0ZXJhdG9yJztcbmV4cG9ydCBmdW5jdGlvbiBzY2hlZHVsZUl0ZXJhYmxlKGlucHV0LCBzY2hlZHVsZXIpIHtcbiAgICBpZiAoIWlucHV0KSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcignSXRlcmFibGUgY2Fubm90IGJlIG51bGwnKTtcbiAgICB9XG4gICAgcmV0dXJuIG5ldyBPYnNlcnZhYmxlKGZ1bmN0aW9uIChzdWJzY3JpYmVyKSB7XG4gICAgICAgIHZhciBzdWIgPSBuZXcgU3Vic2NyaXB0aW9uKCk7XG4gICAgICAgIHZhciBpdGVyYXRvcjtcbiAgICAgICAgc3ViLmFkZChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBpZiAoaXRlcmF0b3IgJiYgdHlwZW9mIGl0ZXJhdG9yLnJldHVybiA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgICAgICAgIGl0ZXJhdG9yLnJldHVybigpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgICAgc3ViLmFkZChzY2hlZHVsZXIuc2NoZWR1bGUoZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgaXRlcmF0b3IgPSBpbnB1dFtTeW1ib2xfaXRlcmF0b3JdKCk7XG4gICAgICAgICAgICBzdWIuYWRkKHNjaGVkdWxlci5zY2hlZHVsZShmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgaWYgKHN1YnNjcmliZXIuY2xvc2VkKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdmFyIHZhbHVlO1xuICAgICAgICAgICAgICAgIHZhciBkb25lO1xuICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciByZXN1bHQgPSBpdGVyYXRvci5uZXh0KCk7XG4gICAgICAgICAgICAgICAgICAgIHZhbHVlID0gcmVzdWx0LnZhbHVlO1xuICAgICAgICAgICAgICAgICAgICBkb25lID0gcmVzdWx0LmRvbmU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGNhdGNoIChlcnIpIHtcbiAgICAgICAgICAgICAgICAgICAgc3Vic2NyaWJlci5lcnJvcihlcnIpO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmIChkb25lKSB7XG4gICAgICAgICAgICAgICAgICAgIHN1YnNjcmliZXIuY29tcGxldGUoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHN1YnNjcmliZXIubmV4dCh2YWx1ZSk7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc2NoZWR1bGUoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KSk7XG4gICAgICAgIH0pKTtcbiAgICAgICAgcmV0dXJuIHN1YjtcbiAgICB9KTtcbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXNjaGVkdWxlSXRlcmFibGUuanMubWFwXG4iLCIvKiogUFVSRV9JTVBPUlRTX1NUQVJUIHRzbGliLF9TdWJzY3JpYmVyLF9PYnNlcnZhYmxlLF91dGlsX3N1YnNjcmliZVRvIFBVUkVfSU1QT1JUU19FTkQgKi9cbmltcG9ydCAqIGFzIHRzbGliXzEgZnJvbSBcInRzbGliXCI7XG5pbXBvcnQgeyBTdWJzY3JpYmVyIH0gZnJvbSAnLi9TdWJzY3JpYmVyJztcbmltcG9ydCB7IE9ic2VydmFibGUgfSBmcm9tICcuL09ic2VydmFibGUnO1xuaW1wb3J0IHsgc3Vic2NyaWJlVG8gfSBmcm9tICcuL3V0aWwvc3Vic2NyaWJlVG8nO1xudmFyIFNpbXBsZUlubmVyU3Vic2NyaWJlciA9IC8qQF9fUFVSRV9fKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICB0c2xpYl8xLl9fZXh0ZW5kcyhTaW1wbGVJbm5lclN1YnNjcmliZXIsIF9zdXBlcik7XG4gICAgZnVuY3Rpb24gU2ltcGxlSW5uZXJTdWJzY3JpYmVyKHBhcmVudCkge1xuICAgICAgICB2YXIgX3RoaXMgPSBfc3VwZXIuY2FsbCh0aGlzKSB8fCB0aGlzO1xuICAgICAgICBfdGhpcy5wYXJlbnQgPSBwYXJlbnQ7XG4gICAgICAgIHJldHVybiBfdGhpcztcbiAgICB9XG4gICAgU2ltcGxlSW5uZXJTdWJzY3JpYmVyLnByb3RvdHlwZS5fbmV4dCA9IGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgICAgICB0aGlzLnBhcmVudC5ub3RpZnlOZXh0KHZhbHVlKTtcbiAgICB9O1xuICAgIFNpbXBsZUlubmVyU3Vic2NyaWJlci5wcm90b3R5cGUuX2Vycm9yID0gZnVuY3Rpb24gKGVycm9yKSB7XG4gICAgICAgIHRoaXMucGFyZW50Lm5vdGlmeUVycm9yKGVycm9yKTtcbiAgICAgICAgdGhpcy51bnN1YnNjcmliZSgpO1xuICAgIH07XG4gICAgU2ltcGxlSW5uZXJTdWJzY3JpYmVyLnByb3RvdHlwZS5fY29tcGxldGUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHRoaXMucGFyZW50Lm5vdGlmeUNvbXBsZXRlKCk7XG4gICAgICAgIHRoaXMudW5zdWJzY3JpYmUoKTtcbiAgICB9O1xuICAgIHJldHVybiBTaW1wbGVJbm5lclN1YnNjcmliZXI7XG59KFN1YnNjcmliZXIpKTtcbmV4cG9ydCB7IFNpbXBsZUlubmVyU3Vic2NyaWJlciB9O1xudmFyIENvbXBsZXhJbm5lclN1YnNjcmliZXIgPSAvKkBfX1BVUkVfXyovIChmdW5jdGlvbiAoX3N1cGVyKSB7XG4gICAgdHNsaWJfMS5fX2V4dGVuZHMoQ29tcGxleElubmVyU3Vic2NyaWJlciwgX3N1cGVyKTtcbiAgICBmdW5jdGlvbiBDb21wbGV4SW5uZXJTdWJzY3JpYmVyKHBhcmVudCwgb3V0ZXJWYWx1ZSwgb3V0ZXJJbmRleCkge1xuICAgICAgICB2YXIgX3RoaXMgPSBfc3VwZXIuY2FsbCh0aGlzKSB8fCB0aGlzO1xuICAgICAgICBfdGhpcy5wYXJlbnQgPSBwYXJlbnQ7XG4gICAgICAgIF90aGlzLm91dGVyVmFsdWUgPSBvdXRlclZhbHVlO1xuICAgICAgICBfdGhpcy5vdXRlckluZGV4ID0gb3V0ZXJJbmRleDtcbiAgICAgICAgcmV0dXJuIF90aGlzO1xuICAgIH1cbiAgICBDb21wbGV4SW5uZXJTdWJzY3JpYmVyLnByb3RvdHlwZS5fbmV4dCA9IGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgICAgICB0aGlzLnBhcmVudC5ub3RpZnlOZXh0KHRoaXMub3V0ZXJWYWx1ZSwgdmFsdWUsIHRoaXMub3V0ZXJJbmRleCwgdGhpcyk7XG4gICAgfTtcbiAgICBDb21wbGV4SW5uZXJTdWJzY3JpYmVyLnByb3RvdHlwZS5fZXJyb3IgPSBmdW5jdGlvbiAoZXJyb3IpIHtcbiAgICAgICAgdGhpcy5wYXJlbnQubm90aWZ5RXJyb3IoZXJyb3IpO1xuICAgICAgICB0aGlzLnVuc3Vic2NyaWJlKCk7XG4gICAgfTtcbiAgICBDb21wbGV4SW5uZXJTdWJzY3JpYmVyLnByb3RvdHlwZS5fY29tcGxldGUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHRoaXMucGFyZW50Lm5vdGlmeUNvbXBsZXRlKHRoaXMpO1xuICAgICAgICB0aGlzLnVuc3Vic2NyaWJlKCk7XG4gICAgfTtcbiAgICByZXR1cm4gQ29tcGxleElubmVyU3Vic2NyaWJlcjtcbn0oU3Vic2NyaWJlcikpO1xuZXhwb3J0IHsgQ29tcGxleElubmVyU3Vic2NyaWJlciB9O1xudmFyIFNpbXBsZU91dGVyU3Vic2NyaWJlciA9IC8qQF9fUFVSRV9fKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICB0c2xpYl8xLl9fZXh0ZW5kcyhTaW1wbGVPdXRlclN1YnNjcmliZXIsIF9zdXBlcik7XG4gICAgZnVuY3Rpb24gU2ltcGxlT3V0ZXJTdWJzY3JpYmVyKCkge1xuICAgICAgICByZXR1cm4gX3N1cGVyICE9PSBudWxsICYmIF9zdXBlci5hcHBseSh0aGlzLCBhcmd1bWVudHMpIHx8IHRoaXM7XG4gICAgfVxuICAgIFNpbXBsZU91dGVyU3Vic2NyaWJlci5wcm90b3R5cGUubm90aWZ5TmV4dCA9IGZ1bmN0aW9uIChpbm5lclZhbHVlKSB7XG4gICAgICAgIHRoaXMuZGVzdGluYXRpb24ubmV4dChpbm5lclZhbHVlKTtcbiAgICB9O1xuICAgIFNpbXBsZU91dGVyU3Vic2NyaWJlci5wcm90b3R5cGUubm90aWZ5RXJyb3IgPSBmdW5jdGlvbiAoZXJyKSB7XG4gICAgICAgIHRoaXMuZGVzdGluYXRpb24uZXJyb3IoZXJyKTtcbiAgICB9O1xuICAgIFNpbXBsZU91dGVyU3Vic2NyaWJlci5wcm90b3R5cGUubm90aWZ5Q29tcGxldGUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHRoaXMuZGVzdGluYXRpb24uY29tcGxldGUoKTtcbiAgICB9O1xuICAgIHJldHVybiBTaW1wbGVPdXRlclN1YnNjcmliZXI7XG59KFN1YnNjcmliZXIpKTtcbmV4cG9ydCB7IFNpbXBsZU91dGVyU3Vic2NyaWJlciB9O1xudmFyIENvbXBsZXhPdXRlclN1YnNjcmliZXIgPSAvKkBfX1BVUkVfXyovIChmdW5jdGlvbiAoX3N1cGVyKSB7XG4gICAgdHNsaWJfMS5fX2V4dGVuZHMoQ29tcGxleE91dGVyU3Vic2NyaWJlciwgX3N1cGVyKTtcbiAgICBmdW5jdGlvbiBDb21wbGV4T3V0ZXJTdWJzY3JpYmVyKCkge1xuICAgICAgICByZXR1cm4gX3N1cGVyICE9PSBudWxsICYmIF9zdXBlci5hcHBseSh0aGlzLCBhcmd1bWVudHMpIHx8IHRoaXM7XG4gICAgfVxuICAgIENvbXBsZXhPdXRlclN1YnNjcmliZXIucHJvdG90eXBlLm5vdGlmeU5leHQgPSBmdW5jdGlvbiAoX291dGVyVmFsdWUsIGlubmVyVmFsdWUsIF9vdXRlckluZGV4LCBfaW5uZXJTdWIpIHtcbiAgICAgICAgdGhpcy5kZXN0aW5hdGlvbi5uZXh0KGlubmVyVmFsdWUpO1xuICAgIH07XG4gICAgQ29tcGxleE91dGVyU3Vic2NyaWJlci5wcm90b3R5cGUubm90aWZ5RXJyb3IgPSBmdW5jdGlvbiAoZXJyb3IpIHtcbiAgICAgICAgdGhpcy5kZXN0aW5hdGlvbi5lcnJvcihlcnJvcik7XG4gICAgfTtcbiAgICBDb21wbGV4T3V0ZXJTdWJzY3JpYmVyLnByb3RvdHlwZS5ub3RpZnlDb21wbGV0ZSA9IGZ1bmN0aW9uIChfaW5uZXJTdWIpIHtcbiAgICAgICAgdGhpcy5kZXN0aW5hdGlvbi5jb21wbGV0ZSgpO1xuICAgIH07XG4gICAgcmV0dXJuIENvbXBsZXhPdXRlclN1YnNjcmliZXI7XG59KFN1YnNjcmliZXIpKTtcbmV4cG9ydCB7IENvbXBsZXhPdXRlclN1YnNjcmliZXIgfTtcbmV4cG9ydCBmdW5jdGlvbiBpbm5lclN1YnNjcmliZShyZXN1bHQsIGlubmVyU3Vic2NyaWJlcikge1xuICAgIGlmIChpbm5lclN1YnNjcmliZXIuY2xvc2VkKSB7XG4gICAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgfVxuICAgIGlmIChyZXN1bHQgaW5zdGFuY2VvZiBPYnNlcnZhYmxlKSB7XG4gICAgICAgIHJldHVybiByZXN1bHQuc3Vic2NyaWJlKGlubmVyU3Vic2NyaWJlcik7XG4gICAgfVxuICAgIHJldHVybiBzdWJzY3JpYmVUbyhyZXN1bHQpKGlubmVyU3Vic2NyaWJlcik7XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD1pbm5lclN1YnNjcmliZS5qcy5tYXBcbiIsIi8qKiBQVVJFX0lNUE9SVFNfU1RBUlQgdHNsaWIsX21hcCxfb2JzZXJ2YWJsZV9mcm9tLF9pbm5lclN1YnNjcmliZSBQVVJFX0lNUE9SVFNfRU5EICovXG5pbXBvcnQgKiBhcyB0c2xpYl8xIGZyb20gXCJ0c2xpYlwiO1xuaW1wb3J0IHsgbWFwIH0gZnJvbSAnLi9tYXAnO1xuaW1wb3J0IHsgZnJvbSB9IGZyb20gJy4uL29ic2VydmFibGUvZnJvbSc7XG5pbXBvcnQgeyBTaW1wbGVPdXRlclN1YnNjcmliZXIsIFNpbXBsZUlubmVyU3Vic2NyaWJlciwgaW5uZXJTdWJzY3JpYmUgfSBmcm9tICcuLi9pbm5lclN1YnNjcmliZSc7XG5leHBvcnQgZnVuY3Rpb24gbWVyZ2VNYXAocHJvamVjdCwgcmVzdWx0U2VsZWN0b3IsIGNvbmN1cnJlbnQpIHtcbiAgICBpZiAoY29uY3VycmVudCA9PT0gdm9pZCAwKSB7XG4gICAgICAgIGNvbmN1cnJlbnQgPSBOdW1iZXIuUE9TSVRJVkVfSU5GSU5JVFk7XG4gICAgfVxuICAgIGlmICh0eXBlb2YgcmVzdWx0U2VsZWN0b3IgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uIChzb3VyY2UpIHsgcmV0dXJuIHNvdXJjZS5waXBlKG1lcmdlTWFwKGZ1bmN0aW9uIChhLCBpKSB7IHJldHVybiBmcm9tKHByb2plY3QoYSwgaSkpLnBpcGUobWFwKGZ1bmN0aW9uIChiLCBpaSkgeyByZXR1cm4gcmVzdWx0U2VsZWN0b3IoYSwgYiwgaSwgaWkpOyB9KSk7IH0sIGNvbmN1cnJlbnQpKTsgfTtcbiAgICB9XG4gICAgZWxzZSBpZiAodHlwZW9mIHJlc3VsdFNlbGVjdG9yID09PSAnbnVtYmVyJykge1xuICAgICAgICBjb25jdXJyZW50ID0gcmVzdWx0U2VsZWN0b3I7XG4gICAgfVxuICAgIHJldHVybiBmdW5jdGlvbiAoc291cmNlKSB7IHJldHVybiBzb3VyY2UubGlmdChuZXcgTWVyZ2VNYXBPcGVyYXRvcihwcm9qZWN0LCBjb25jdXJyZW50KSk7IH07XG59XG52YXIgTWVyZ2VNYXBPcGVyYXRvciA9IC8qQF9fUFVSRV9fKi8gKGZ1bmN0aW9uICgpIHtcbiAgICBmdW5jdGlvbiBNZXJnZU1hcE9wZXJhdG9yKHByb2plY3QsIGNvbmN1cnJlbnQpIHtcbiAgICAgICAgaWYgKGNvbmN1cnJlbnQgPT09IHZvaWQgMCkge1xuICAgICAgICAgICAgY29uY3VycmVudCA9IE51bWJlci5QT1NJVElWRV9JTkZJTklUWTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnByb2plY3QgPSBwcm9qZWN0O1xuICAgICAgICB0aGlzLmNvbmN1cnJlbnQgPSBjb25jdXJyZW50O1xuICAgIH1cbiAgICBNZXJnZU1hcE9wZXJhdG9yLnByb3RvdHlwZS5jYWxsID0gZnVuY3Rpb24gKG9ic2VydmVyLCBzb3VyY2UpIHtcbiAgICAgICAgcmV0dXJuIHNvdXJjZS5zdWJzY3JpYmUobmV3IE1lcmdlTWFwU3Vic2NyaWJlcihvYnNlcnZlciwgdGhpcy5wcm9qZWN0LCB0aGlzLmNvbmN1cnJlbnQpKTtcbiAgICB9O1xuICAgIHJldHVybiBNZXJnZU1hcE9wZXJhdG9yO1xufSgpKTtcbmV4cG9ydCB7IE1lcmdlTWFwT3BlcmF0b3IgfTtcbnZhciBNZXJnZU1hcFN1YnNjcmliZXIgPSAvKkBfX1BVUkVfXyovIChmdW5jdGlvbiAoX3N1cGVyKSB7XG4gICAgdHNsaWJfMS5fX2V4dGVuZHMoTWVyZ2VNYXBTdWJzY3JpYmVyLCBfc3VwZXIpO1xuICAgIGZ1bmN0aW9uIE1lcmdlTWFwU3Vic2NyaWJlcihkZXN0aW5hdGlvbiwgcHJvamVjdCwgY29uY3VycmVudCkge1xuICAgICAgICBpZiAoY29uY3VycmVudCA9PT0gdm9pZCAwKSB7XG4gICAgICAgICAgICBjb25jdXJyZW50ID0gTnVtYmVyLlBPU0lUSVZFX0lORklOSVRZO1xuICAgICAgICB9XG4gICAgICAgIHZhciBfdGhpcyA9IF9zdXBlci5jYWxsKHRoaXMsIGRlc3RpbmF0aW9uKSB8fCB0aGlzO1xuICAgICAgICBfdGhpcy5wcm9qZWN0ID0gcHJvamVjdDtcbiAgICAgICAgX3RoaXMuY29uY3VycmVudCA9IGNvbmN1cnJlbnQ7XG4gICAgICAgIF90aGlzLmhhc0NvbXBsZXRlZCA9IGZhbHNlO1xuICAgICAgICBfdGhpcy5idWZmZXIgPSBbXTtcbiAgICAgICAgX3RoaXMuYWN0aXZlID0gMDtcbiAgICAgICAgX3RoaXMuaW5kZXggPSAwO1xuICAgICAgICByZXR1cm4gX3RoaXM7XG4gICAgfVxuICAgIE1lcmdlTWFwU3Vic2NyaWJlci5wcm90b3R5cGUuX25leHQgPSBmdW5jdGlvbiAodmFsdWUpIHtcbiAgICAgICAgaWYgKHRoaXMuYWN0aXZlIDwgdGhpcy5jb25jdXJyZW50KSB7XG4gICAgICAgICAgICB0aGlzLl90cnlOZXh0KHZhbHVlKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMuYnVmZmVyLnB1c2godmFsdWUpO1xuICAgICAgICB9XG4gICAgfTtcbiAgICBNZXJnZU1hcFN1YnNjcmliZXIucHJvdG90eXBlLl90cnlOZXh0ID0gZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgICAgIHZhciByZXN1bHQ7XG4gICAgICAgIHZhciBpbmRleCA9IHRoaXMuaW5kZXgrKztcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIHJlc3VsdCA9IHRoaXMucHJvamVjdCh2YWx1ZSwgaW5kZXgpO1xuICAgICAgICB9XG4gICAgICAgIGNhdGNoIChlcnIpIHtcbiAgICAgICAgICAgIHRoaXMuZGVzdGluYXRpb24uZXJyb3IoZXJyKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmFjdGl2ZSsrO1xuICAgICAgICB0aGlzLl9pbm5lclN1YihyZXN1bHQpO1xuICAgIH07XG4gICAgTWVyZ2VNYXBTdWJzY3JpYmVyLnByb3RvdHlwZS5faW5uZXJTdWIgPSBmdW5jdGlvbiAoaXNoKSB7XG4gICAgICAgIHZhciBpbm5lclN1YnNjcmliZXIgPSBuZXcgU2ltcGxlSW5uZXJTdWJzY3JpYmVyKHRoaXMpO1xuICAgICAgICB2YXIgZGVzdGluYXRpb24gPSB0aGlzLmRlc3RpbmF0aW9uO1xuICAgICAgICBkZXN0aW5hdGlvbi5hZGQoaW5uZXJTdWJzY3JpYmVyKTtcbiAgICAgICAgdmFyIGlubmVyU3Vic2NyaXB0aW9uID0gaW5uZXJTdWJzY3JpYmUoaXNoLCBpbm5lclN1YnNjcmliZXIpO1xuICAgICAgICBpZiAoaW5uZXJTdWJzY3JpcHRpb24gIT09IGlubmVyU3Vic2NyaWJlcikge1xuICAgICAgICAgICAgZGVzdGluYXRpb24uYWRkKGlubmVyU3Vic2NyaXB0aW9uKTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgTWVyZ2VNYXBTdWJzY3JpYmVyLnByb3RvdHlwZS5fY29tcGxldGUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHRoaXMuaGFzQ29tcGxldGVkID0gdHJ1ZTtcbiAgICAgICAgaWYgKHRoaXMuYWN0aXZlID09PSAwICYmIHRoaXMuYnVmZmVyLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgICAgdGhpcy5kZXN0aW5hdGlvbi5jb21wbGV0ZSgpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMudW5zdWJzY3JpYmUoKTtcbiAgICB9O1xuICAgIE1lcmdlTWFwU3Vic2NyaWJlci5wcm90b3R5cGUubm90aWZ5TmV4dCA9IGZ1bmN0aW9uIChpbm5lclZhbHVlKSB7XG4gICAgICAgIHRoaXMuZGVzdGluYXRpb24ubmV4dChpbm5lclZhbHVlKTtcbiAgICB9O1xuICAgIE1lcmdlTWFwU3Vic2NyaWJlci5wcm90b3R5cGUubm90aWZ5Q29tcGxldGUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBidWZmZXIgPSB0aGlzLmJ1ZmZlcjtcbiAgICAgICAgdGhpcy5hY3RpdmUtLTtcbiAgICAgICAgaWYgKGJ1ZmZlci5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICB0aGlzLl9uZXh0KGJ1ZmZlci5zaGlmdCgpKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmICh0aGlzLmFjdGl2ZSA9PT0gMCAmJiB0aGlzLmhhc0NvbXBsZXRlZCkge1xuICAgICAgICAgICAgdGhpcy5kZXN0aW5hdGlvbi5jb21wbGV0ZSgpO1xuICAgICAgICB9XG4gICAgfTtcbiAgICByZXR1cm4gTWVyZ2VNYXBTdWJzY3JpYmVyO1xufShTaW1wbGVPdXRlclN1YnNjcmliZXIpKTtcbmV4cG9ydCB7IE1lcmdlTWFwU3Vic2NyaWJlciB9O1xuZXhwb3J0IHZhciBmbGF0TWFwID0gbWVyZ2VNYXA7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1tZXJnZU1hcC5qcy5tYXBcbiIsIi8qKiBQVVJFX0lNUE9SVFNfU1RBUlQgX09ic2VydmFibGUsX3V0aWxfc3Vic2NyaWJlVG8sX3NjaGVkdWxlZF9zY2hlZHVsZWQgUFVSRV9JTVBPUlRTX0VORCAqL1xuaW1wb3J0IHsgT2JzZXJ2YWJsZSB9IGZyb20gJy4uL09ic2VydmFibGUnO1xuaW1wb3J0IHsgc3Vic2NyaWJlVG8gfSBmcm9tICcuLi91dGlsL3N1YnNjcmliZVRvJztcbmltcG9ydCB7IHNjaGVkdWxlZCB9IGZyb20gJy4uL3NjaGVkdWxlZC9zY2hlZHVsZWQnO1xuZXhwb3J0IGZ1bmN0aW9uIGZyb20oaW5wdXQsIHNjaGVkdWxlcikge1xuICAgIGlmICghc2NoZWR1bGVyKSB7XG4gICAgICAgIGlmIChpbnB1dCBpbnN0YW5jZW9mIE9ic2VydmFibGUpIHtcbiAgICAgICAgICAgIHJldHVybiBpbnB1dDtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbmV3IE9ic2VydmFibGUoc3Vic2NyaWJlVG8oaW5wdXQpKTtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIHJldHVybiBzY2hlZHVsZWQoaW5wdXQsIHNjaGVkdWxlcik7XG4gICAgfVxufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9ZnJvbS5qcy5tYXBcbiIsIi8qKiBQVVJFX0lNUE9SVFNfU1RBUlQgX21lcmdlTWFwLF91dGlsX2lkZW50aXR5IFBVUkVfSU1QT1JUU19FTkQgKi9cbmltcG9ydCB7IG1lcmdlTWFwIH0gZnJvbSAnLi9tZXJnZU1hcCc7XG5pbXBvcnQgeyBpZGVudGl0eSB9IGZyb20gJy4uL3V0aWwvaWRlbnRpdHknO1xuZXhwb3J0IGZ1bmN0aW9uIG1lcmdlQWxsKGNvbmN1cnJlbnQpIHtcbiAgICBpZiAoY29uY3VycmVudCA9PT0gdm9pZCAwKSB7XG4gICAgICAgIGNvbmN1cnJlbnQgPSBOdW1iZXIuUE9TSVRJVkVfSU5GSU5JVFk7XG4gICAgfVxuICAgIHJldHVybiBtZXJnZU1hcChpZGVudGl0eSwgY29uY3VycmVudCk7XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD1tZXJnZUFsbC5qcy5tYXBcbiIsIi8qKiBQVVJFX0lNUE9SVFNfU1RBUlQgX09ic2VydmFibGUsX3V0aWxfc3Vic2NyaWJlVG9BcnJheSxfc2NoZWR1bGVkX3NjaGVkdWxlQXJyYXkgUFVSRV9JTVBPUlRTX0VORCAqL1xuaW1wb3J0IHsgT2JzZXJ2YWJsZSB9IGZyb20gJy4uL09ic2VydmFibGUnO1xuaW1wb3J0IHsgc3Vic2NyaWJlVG9BcnJheSB9IGZyb20gJy4uL3V0aWwvc3Vic2NyaWJlVG9BcnJheSc7XG5pbXBvcnQgeyBzY2hlZHVsZUFycmF5IH0gZnJvbSAnLi4vc2NoZWR1bGVkL3NjaGVkdWxlQXJyYXknO1xuZXhwb3J0IGZ1bmN0aW9uIGZyb21BcnJheShpbnB1dCwgc2NoZWR1bGVyKSB7XG4gICAgaWYgKCFzY2hlZHVsZXIpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBPYnNlcnZhYmxlKHN1YnNjcmliZVRvQXJyYXkoaW5wdXQpKTtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIHJldHVybiBzY2hlZHVsZUFycmF5KGlucHV0LCBzY2hlZHVsZXIpO1xuICAgIH1cbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWZyb21BcnJheS5qcy5tYXBcbiIsIi8qKiBQVVJFX0lNUE9SVFNfU1RBUlQgdHNsaWIsX1N1YnNjcmliZXIgUFVSRV9JTVBPUlRTX0VORCAqL1xuaW1wb3J0ICogYXMgdHNsaWJfMSBmcm9tIFwidHNsaWJcIjtcbmltcG9ydCB7IFN1YnNjcmliZXIgfSBmcm9tICcuLi9TdWJzY3JpYmVyJztcbmV4cG9ydCBmdW5jdGlvbiBkaXN0aW5jdFVudGlsQ2hhbmdlZChjb21wYXJlLCBrZXlTZWxlY3Rvcikge1xuICAgIHJldHVybiBmdW5jdGlvbiAoc291cmNlKSB7IHJldHVybiBzb3VyY2UubGlmdChuZXcgRGlzdGluY3RVbnRpbENoYW5nZWRPcGVyYXRvcihjb21wYXJlLCBrZXlTZWxlY3RvcikpOyB9O1xufVxudmFyIERpc3RpbmN0VW50aWxDaGFuZ2VkT3BlcmF0b3IgPSAvKkBfX1BVUkVfXyovIChmdW5jdGlvbiAoKSB7XG4gICAgZnVuY3Rpb24gRGlzdGluY3RVbnRpbENoYW5nZWRPcGVyYXRvcihjb21wYXJlLCBrZXlTZWxlY3Rvcikge1xuICAgICAgICB0aGlzLmNvbXBhcmUgPSBjb21wYXJlO1xuICAgICAgICB0aGlzLmtleVNlbGVjdG9yID0ga2V5U2VsZWN0b3I7XG4gICAgfVxuICAgIERpc3RpbmN0VW50aWxDaGFuZ2VkT3BlcmF0b3IucHJvdG90eXBlLmNhbGwgPSBmdW5jdGlvbiAoc3Vic2NyaWJlciwgc291cmNlKSB7XG4gICAgICAgIHJldHVybiBzb3VyY2Uuc3Vic2NyaWJlKG5ldyBEaXN0aW5jdFVudGlsQ2hhbmdlZFN1YnNjcmliZXIoc3Vic2NyaWJlciwgdGhpcy5jb21wYXJlLCB0aGlzLmtleVNlbGVjdG9yKSk7XG4gICAgfTtcbiAgICByZXR1cm4gRGlzdGluY3RVbnRpbENoYW5nZWRPcGVyYXRvcjtcbn0oKSk7XG52YXIgRGlzdGluY3RVbnRpbENoYW5nZWRTdWJzY3JpYmVyID0gLypAX19QVVJFX18qLyAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgIHRzbGliXzEuX19leHRlbmRzKERpc3RpbmN0VW50aWxDaGFuZ2VkU3Vic2NyaWJlciwgX3N1cGVyKTtcbiAgICBmdW5jdGlvbiBEaXN0aW5jdFVudGlsQ2hhbmdlZFN1YnNjcmliZXIoZGVzdGluYXRpb24sIGNvbXBhcmUsIGtleVNlbGVjdG9yKSB7XG4gICAgICAgIHZhciBfdGhpcyA9IF9zdXBlci5jYWxsKHRoaXMsIGRlc3RpbmF0aW9uKSB8fCB0aGlzO1xuICAgICAgICBfdGhpcy5rZXlTZWxlY3RvciA9IGtleVNlbGVjdG9yO1xuICAgICAgICBfdGhpcy5oYXNLZXkgPSBmYWxzZTtcbiAgICAgICAgaWYgKHR5cGVvZiBjb21wYXJlID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgICBfdGhpcy5jb21wYXJlID0gY29tcGFyZTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gX3RoaXM7XG4gICAgfVxuICAgIERpc3RpbmN0VW50aWxDaGFuZ2VkU3Vic2NyaWJlci5wcm90b3R5cGUuY29tcGFyZSA9IGZ1bmN0aW9uICh4LCB5KSB7XG4gICAgICAgIHJldHVybiB4ID09PSB5O1xuICAgIH07XG4gICAgRGlzdGluY3RVbnRpbENoYW5nZWRTdWJzY3JpYmVyLnByb3RvdHlwZS5fbmV4dCA9IGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgICAgICB2YXIga2V5O1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgdmFyIGtleVNlbGVjdG9yID0gdGhpcy5rZXlTZWxlY3RvcjtcbiAgICAgICAgICAgIGtleSA9IGtleVNlbGVjdG9yID8ga2V5U2VsZWN0b3IodmFsdWUpIDogdmFsdWU7XG4gICAgICAgIH1cbiAgICAgICAgY2F0Y2ggKGVycikge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuZGVzdGluYXRpb24uZXJyb3IoZXJyKTtcbiAgICAgICAgfVxuICAgICAgICB2YXIgcmVzdWx0ID0gZmFsc2U7XG4gICAgICAgIGlmICh0aGlzLmhhc0tleSkge1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICB2YXIgY29tcGFyZSA9IHRoaXMuY29tcGFyZTtcbiAgICAgICAgICAgICAgICByZXN1bHQgPSBjb21wYXJlKHRoaXMua2V5LCBrZXkpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY2F0Y2ggKGVycikge1xuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmRlc3RpbmF0aW9uLmVycm9yKGVycik7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB0aGlzLmhhc0tleSA9IHRydWU7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCFyZXN1bHQpIHtcbiAgICAgICAgICAgIHRoaXMua2V5ID0ga2V5O1xuICAgICAgICAgICAgdGhpcy5kZXN0aW5hdGlvbi5uZXh0KHZhbHVlKTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgcmV0dXJuIERpc3RpbmN0VW50aWxDaGFuZ2VkU3Vic2NyaWJlcjtcbn0oU3Vic2NyaWJlcikpO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9ZGlzdGluY3RVbnRpbENoYW5nZWQuanMubWFwXG4iLCJpbXBvcnQge2Zyb21FdmVudCwgaW50ZXJ2YWwsIG1lcmdlLCBPYnNlcnZhYmxlfSBmcm9tICdyeGpzJztcbmltcG9ydCB7ZGlzdGluY3RVbnRpbENoYW5nZWQsIHNoYXJlfSBmcm9tICdyeGpzL29wZXJhdG9ycyc7XG5pbXBvcnQge1BhaW50ZXJ9IGZyb20gJy4vcGFpbnRlcic7XG5pbXBvcnQge1BsYXlncm91bmR9IGZyb20gJy4vcGxheWdyb3VuZCc7XG5cbmV4cG9ydCBjbGFzcyBFdmVudHMge1xuICAgIHByaXZhdGUga2V5RG93bkludGVydmFsOiBOb2RlSlMuVGltZW91dDtcbiAgICBwcml2YXRlIG1vdmVEb3duSW50ZXJ2YWw6IE5vZGVKUy5UaW1lb3V0O1xuICAgIHByaXZhdGUga2V5RG93biA9IGZyb21FdmVudDxLZXlib2FyZEV2ZW50Pihkb2N1bWVudCwgJ2tleWRvd24nKTtcbiAgICBwcml2YXRlIGtleVVwID0gZnJvbUV2ZW50PEtleWJvYXJkRXZlbnQ+KGRvY3VtZW50LCAna2V5dXAnKTtcblxuICAgIC8vIEFsbCBLZXlib2FyZEV2ZW50cyAtIGVtaXR0ZWQgb25seSB3aGVuIEtleWJvYXJkRXZlbnQgY2hhbmdlcyAoa2V5IG9yIHR5cGUpXG4gICAgcHJpdmF0ZSBrZXlFdmVudHM6IE9ic2VydmFibGU8S2V5Ym9hcmRFdmVudD47XG4gICAgY29uc3RydWN0b3IocHJpdmF0ZSBwbGF5Z3JvdW5kOiBQbGF5Z3JvdW5kLCBwcml2YXRlIHBhaW50ZXI6IFBhaW50ZXIpIHtcbiAgICAgICAgdGhpcy5rZXlFdmVudHMgPSBtZXJnZSh0aGlzLmtleURvd24sIHRoaXMua2V5VXApLnBpcGUoXG4gICAgICAgICAgICBkaXN0aW5jdFVudGlsQ2hhbmdlZCgoYSwgYikgPT4gYS5jb2RlID09PSBiLmNvZGUgJiYgYS50eXBlID09PSBiLnR5cGUpXG4gICAgICAgICk7XG4gICAgICAgIHRoaXMucmVnaXN0ZXJFdmVudHMoKTtcbiAgICB9XG5cbiAgICBwcml2YXRlIHN0YXJ0RXZlbnRBbmRJbnRlcnZhbChldmVudDogYW55KTogdm9pZCB7XG4gICAgICAgIGV2ZW50KCk7XG4gICAgICAgIHRoaXMucGFpbnRlci5kcmF3UGxheWdyb3VuZCgpO1xuICAgICAgICB0aGlzLmtleURvd25JbnRlcnZhbCA9IHNldEludGVydmFsKCgpID0+IHtcbiAgICAgICAgICAgIGV2ZW50KCk7XG4gICAgICAgICAgICB0aGlzLnBhaW50ZXIuZHJhd1BsYXlncm91bmQoKTtcbiAgICAgICAgfSwgNTAwKTtcbiAgICB9XG5cbiAgICBwcml2YXRlIHNldE1vdmVEb3duSW50ZXJ2YWwoKTogdm9pZCB7XG4gICAgICAgIHRoaXMubW92ZURvd25JbnRlcnZhbCA9IHNldEludGVydmFsKCgpID0+IHtcbiAgICAgICAgICAgIHRoaXMucGxheWdyb3VuZC5tb3ZlRG93bigpO1xuICAgICAgICAgICAgdGhpcy5wYWludGVyLmRyYXdQbGF5Z3JvdW5kKCk7XG4gICAgICAgIH0sIDc1MCk7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSByZWdpc3RlckV2ZW50cygpIHtcbiAgICAgICAgdGhpcy5zZXRNb3ZlRG93bkludGVydmFsKCk7XG4gICAgICAgIHRoaXMua2V5RXZlbnRzLnN1YnNjcmliZSgoZXZlbnQ6IEtleWJvYXJkRXZlbnQpID0+IHtcbiAgICAgICAgICAgIGlmIChldmVudC50eXBlID09PSBcImtleWRvd25cIiAmJiAhdGhpcy5rZXlEb3duSW50ZXJ2YWwpIHtcbiAgICAgICAgICAgICAgICBzd2l0Y2ggKGV2ZW50LmNvZGUpIHtcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAnQXJyb3dVcCc6XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnN0YXJ0RXZlbnRBbmRJbnRlcnZhbCgoKSA9PiB0aGlzLnBsYXlncm91bmQucm90YXRlKCkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgJ0Fycm93TGVmdCc6XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnN0YXJ0RXZlbnRBbmRJbnRlcnZhbCgoKSA9PiB0aGlzLnBsYXlncm91bmQubW92ZUxlZnQoKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAnQXJyb3dSaWdodCc6XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnN0YXJ0RXZlbnRBbmRJbnRlcnZhbCgoKSA9PiB0aGlzLnBsYXlncm91bmQubW92ZVJpZ2h0KCkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgJ0Fycm93RG93bic6XG4gICAgICAgICAgICAgICAgICAgICAgICBjbGVhckludGVydmFsKHRoaXMubW92ZURvd25JbnRlcnZhbCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnN0YXJ0RXZlbnRBbmRJbnRlcnZhbCgoKSA9PiB0aGlzLnBsYXlncm91bmQubW92ZURvd24oKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9IGVsc2UgaWYgKGV2ZW50LnR5cGUgPT09IFwia2V5dXBcIikge1xuICAgICAgICAgICAgICAgIGlmIChldmVudC5jb2RlID09PSAnQXJyb3dEb3duJykge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnNldE1vdmVEb3duSW50ZXJ2YWwoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY2xlYXJJbnRlcnZhbCh0aGlzLmtleURvd25JbnRlcnZhbCk7XG4gICAgICAgICAgICAgICAgdGhpcy5rZXlEb3duSW50ZXJ2YWwgPSBudWxsO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9XG59IiwiLyoqIFBVUkVfSU1QT1JUU19TVEFSVCBfT2JzZXJ2YWJsZSxfdXRpbF9pc1NjaGVkdWxlcixfb3BlcmF0b3JzX21lcmdlQWxsLF9mcm9tQXJyYXkgUFVSRV9JTVBPUlRTX0VORCAqL1xuaW1wb3J0IHsgT2JzZXJ2YWJsZSB9IGZyb20gJy4uL09ic2VydmFibGUnO1xuaW1wb3J0IHsgaXNTY2hlZHVsZXIgfSBmcm9tICcuLi91dGlsL2lzU2NoZWR1bGVyJztcbmltcG9ydCB7IG1lcmdlQWxsIH0gZnJvbSAnLi4vb3BlcmF0b3JzL21lcmdlQWxsJztcbmltcG9ydCB7IGZyb21BcnJheSB9IGZyb20gJy4vZnJvbUFycmF5JztcbmV4cG9ydCBmdW5jdGlvbiBtZXJnZSgpIHtcbiAgICB2YXIgb2JzZXJ2YWJsZXMgPSBbXTtcbiAgICBmb3IgKHZhciBfaSA9IDA7IF9pIDwgYXJndW1lbnRzLmxlbmd0aDsgX2krKykge1xuICAgICAgICBvYnNlcnZhYmxlc1tfaV0gPSBhcmd1bWVudHNbX2ldO1xuICAgIH1cbiAgICB2YXIgY29uY3VycmVudCA9IE51bWJlci5QT1NJVElWRV9JTkZJTklUWTtcbiAgICB2YXIgc2NoZWR1bGVyID0gbnVsbDtcbiAgICB2YXIgbGFzdCA9IG9ic2VydmFibGVzW29ic2VydmFibGVzLmxlbmd0aCAtIDFdO1xuICAgIGlmIChpc1NjaGVkdWxlcihsYXN0KSkge1xuICAgICAgICBzY2hlZHVsZXIgPSBvYnNlcnZhYmxlcy5wb3AoKTtcbiAgICAgICAgaWYgKG9ic2VydmFibGVzLmxlbmd0aCA+IDEgJiYgdHlwZW9mIG9ic2VydmFibGVzW29ic2VydmFibGVzLmxlbmd0aCAtIDFdID09PSAnbnVtYmVyJykge1xuICAgICAgICAgICAgY29uY3VycmVudCA9IG9ic2VydmFibGVzLnBvcCgpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGVsc2UgaWYgKHR5cGVvZiBsYXN0ID09PSAnbnVtYmVyJykge1xuICAgICAgICBjb25jdXJyZW50ID0gb2JzZXJ2YWJsZXMucG9wKCk7XG4gICAgfVxuICAgIGlmIChzY2hlZHVsZXIgPT09IG51bGwgJiYgb2JzZXJ2YWJsZXMubGVuZ3RoID09PSAxICYmIG9ic2VydmFibGVzWzBdIGluc3RhbmNlb2YgT2JzZXJ2YWJsZSkge1xuICAgICAgICByZXR1cm4gb2JzZXJ2YWJsZXNbMF07XG4gICAgfVxuICAgIHJldHVybiBtZXJnZUFsbChjb25jdXJyZW50KShmcm9tQXJyYXkob2JzZXJ2YWJsZXMsIHNjaGVkdWxlcikpO1xufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9bWVyZ2UuanMubWFwXG4iLCJpbXBvcnQge0dyaWRQb2ludGVyfSBmcm9tICcuL2dyaWQtcG9pbnRlcic7XG5pbXBvcnQge1BsYXlncm91bmR9IGZyb20gJy4vcGxheWdyb3VuZCc7XG5cbmV4cG9ydCBjbGFzcyBQYWludGVyIHtcbiAgICBwcml2YXRlIHdpZHRoOiBudW1iZXI7XG4gICAgcHJpdmF0ZSBoZWlnaHQ6IG51bWJlcjtcbiAgICBwcml2YXRlIGRlZmF1bHRGaWxsU3R5bGUgPSAnI0ZGRic7XG4gICAgcHJpdmF0ZSBkZWZhdWx0U3Ryb2tlU3R5bGUgPSAnI0ZGRic7XG4gICAgY29uc3RydWN0b3IocHJpdmF0ZSBjYW52YXNSZW5kZXJpbmc6IENhbnZhc1JlbmRlcmluZ0NvbnRleHQyRCwgcHJpdmF0ZSBwbGF5Z3JvdW5kOiBQbGF5Z3JvdW5kKSB7XG4gICAgICAgIHRoaXMud2lkdGggPSBjYW52YXNSZW5kZXJpbmcuY2FudmFzLndpZHRoO1xuICAgICAgICB0aGlzLmhlaWdodCA9IGNhbnZhc1JlbmRlcmluZy5jYW52YXMuaGVpZ2h0O1xuICAgIH1cblxuICAgIHB1YmxpYyBkcmF3UGxheWdyb3VuZCgpOiB2b2lkIHtcbiAgICAgICAgY29uc3QgYm94SGVpZ2h0ID0gTWF0aC5mbG9vcih0aGlzLmhlaWdodCAvIHRoaXMucGxheWdyb3VuZC5yb3dzKTtcbiAgICAgICAgY29uc3QgYm94V2lkdGggPSBNYXRoLmZsb29yKHRoaXMud2lkdGggLyB0aGlzLnBsYXlncm91bmQuY29scyk7XG4gICAgICAgIHRoaXMuY2FudmFzUmVuZGVyaW5nLmZpbGxTdHlsZSA9IHRoaXMuZGVmYXVsdEZpbGxTdHlsZTtcbiAgICAgICAgdGhpcy5jYW52YXNSZW5kZXJpbmcuc3Ryb2tlU3R5bGUgPSB0aGlzLmRlZmF1bHRTdHJva2VTdHlsZTtcblxuICAgICAgICB0aGlzLmNhbnZhc1JlbmRlcmluZy5jbGVhclJlY3QoMCwgMCwgdGhpcy53aWR0aCwgdGhpcy5oZWlnaHQpO1xuXG4gICAgICAgIGZvciAobGV0IHIgPSAwOyByIDwgdGhpcy5wbGF5Z3JvdW5kLnJvd3M7IHIrKykge1xuICAgICAgICAgICAgZm9yIChsZXQgYyA9IDA7IGMgPCB0aGlzLnBsYXlncm91bmQuY29sczsgYysrKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgcG9zaXRpb25YID0gYm94V2lkdGggKiBjO1xuICAgICAgICAgICAgICAgIGNvbnN0IHBvc2l0aW9uWSA9IGJveEhlaWdodCAqIHI7XG4gICAgICAgICAgICAgICAgY29uc3QgaXNEcmF3biA9IHRoaXMucGxheWdyb3VuZC5nZXRQbGF5Z3JvdW5kKCkuZmluZCgocG9pbnRlcjogR3JpZFBvaW50ZXIpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHBvaW50ZXIueCA9PT0gYyAmJiBwb2ludGVyLnkgPT09IHI7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgaWYgKGlzRHJhd24pIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5jYW52YXNSZW5kZXJpbmcuZmlsbFN0eWxlID0gaXNEcmF3bi5jb2xvciA/IGlzRHJhd24uY29sb3IgOiB0aGlzLmRlZmF1bHRGaWxsU3R5bGU7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuY2FudmFzUmVuZGVyaW5nLmZpbGxSZWN0KHBvc2l0aW9uWCwgcG9zaXRpb25ZLCBib3hXaWR0aCwgYm94SGVpZ2h0KTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmNhbnZhc1JlbmRlcmluZy5zdHJva2VSZWN0KHBvc2l0aW9uWCwgcG9zaXRpb25ZLCBib3hXaWR0aCwgYm94SGVpZ2h0KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG59IiwiZXhwb3J0IGNsYXNzIEdyaWRQb2ludGVyIHtcbiAgICBwdWJsaWMgeDogbnVtYmVyO1xuICAgIHB1YmxpYyB5OiBudW1iZXI7XG4gICAgcHVibGljIGNvbG9yOiBzdHJpbmc7XG4gICAgY29uc3RydWN0b3IoeDogbnVtYmVyLCB5OiBudW1iZXIsIGNvbG9yOiBzdHJpbmcgPSAnJykge1xuICAgICAgICB0aGlzLnggPSB4O1xuICAgICAgICB0aGlzLnkgPSB5O1xuICAgICAgICB0aGlzLmNvbG9yID0gY29sb3I7XG4gICAgfVxuXG4gICAgcHVibGljIG1vdmVSaWdodCgpOiB2b2lkIHtcbiAgICAgICAgdGhpcy54Kys7XG4gICAgfVxuXG4gICAgcHVibGljIG1vdmVMZWZ0KCk6IHZvaWQge1xuICAgICAgICB0aGlzLngtLTtcbiAgICB9XG5cbiAgICBwdWJsaWMgbW92ZVVwKCk6IHZvaWQge1xuICAgICAgICB0aGlzLnktLTtcbiAgICB9XG5cbiAgICBwdWJsaWMgbW92ZURvd24oKTogdm9pZCB7XG4gICAgICAgIHRoaXMueSsrO1xuICAgIH1cblxuICAgIHB1YmxpYyBjb3B5KCk6IEdyaWRQb2ludGVyIHtcbiAgICAgICAgcmV0dXJuIG5ldyBHcmlkUG9pbnRlcih0aGlzLngsIHRoaXMueSwgdGhpcy5jb2xvcik7XG4gICAgfVxufSIsImltcG9ydCB7R3JpZFBvaW50ZXJ9IGZyb20gJy4vZ3JpZC1wb2ludGVyJztcbmltcG9ydCB7SW50ZXJhY3Rpb25zfSBmcm9tICcuL2ludGVyYWN0aW9ucy5pbnRlcmZhY2UnO1xuaW1wb3J0IHtQbGF5Z3JvdW5kfSBmcm9tICcuL3BsYXlncm91bmQnO1xuXG5leHBvcnQgY2xhc3MgU2hhcGUgaW1wbGVtZW50cyBJbnRlcmFjdGlvbnMge1xuICAgIHB1YmxpYyBjdXJyZW50Um90YXRpb24gPSAwO1xuICAgIHB1YmxpYyBwb2ludGVyOiBHcmlkUG9pbnRlcjtcbiAgICBwcml2YXRlIHBsYXlncm91bmQ6IFBsYXlncm91bmQ7XG5cbiAgICBjb25zdHJ1Y3RvcihcbiAgICAgICAgcHJpdmF0ZSByb3RhdGlvbnM6IEFycmF5PEFycmF5PEdyaWRQb2ludGVyPj4sXG4gICAgICAgIHByaXZhdGUgc2l6ZTogbnVtYmVyLFxuICAgICAgICBwcml2YXRlIGNvbG9yOiBzdHJpbmcgPSBcIiNGRkZcIikgeyB9XG5cbiAgICBwdWJsaWMgaW5pdFBvaW50ZXIoKTogdm9pZCB7XG4gICAgICAgIGNvbnN0IGZyb21MZWZ0ID0gTWF0aC5mbG9vcigodGhpcy5wbGF5Z3JvdW5kLmNvbHMgLSAodGhpcy5zaXplKSkgLyAyKTtcbiAgICAgICAgdGhpcy5wb2ludGVyID0gbmV3IEdyaWRQb2ludGVyKGZyb21MZWZ0LCAtICh0aGlzLnNpemUgLSAyKSk7XG4gICAgfVxuXG4gICAgcHVibGljIHNldFBsYXlncm91bmQocGxheWdyb3VuZDogUGxheWdyb3VuZCk6IHZvaWQge1xuICAgICAgICB0aGlzLnBsYXlncm91bmQgPSBwbGF5Z3JvdW5kO1xuICAgIH1cblxuICAgIHB1YmxpYyByb3RhdGUoKTogU2hhcGUge1xuICAgICAgICB0aGlzLmN1cnJlbnRSb3RhdGlvbiA9IHRoaXMuY3VycmVudFJvdGF0aW9uICsgMSA+PSB0aGlzLnJvdGF0aW9ucy5sZW5ndGggPyAwIDogdGhpcy5jdXJyZW50Um90YXRpb24gKyAxO1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9XG5cbiAgICBwdWJsaWMgbW92ZVJpZ2h0KCk6IFNoYXBlIHtcbiAgICAgICAgdGhpcy5wb2ludGVyLm1vdmVSaWdodCgpO1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9XG5cbiAgICBwdWJsaWMgbW92ZUxlZnQoKTogU2hhcGUge1xuICAgICAgICB0aGlzLnBvaW50ZXIubW92ZUxlZnQoKTtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxuXG4gICAgcHVibGljIG1vdmVEb3duKCk6IFNoYXBlIHtcbiAgICAgICAgdGhpcy5wb2ludGVyLm1vdmVEb3duKCk7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cblxuICAgIHB1YmxpYyBjb3B5KCk6IFNoYXBlIHtcbiAgICAgICAgY29uc3QgbmV3U2hhcGUgPSBuZXcgU2hhcGUodGhpcy5yb3RhdGlvbnMsIHRoaXMuc2l6ZSk7XG4gICAgICAgIG5ld1NoYXBlLmN1cnJlbnRSb3RhdGlvbiA9IHRoaXMuY3VycmVudFJvdGF0aW9uO1xuICAgICAgICBuZXdTaGFwZS5wb2ludGVyID0gdGhpcy5wb2ludGVyLmNvcHkoKTtcbiAgICAgICAgcmV0dXJuIG5ld1NoYXBlO1xuICAgIH1cblxuICAgIHB1YmxpYyBjYWxjdWxhdGVDb29yZGluYXRlcyhjYWxjdWxhdGlvblBvaW50ZXI6IEdyaWRQb2ludGVyID0gdGhpcy5wb2ludGVyKTogQXJyYXk8R3JpZFBvaW50ZXI+IHtcbiAgICAgICAgY29uc3QgY3VycmVudFJvdGF0aW9uID0gdGhpcy5nZXRDdXJyZW50Um90YXRpb24oKTtcbiAgICAgICAgcmV0dXJuIGN1cnJlbnRSb3RhdGlvbi5tYXAoKGN1cnJlbnRGaWVsZDogR3JpZFBvaW50ZXIpID0+IHtcbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgeDogY2FsY3VsYXRpb25Qb2ludGVyLnggKyBjdXJyZW50RmllbGQueCxcbiAgICAgICAgICAgICAgICB5OiBjYWxjdWxhdGlvblBvaW50ZXIueSArIGN1cnJlbnRGaWVsZC55LFxuICAgICAgICAgICAgICAgIGNvbG9yOiB0aGlzLmNvbG9yXG4gICAgICAgICAgICB9IGFzIEdyaWRQb2ludGVyO1xuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICBwcml2YXRlIGdldEN1cnJlbnRSb3RhdGlvbigpOiBBcnJheTxHcmlkUG9pbnRlcj4ge1xuICAgICAgICByZXR1cm4gdGhpcy5yb3RhdGlvbnNbdGhpcy5jdXJyZW50Um90YXRpb25dO1xuICAgIH1cbn1cbiIsImltcG9ydCB7R3JpZFBvaW50ZXJ9IGZyb20gJy4uL2dyaWQtcG9pbnRlcic7XG5pbXBvcnQge1BsYXlncm91bmR9IGZyb20gJy4uL3BsYXlncm91bmQnO1xuaW1wb3J0IHtTaGFwZX0gZnJvbSAnLi4vc2hhcGUnO1xuXG5leHBvcnQgY2xhc3MgQmxvY2sgZXh0ZW5kcyBTaGFwZSB7XG5cbiAgICAvKlxuICAgIEJsb2NrIFNoYXBlczpcbiAgICAxOiAgbyAgb1xuICAgICAgICBvICBvXG4gICAgKi9cbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgc3VwZXIoW1xuICAgICAgICAgICAgW1xuICAgICAgICAgICAgICAgIG5ldyBHcmlkUG9pbnRlcigwLCAwKSxcbiAgICAgICAgICAgICAgICBuZXcgR3JpZFBvaW50ZXIoMCwgMSksXG4gICAgICAgICAgICAgICAgbmV3IEdyaWRQb2ludGVyKDEsIDApLFxuICAgICAgICAgICAgICAgIG5ldyBHcmlkUG9pbnRlcigxLCAxKSxcbiAgICAgICAgICAgIF1cbiAgICAgICAgXSwgMiwgJyNmZjU3MjInKTtcbiAgICB9XG59IiwiaW1wb3J0IHtHcmlkUG9pbnRlcn0gZnJvbSAnLi4vZ3JpZC1wb2ludGVyJztcbmltcG9ydCB7UGxheWdyb3VuZH0gZnJvbSAnLi4vcGxheWdyb3VuZCc7XG5pbXBvcnQge1NoYXBlfSBmcm9tICcuLi9zaGFwZSc7XG5cbmV4cG9ydCBjbGFzcyBMTWlycm9yU2hhcGUgZXh0ZW5kcyBTaGFwZSB7XG5cbiAgICAvKlxuICAgIExNaXJyb3JTaGFwZTpcbiAgICAxOiAgbyAgbyAgeCAgICAgMjogIHggIHggIG8gICAgIDM6ICB4ICBvICB4ICAgICA0OiAgeCAgeCAgeFxuICAgICAgICB4ICBvICB4ICAgICAgICAgbyAgbyAgbyAgICAgICAgIHggIG8gIHggICAgICAgICBvICBvICBvXG4gICAgICAgIHggIG8gIHggICAgICAgICB4ICB4ICB4ICAgICAgICAgeCAgbyAgbyAgICAgICAgIG8gIHggIHhcbiAgICAqL1xuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICBzdXBlcihbXG4gICAgICAgICAgICBbXG4gICAgICAgICAgICAgICAgbmV3IEdyaWRQb2ludGVyKDAsIDApLFxuICAgICAgICAgICAgICAgIG5ldyBHcmlkUG9pbnRlcigxLCAwKSxcbiAgICAgICAgICAgICAgICBuZXcgR3JpZFBvaW50ZXIoMSwgMSksXG4gICAgICAgICAgICAgICAgbmV3IEdyaWRQb2ludGVyKDEsIDIpXG4gICAgICAgICAgICBdLFxuICAgICAgICAgICAgW1xuICAgICAgICAgICAgICAgIG5ldyBHcmlkUG9pbnRlcigwLCAxKSxcbiAgICAgICAgICAgICAgICBuZXcgR3JpZFBvaW50ZXIoMSwgMSksXG4gICAgICAgICAgICAgICAgbmV3IEdyaWRQb2ludGVyKDIsIDEpLFxuICAgICAgICAgICAgICAgIG5ldyBHcmlkUG9pbnRlcigyLCAwKVxuICAgICAgICAgICAgXSxcbiAgICAgICAgICAgIFtcbiAgICAgICAgICAgICAgICBuZXcgR3JpZFBvaW50ZXIoMSwgMCksXG4gICAgICAgICAgICAgICAgbmV3IEdyaWRQb2ludGVyKDEsIDEpLFxuICAgICAgICAgICAgICAgIG5ldyBHcmlkUG9pbnRlcigxLCAyKSxcbiAgICAgICAgICAgICAgICBuZXcgR3JpZFBvaW50ZXIoMiwgMilcbiAgICAgICAgICAgIF0sXG4gICAgICAgICAgICBbXG4gICAgICAgICAgICAgICAgbmV3IEdyaWRQb2ludGVyKDAsIDEpLFxuICAgICAgICAgICAgICAgIG5ldyBHcmlkUG9pbnRlcigxLCAxKSxcbiAgICAgICAgICAgICAgICBuZXcgR3JpZFBvaW50ZXIoMiwgMSksXG4gICAgICAgICAgICAgICAgbmV3IEdyaWRQb2ludGVyKDAsIDIpXG4gICAgICAgICAgICBdXG4gICAgICAgIF0sIDMsICcjZmZjMTA3Jyk7XG4gICAgfVxufSIsImltcG9ydCB7R3JpZFBvaW50ZXJ9IGZyb20gJy4uL2dyaWQtcG9pbnRlcic7XG5pbXBvcnQge1BsYXlncm91bmR9IGZyb20gJy4uL3BsYXlncm91bmQnO1xuaW1wb3J0IHtTaGFwZX0gZnJvbSAnLi4vc2hhcGUnO1xuXG5leHBvcnQgY2xhc3MgTFNoYXBlIGV4dGVuZHMgU2hhcGUge1xuXG4gICAgLypcbiAgICBMU2hhcGU6XG4gICAgMTogIHggIG8gIG8gICAgIDI6ICB4ICB4ICB4ICAgICAzOiAgeCAgbyAgeCAgICAgNDogIG8gIHggIHhcbiAgICAgICAgeCAgbyAgeCAgICAgICAgIG8gIG8gIG8gICAgICAgICB4ICBvICB4ICAgICAgICAgbyAgbyAgb1xuICAgICAgICB4ICBvICB4ICAgICAgICAgeCAgeCAgbyAgICAgICAgIG8gIG8gIHggICAgICAgICB4ICB4ICB4XG4gICAgKi9cbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgc3VwZXIoW1xuICAgICAgICAgICAgW1xuICAgICAgICAgICAgICAgIG5ldyBHcmlkUG9pbnRlcigxLCAwKSxcbiAgICAgICAgICAgICAgICBuZXcgR3JpZFBvaW50ZXIoMiwgMCksXG4gICAgICAgICAgICAgICAgbmV3IEdyaWRQb2ludGVyKDEsIDEpLFxuICAgICAgICAgICAgICAgIG5ldyBHcmlkUG9pbnRlcigxLCAyKVxuICAgICAgICAgICAgXSxcbiAgICAgICAgICAgIFtcbiAgICAgICAgICAgICAgICBuZXcgR3JpZFBvaW50ZXIoMCwgMSksXG4gICAgICAgICAgICAgICAgbmV3IEdyaWRQb2ludGVyKDEsIDEpLFxuICAgICAgICAgICAgICAgIG5ldyBHcmlkUG9pbnRlcigyLCAxKSxcbiAgICAgICAgICAgICAgICBuZXcgR3JpZFBvaW50ZXIoMiwgMilcbiAgICAgICAgICAgIF0sXG4gICAgICAgICAgICBbXG4gICAgICAgICAgICAgICAgbmV3IEdyaWRQb2ludGVyKDEsIDApLFxuICAgICAgICAgICAgICAgIG5ldyBHcmlkUG9pbnRlcigxLCAxKSxcbiAgICAgICAgICAgICAgICBuZXcgR3JpZFBvaW50ZXIoMSwgMiksXG4gICAgICAgICAgICAgICAgbmV3IEdyaWRQb2ludGVyKDAsIDIpXG4gICAgICAgICAgICBdLFxuICAgICAgICAgICAgW1xuICAgICAgICAgICAgICAgIG5ldyBHcmlkUG9pbnRlcigwLCAwKSxcbiAgICAgICAgICAgICAgICBuZXcgR3JpZFBvaW50ZXIoMCwgMSksXG4gICAgICAgICAgICAgICAgbmV3IEdyaWRQb2ludGVyKDEsIDEpLFxuICAgICAgICAgICAgICAgIG5ldyBHcmlkUG9pbnRlcigyLCAxKVxuICAgICAgICAgICAgXVxuICAgICAgICBdLCAzLCAnIzhiYzM0YScpO1xuICAgIH1cbn0iLCJpbXBvcnQge0dyaWRQb2ludGVyfSBmcm9tICcuLi9ncmlkLXBvaW50ZXInO1xuaW1wb3J0IHtQbGF5Z3JvdW5kfSBmcm9tICcuLi9wbGF5Z3JvdW5kJztcbmltcG9ydCB7U2hhcGV9IGZyb20gJy4uL3NoYXBlJztcblxuZXhwb3J0IGNsYXNzIExpbmUgZXh0ZW5kcyBTaGFwZSB7XG5cbiAgICAvKlxuICAgIExpbmUgU2hhcGVzOlxuICAgIDE6ICB4ICBvICB4ICB4ICAgICAgMjogIHggIHggIHggIHggICAgICAzOiAgeCAgeCAgbyAgeCAgICAgIDQ6ICB4ICB4ICB4ICB4XG4gICAgICAgIHggIG8gIHggIHggICAgICAgICAgbyAgbyAgbyAgbyAgICAgICAgICB4ICB4ICBvICB4ICAgICAgICAgIG8gIG8gIG8gIG9cbiAgICAgICAgeCAgbyAgeCAgeCAgICAgICAgICB4ICB4ICB4ICB4ICAgICAgICAgIHggIHggIG8gIHggICAgICAgICAgeCAgeCAgeCAgeFxuICAgICAgICB4ICBvICB4ICB4ICAgICAgICAgIHggIHggIHggIHggICAgICAgICAgeCAgeCAgbyAgeCAgICAgICAgICB4ICB4ICB4ICB4XG4gICAgKi9cbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgc3VwZXIoW1xuICAgICAgICAgICAgW1xuICAgICAgICAgICAgICAgIG5ldyBHcmlkUG9pbnRlcigxLCAwKSxcbiAgICAgICAgICAgICAgICBuZXcgR3JpZFBvaW50ZXIoMSwgMSksXG4gICAgICAgICAgICAgICAgbmV3IEdyaWRQb2ludGVyKDEsIDIpLFxuICAgICAgICAgICAgICAgIG5ldyBHcmlkUG9pbnRlcigxLCAzKVxuICAgICAgICAgICAgXSxcbiAgICAgICAgICAgIFtcbiAgICAgICAgICAgICAgICBuZXcgR3JpZFBvaW50ZXIoMCwgMSksXG4gICAgICAgICAgICAgICAgbmV3IEdyaWRQb2ludGVyKDEsIDEpLFxuICAgICAgICAgICAgICAgIG5ldyBHcmlkUG9pbnRlcigyLCAxKSxcbiAgICAgICAgICAgICAgICBuZXcgR3JpZFBvaW50ZXIoMywgMSlcbiAgICAgICAgICAgIF0sXG4gICAgICAgICAgICBbXG4gICAgICAgICAgICAgICAgbmV3IEdyaWRQb2ludGVyKDIsIDApLFxuICAgICAgICAgICAgICAgIG5ldyBHcmlkUG9pbnRlcigyLCAxKSxcbiAgICAgICAgICAgICAgICBuZXcgR3JpZFBvaW50ZXIoMiwgMiksXG4gICAgICAgICAgICAgICAgbmV3IEdyaWRQb2ludGVyKDIsIDMpXG4gICAgICAgICAgICBdLFxuICAgICAgICAgICAgW1xuICAgICAgICAgICAgICAgIG5ldyBHcmlkUG9pbnRlcigwLCAxKSxcbiAgICAgICAgICAgICAgICBuZXcgR3JpZFBvaW50ZXIoMSwgMSksXG4gICAgICAgICAgICAgICAgbmV3IEdyaWRQb2ludGVyKDIsIDEpLFxuICAgICAgICAgICAgICAgIG5ldyBHcmlkUG9pbnRlcigzLCAxKVxuICAgICAgICAgICAgXVxuICAgICAgICBdLCA0LCAnIzAwOTY4OCcpO1xuICAgIH1cbn0iLCJpbXBvcnQge0dyaWRQb2ludGVyfSBmcm9tICcuLi9ncmlkLXBvaW50ZXInO1xuaW1wb3J0IHtQbGF5Z3JvdW5kfSBmcm9tICcuLi9wbGF5Z3JvdW5kJztcbmltcG9ydCB7U2hhcGV9IGZyb20gJy4uL3NoYXBlJztcblxuZXhwb3J0IGNsYXNzIFNTaGFwZSBleHRlbmRzIFNoYXBlIHtcblxuICAgIC8qXG4gICAgTFNoYXBlOlxuICAgIDE6ICB4ICB4ICB4ICAgICAyOiAgbyAgeCAgeCAgICAgMzogIHggIG8gIG8gICAgIDQ6ICB4ICBvICB4XG4gICAgICAgIHggIG8gIG8gICAgICAgICBvICBvICB4ICAgICAgICAgbyAgbyAgeCAgICAgICAgIHggIG8gIG9cbiAgICAgICAgbyAgbyAgeCAgICAgICAgIHggIG8gIHggICAgICAgICB4ICB4ICB4ICAgICAgICAgeCAgeCAgb1xuICAgICovXG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIHN1cGVyKFtcbiAgICAgICAgICAgIFtcbiAgICAgICAgICAgICAgICBuZXcgR3JpZFBvaW50ZXIoMSwgMSksXG4gICAgICAgICAgICAgICAgbmV3IEdyaWRQb2ludGVyKDIsIDEpLFxuICAgICAgICAgICAgICAgIG5ldyBHcmlkUG9pbnRlcigwLCAyKSxcbiAgICAgICAgICAgICAgICBuZXcgR3JpZFBvaW50ZXIoMSwgMilcbiAgICAgICAgICAgIF0sXG4gICAgICAgICAgICBbXG4gICAgICAgICAgICAgICAgbmV3IEdyaWRQb2ludGVyKDAsIDApLFxuICAgICAgICAgICAgICAgIG5ldyBHcmlkUG9pbnRlcigwLCAxKSxcbiAgICAgICAgICAgICAgICBuZXcgR3JpZFBvaW50ZXIoMSwgMSksXG4gICAgICAgICAgICAgICAgbmV3IEdyaWRQb2ludGVyKDEsIDIpXG4gICAgICAgICAgICBdLFxuICAgICAgICAgICAgW1xuICAgICAgICAgICAgICAgIG5ldyBHcmlkUG9pbnRlcigwLCAxKSxcbiAgICAgICAgICAgICAgICBuZXcgR3JpZFBvaW50ZXIoMSwgMSksXG4gICAgICAgICAgICAgICAgbmV3IEdyaWRQb2ludGVyKDEsIDApLFxuICAgICAgICAgICAgICAgIG5ldyBHcmlkUG9pbnRlcigyLCAwKVxuICAgICAgICAgICAgXSxcbiAgICAgICAgICAgIFtcbiAgICAgICAgICAgICAgICBuZXcgR3JpZFBvaW50ZXIoMSwgMCksXG4gICAgICAgICAgICAgICAgbmV3IEdyaWRQb2ludGVyKDEsIDEpLFxuICAgICAgICAgICAgICAgIG5ldyBHcmlkUG9pbnRlcigyLCAxKSxcbiAgICAgICAgICAgICAgICBuZXcgR3JpZFBvaW50ZXIoMiwgMilcbiAgICAgICAgICAgIF1cbiAgICAgICAgXSwgMywgJyMwM2E5ZjQnKTtcbiAgICB9XG59IiwiaW1wb3J0IHtHcmlkUG9pbnRlcn0gZnJvbSAnLi4vZ3JpZC1wb2ludGVyJztcbmltcG9ydCB7UGxheWdyb3VuZH0gZnJvbSAnLi4vcGxheWdyb3VuZCc7XG5pbXBvcnQge1NoYXBlfSBmcm9tICcuLi9zaGFwZSc7XG5cbmV4cG9ydCBjbGFzcyBUU2hhcGUgZXh0ZW5kcyBTaGFwZSB7XG5cbiAgICAvKlxuICAgIFRTaGFwZTpcbiAgICAxOiAgeCAgbyAgeCAgICAgMjogIHggIG8gIHggICAgIDM6ICB4ICB4ICB4ICAgICA0OiAgeCAgbyAgeFxuICAgICAgICBvICBvICBvICAgICAgICAgeCAgbyAgbyAgICAgICAgIG8gIG8gIG8gICAgICAgICBvICBvICB4XG4gICAgICAgIHggIHggIHggICAgICAgICB4ICBvICB4ICAgICAgICAgeCAgbyAgeCAgICAgICAgIHggIG8gIHhcbiAgICAqL1xuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICBzdXBlcihbXG4gICAgICAgICAgICBbXG4gICAgICAgICAgICAgICAgbmV3IEdyaWRQb2ludGVyKDAsIDEpLFxuICAgICAgICAgICAgICAgIG5ldyBHcmlkUG9pbnRlcigxLCAwKSxcbiAgICAgICAgICAgICAgICBuZXcgR3JpZFBvaW50ZXIoMSwgMSksXG4gICAgICAgICAgICAgICAgbmV3IEdyaWRQb2ludGVyKDEsIDIpXG4gICAgICAgICAgICBdLFxuICAgICAgICAgICAgW1xuICAgICAgICAgICAgICAgIG5ldyBHcmlkUG9pbnRlcigxLCAwKSxcbiAgICAgICAgICAgICAgICBuZXcgR3JpZFBvaW50ZXIoMCwgMSksXG4gICAgICAgICAgICAgICAgbmV3IEdyaWRQb2ludGVyKDEsIDEpLFxuICAgICAgICAgICAgICAgIG5ldyBHcmlkUG9pbnRlcigyLCAxKVxuICAgICAgICAgICAgXSxcbiAgICAgICAgICAgIFtcbiAgICAgICAgICAgICAgICBuZXcgR3JpZFBvaW50ZXIoMSwgMCksXG4gICAgICAgICAgICAgICAgbmV3IEdyaWRQb2ludGVyKDEsIDEpLFxuICAgICAgICAgICAgICAgIG5ldyBHcmlkUG9pbnRlcigxLCAyKSxcbiAgICAgICAgICAgICAgICBuZXcgR3JpZFBvaW50ZXIoMiwgMSlcbiAgICAgICAgICAgIF0sXG4gICAgICAgICAgICBbXG4gICAgICAgICAgICAgICAgbmV3IEdyaWRQb2ludGVyKDAsIDEpLFxuICAgICAgICAgICAgICAgIG5ldyBHcmlkUG9pbnRlcigxLCAxKSxcbiAgICAgICAgICAgICAgICBuZXcgR3JpZFBvaW50ZXIoMiwgMSksXG4gICAgICAgICAgICAgICAgbmV3IEdyaWRQb2ludGVyKDEsIDIpXG4gICAgICAgICAgICBdXG4gICAgICAgIF0sIDMsICcjNjczYWI3Jyk7XG4gICAgfVxufSIsImltcG9ydCB7R3JpZFBvaW50ZXJ9IGZyb20gJy4uL2dyaWQtcG9pbnRlcic7XG5pbXBvcnQge1BsYXlncm91bmR9IGZyb20gJy4uL3BsYXlncm91bmQnO1xuaW1wb3J0IHtTaGFwZX0gZnJvbSAnLi4vc2hhcGUnO1xuXG5leHBvcnQgY2xhc3MgWlNoYXBlIGV4dGVuZHMgU2hhcGUge1xuXG4gICAgLypcbiAgICB6U2hhcGU6XG4gICAgMTogIHggIHggIHggICAgIDI6ICB4ICBvICB4ICAgICAzOiAgbyAgbyAgeCAgICAgNDogIHggIHggIG9cbiAgICAgICAgbyAgbyAgeCAgICAgICAgIG8gIG8gIHggICAgICAgICB4ICBvICBvICAgICAgICAgeCAgbyAgb1xuICAgICAgICB4ICBvICBvICAgICAgICAgbyAgeCAgeCAgICAgICAgIHggIHggIHggICAgICAgICB4ICBvICB4XG4gICAgKi9cbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgc3VwZXIoW1xuICAgICAgICAgICAgW1xuICAgICAgICAgICAgICAgIG5ldyBHcmlkUG9pbnRlcigwLCAxKSxcbiAgICAgICAgICAgICAgICBuZXcgR3JpZFBvaW50ZXIoMSwgMSksXG4gICAgICAgICAgICAgICAgbmV3IEdyaWRQb2ludGVyKDEsIDIpLFxuICAgICAgICAgICAgICAgIG5ldyBHcmlkUG9pbnRlcigyLCAyKVxuICAgICAgICAgICAgXSxcbiAgICAgICAgICAgIFtcbiAgICAgICAgICAgICAgICBuZXcgR3JpZFBvaW50ZXIoMCwgMSksXG4gICAgICAgICAgICAgICAgbmV3IEdyaWRQb2ludGVyKDAsIDIpLFxuICAgICAgICAgICAgICAgIG5ldyBHcmlkUG9pbnRlcigxLCAxKSxcbiAgICAgICAgICAgICAgICBuZXcgR3JpZFBvaW50ZXIoMSwgMClcbiAgICAgICAgICAgIF0sXG4gICAgICAgICAgICBbXG4gICAgICAgICAgICAgICAgbmV3IEdyaWRQb2ludGVyKDAsIDApLFxuICAgICAgICAgICAgICAgIG5ldyBHcmlkUG9pbnRlcigxLCAwKSxcbiAgICAgICAgICAgICAgICBuZXcgR3JpZFBvaW50ZXIoMSwgMSksXG4gICAgICAgICAgICAgICAgbmV3IEdyaWRQb2ludGVyKDIsIDEpXG4gICAgICAgICAgICBdLFxuICAgICAgICAgICAgW1xuICAgICAgICAgICAgICAgIG5ldyBHcmlkUG9pbnRlcigyLCAwKSxcbiAgICAgICAgICAgICAgICBuZXcgR3JpZFBvaW50ZXIoMSwgMSksXG4gICAgICAgICAgICAgICAgbmV3IEdyaWRQb2ludGVyKDEsIDIpLFxuICAgICAgICAgICAgICAgIG5ldyBHcmlkUG9pbnRlcigyLCAxKVxuICAgICAgICAgICAgXVxuICAgICAgICBdLCAzLCAnI2U5MWU2MycpO1xuICAgIH1cbn0iLCJpbXBvcnQge0dyaWRQb2ludGVyfSBmcm9tICcuL2dyaWQtcG9pbnRlcic7XG5pbXBvcnQge0ludGVyYWN0aW9uc30gZnJvbSAnLi9pbnRlcmFjdGlvbnMuaW50ZXJmYWNlJztcbmltcG9ydCB7U2hhcGV9IGZyb20gJy4vc2hhcGUnO1xuaW1wb3J0IHtCbG9ja30gZnJvbSAnLi9zaGFwZXMvYmxvY2snO1xuaW1wb3J0IHtMTWlycm9yU2hhcGV9IGZyb20gJy4vc2hhcGVzL2wtbWlycm9yLXNoYXBlJztcbmltcG9ydCB7TFNoYXBlfSBmcm9tICcuL3NoYXBlcy9sLXNoYXBlJztcbmltcG9ydCB7TGluZX0gZnJvbSAnLi9zaGFwZXMvbGluZSc7XG5pbXBvcnQge1NTaGFwZX0gZnJvbSAnLi9zaGFwZXMvcy1zaGFwZSc7XG5pbXBvcnQge1RTaGFwZX0gZnJvbSAnLi9zaGFwZXMvdC1zaGFwZSc7XG5pbXBvcnQge1pTaGFwZX0gZnJvbSAnLi9zaGFwZXMvei1zaGFwZSc7XG5cbmV4cG9ydCBjbGFzcyBQbGF5Z3JvdW5kIGltcGxlbWVudHMgSW50ZXJhY3Rpb25zIHtcbiAgICBwcml2YXRlIGFsbFBvaW50ZXJzOiBBcnJheTxHcmlkUG9pbnRlcj47XG4gICAgcHJpdmF0ZSBzaGFwZTogU2hhcGU7XG4gICAgcHVibGljIHJvd3M6IG51bWJlcjtcbiAgICBwdWJsaWMgY29sczogbnVtYmVyO1xuXG4gICAgY29uc3RydWN0b3Iocm93czogbnVtYmVyLFxuICAgICAgICBjb2xzOiBudW1iZXIpIHtcbiAgICAgICAgdGhpcy5yb3dzID0gcm93cztcbiAgICAgICAgdGhpcy5jb2xzID0gY29scztcbiAgICB9XG5cbiAgICBwdWJsaWMgc3RhcnROZXdHYW1lKCk6IHZvaWQge1xuICAgICAgICB0aGlzLmFsbFBvaW50ZXJzID0gbmV3IEFycmF5PEdyaWRQb2ludGVyPigpO1xuICAgICAgICB0aGlzLmluc2VydE5ld1NoYXBlKCk7XG4gICAgfVxuXG4gICAgcHVibGljIGluc2VydE5ld1NoYXBlKCk6IHZvaWQge1xuICAgICAgICB0aGlzLnNoYXBlID0gdGhpcy5nZXRSYW5kb21TaGFwZSgpO1xuICAgICAgICB0aGlzLnNoYXBlLnNldFBsYXlncm91bmQodGhpcyk7XG4gICAgICAgIHRoaXMuc2hhcGUuaW5pdFBvaW50ZXIoKTtcbiAgICAgICAgaWYgKHRoaXMuZGV0ZWN0Q29sbGlzaW9uT3JPdXRPZkJvdW5kcyh0aGlzLnNoYXBlKSkge1xuICAgICAgICAgICAgdGhpcy5zdGFydE5ld0dhbWUoKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHB1YmxpYyBnZXRQbGF5Z3JvdW5kKCk6IEFycmF5PEdyaWRQb2ludGVyPiB7XG4gICAgICAgIHJldHVybiBbXG4gICAgICAgICAgICAuLi50aGlzLmFsbFBvaW50ZXJzLFxuICAgICAgICAgICAgLi4udGhpcy5zaGFwZS5jYWxjdWxhdGVDb29yZGluYXRlcygpXG4gICAgICAgIF07XG4gICAgfVxuXG4gICAgcHVibGljIGdldEN1cnJlbnRTaGFwZSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuc2hhcGU7XG4gICAgfVxuICAgIHB1YmxpYyBtb3ZlUmlnaHQoKTogdm9pZCB7XG4gICAgICAgIGlmICghdGhpcy5kZXRlY3RDb2xsaXNpb25Pck91dE9mQm91bmRzKHRoaXMuc2hhcGUuY29weSgpLm1vdmVSaWdodCgpKSkge1xuICAgICAgICAgICAgdGhpcy5zaGFwZS5tb3ZlUmlnaHQoKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBwdWJsaWMgbW92ZUxlZnQoKTogdm9pZCB7XG4gICAgICAgIGlmICghdGhpcy5kZXRlY3RDb2xsaXNpb25Pck91dE9mQm91bmRzKHRoaXMuc2hhcGUuY29weSgpLm1vdmVMZWZ0KCkpKSB7XG4gICAgICAgICAgICB0aGlzLnNoYXBlLm1vdmVMZWZ0KCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgcHVibGljIG1vdmVEb3duKCk6IHZvaWQge1xuICAgICAgICBpZiAoIXRoaXMuZGV0ZWN0Q29sbGlzaW9uT3JPdXRPZkJvdW5kcyh0aGlzLnNoYXBlLmNvcHkoKS5tb3ZlRG93bigpKSkge1xuICAgICAgICAgICAgdGhpcy5zaGFwZS5tb3ZlRG93bigpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5hbGxQb2ludGVycy5wdXNoKC4uLnRoaXMuc2hhcGUuY2FsY3VsYXRlQ29vcmRpbmF0ZXMoKSk7XG4gICAgICAgICAgICB0aGlzLmRldGVjdEFuZFJlbW92ZUZ1bGxMaW5lKCk7XG4gICAgICAgICAgICB0aGlzLmluc2VydE5ld1NoYXBlKCk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBwdWJsaWMgcm90YXRlKCk6IHZvaWQge1xuICAgICAgICBjb25zdCB0ZW1wU2hhcGUgPSB0aGlzLnNoYXBlLmNvcHkoKTtcbiAgICAgICAgdGVtcFNoYXBlLnJvdGF0ZSgpO1xuICAgICAgICBpZiAoIXRoaXMuZGV0ZWN0Q29sbGlzaW9uT3JPdXRPZkJvdW5kcyh0ZW1wU2hhcGUpKSB7XG4gICAgICAgICAgICB0aGlzLnNoYXBlLnJvdGF0ZSgpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKCF0aGlzLmRldGVjdENvbGxpc2lvbk9yT3V0T2ZCb3VuZHModGVtcFNoYXBlLmNvcHkoKS5tb3ZlUmlnaHQoKSkpIHtcbiAgICAgICAgICAgIHRoaXMuc2hhcGUubW92ZVJpZ2h0KCk7XG4gICAgICAgICAgICB0aGlzLnNoYXBlLnJvdGF0ZSgpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKCF0aGlzLmRldGVjdENvbGxpc2lvbk9yT3V0T2ZCb3VuZHModGVtcFNoYXBlLmNvcHkoKS5tb3ZlTGVmdCgpKSkge1xuICAgICAgICAgICAgdGhpcy5zaGFwZS5tb3ZlTGVmdCgpO1xuICAgICAgICAgICAgdGhpcy5zaGFwZS5yb3RhdGUoKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmICghdGhpcy5kZXRlY3RDb2xsaXNpb25Pck91dE9mQm91bmRzKHRlbXBTaGFwZS5jb3B5KCkubW92ZVJpZ2h0KCkubW92ZVJpZ2h0KCkpKSB7XG4gICAgICAgICAgICB0aGlzLnNoYXBlLm1vdmVSaWdodCgpO1xuICAgICAgICAgICAgdGhpcy5zaGFwZS5tb3ZlUmlnaHQoKTtcbiAgICAgICAgICAgIHRoaXMuc2hhcGUucm90YXRlKCk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoIXRoaXMuZGV0ZWN0Q29sbGlzaW9uT3JPdXRPZkJvdW5kcyh0ZW1wU2hhcGUuY29weSgpLm1vdmVMZWZ0KCkubW92ZUxlZnQoKSkpIHtcbiAgICAgICAgICAgIHRoaXMuc2hhcGUubW92ZUxlZnQoKTtcbiAgICAgICAgICAgIHRoaXMuc2hhcGUubW92ZUxlZnQoKTtcbiAgICAgICAgICAgIHRoaXMuc2hhcGUucm90YXRlKCk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBwcml2YXRlIGRldGVjdENvbGxpc2lvbk9yT3V0T2ZCb3VuZHMoc2hhcGU6IFNoYXBlKTogYm9vbGVhbiB7XG4gICAgICAgIGNvbnN0IG91dE9mQm91bmRzID0gc2hhcGUuY2FsY3VsYXRlQ29vcmRpbmF0ZXMoKS5maW5kKChwb2ludGVyOiBHcmlkUG9pbnRlcikgPT4ge1xuICAgICAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICAgICAgICAocG9pbnRlci54IDwgMCkgfHxcbiAgICAgICAgICAgICAgICAocG9pbnRlci54ID49IHRoaXMuY29scykgfHxcbiAgICAgICAgICAgICAgICAocG9pbnRlci55ID49IHRoaXMucm93cylcbiAgICAgICAgICAgICk7XG4gICAgICAgIH0pO1xuICAgICAgICBjb25zdCBjb2xsaXNpb24gPSBzaGFwZS5jYWxjdWxhdGVDb29yZGluYXRlcygpLmZpbmQoKHBvaW50ZXI6IEdyaWRQb2ludGVyKSA9PiB7XG4gICAgICAgICAgICByZXR1cm4gISF0aGlzLmFsbFBvaW50ZXJzLmZpbmQoKHBsYXlncm91bmRQb2ludGVyOiBHcmlkUG9pbnRlcikgPT4ge1xuICAgICAgICAgICAgICAgIHJldHVybiBwbGF5Z3JvdW5kUG9pbnRlci54ID09PSBwb2ludGVyLnggJiYgcGxheWdyb3VuZFBvaW50ZXIueSA9PT0gcG9pbnRlci55O1xuICAgICAgICAgICAgfSlcbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiAhIW91dE9mQm91bmRzIHx8ICEhY29sbGlzaW9uO1xuICAgIH1cblxuICAgIHByaXZhdGUgZGV0ZWN0QW5kUmVtb3ZlRnVsbExpbmUoKTogdm9pZCB7XG4gICAgICAgIHRoaXMuZGV0ZWN0RnVsbExpbmUoKS5mb3JFYWNoKChmdWxsUm93OiBudW1iZXIpID0+IHtcbiAgICAgICAgICAgIHRoaXMuYWxsUG9pbnRlcnMgPSB0aGlzLmFsbFBvaW50ZXJzLmZpbHRlcigocGxheWdyb3VuZFBvaW50ZXI6IEdyaWRQb2ludGVyKSA9PiB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHBsYXlncm91bmRQb2ludGVyLnkgIT09IGZ1bGxSb3c7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHRoaXMuYWxsUG9pbnRlcnMgPSB0aGlzLmFsbFBvaW50ZXJzLm1hcCgocGxheWdyb3VuZFBvaW50ZXI6IEdyaWRQb2ludGVyKSA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKHBsYXlncm91bmRQb2ludGVyLnkgPCBmdWxsUm93KSB7XG4gICAgICAgICAgICAgICAgICAgIHBsYXlncm91bmRQb2ludGVyLnkrKztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmV0dXJuIHBsYXlncm91bmRQb2ludGVyO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIHByaXZhdGUgZGV0ZWN0RnVsbExpbmUoKTogQXJyYXk8bnVtYmVyPiB7XG4gICAgICAgIGNvbnN0IGZ1bGxMaW5lcyA9IG5ldyBBcnJheTxudW1iZXI+KCk7XG4gICAgICAgIGZvciAobGV0IHJvdyA9IDA7IHJvdyA8IHRoaXMucm93czsgcm93KyspIHtcbiAgICAgICAgICAgIGNvbnN0IGZvdW5kUG9pbnRlcnMgPSB0aGlzLmFsbFBvaW50ZXJzLmZpbHRlcigocGxheWdyb3VuZFBvaW50ZXI6IEdyaWRQb2ludGVyKSA9PiB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHBsYXlncm91bmRQb2ludGVyLnkgPT09IHJvdztcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgaWYgKGZvdW5kUG9pbnRlcnMubGVuZ3RoID09PSB0aGlzLmNvbHMpIHtcbiAgICAgICAgICAgICAgICBmdWxsTGluZXMucHVzaChyb3cpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBmdWxsTGluZXM7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBnZXRSYW5kb21TaGFwZSgpOiBTaGFwZSB7XG4gICAgICAgIHN3aXRjaCAoTWF0aC5yb3VuZChNYXRoLnJhbmRvbSgpICogNikpIHtcbiAgICAgICAgICAgIGNhc2UgMDogcmV0dXJuIG5ldyBCbG9jaygpO1xuICAgICAgICAgICAgY2FzZSAxOiByZXR1cm4gbmV3IExNaXJyb3JTaGFwZSgpO1xuICAgICAgICAgICAgY2FzZSAyOiByZXR1cm4gbmV3IExTaGFwZSgpO1xuICAgICAgICAgICAgY2FzZSAzOiByZXR1cm4gbmV3IExpbmUoKTtcbiAgICAgICAgICAgIGNhc2UgNDogcmV0dXJuIG5ldyBTU2hhcGUoKTtcbiAgICAgICAgICAgIGNhc2UgNTogcmV0dXJuIG5ldyBUU2hhcGUoKTtcbiAgICAgICAgICAgIGNhc2UgNjogcmV0dXJuIG5ldyBaU2hhcGUoKTtcbiAgICAgICAgfVxuICAgIH1cbn0iLCJpbXBvcnQge1RzdHJpc30gZnJvbSAnLi90c3RyaXMnO1xuXG5uZXcgVHN0cmlzKChkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbWFpbicpIGFzIEhUTUxDYW52YXNFbGVtZW50KS5nZXRDb250ZXh0KCcyZCcpKTsiLCJpbXBvcnQge0V2ZW50c30gZnJvbSAnLi9ldmVudHMnO1xuaW1wb3J0IHtQYWludGVyfSBmcm9tICcuL3BhaW50ZXInO1xuaW1wb3J0IHtQbGF5Z3JvdW5kfSBmcm9tICcuL3BsYXlncm91bmQnO1xuXG5leHBvcnQgY2xhc3MgVHN0cmlzIHtcbiAgICBwcml2YXRlIHBsYXlncm91bmQ6IFBsYXlncm91bmQ7XG4gICAgcHJpdmF0ZSBwYWludGVyOiBQYWludGVyO1xuICAgIHByaXZhdGUgZXZlbnRzOiBFdmVudHM7XG4gICAgcHJpdmF0ZSBjb2xzID0gODtcbiAgICBwcml2YXRlIHJvd3MgPSAxNTtcbiAgICBjb25zdHJ1Y3RvcihjYW52YXM6IENhbnZhc1JlbmRlcmluZ0NvbnRleHQyRCkge1xuICAgICAgICB0aGlzLnBsYXlncm91bmQgPSBuZXcgUGxheWdyb3VuZCh0aGlzLnJvd3MsIHRoaXMuY29scyk7XG4gICAgICAgIHRoaXMucGFpbnRlciA9IG5ldyBQYWludGVyKGNhbnZhcywgdGhpcy5wbGF5Z3JvdW5kKTtcbiAgICAgICAgdGhpcy5ldmVudHMgPSBuZXcgRXZlbnRzKHRoaXMucGxheWdyb3VuZCwgdGhpcy5wYWludGVyKTtcbiAgICAgICAgdGhpcy5wbGF5Z3JvdW5kLnN0YXJ0TmV3R2FtZSgpO1xuICAgICAgICB0aGlzLnBhaW50ZXIuZHJhd1BsYXlncm91bmQoKTtcbiAgICB9XG59Il0sInNvdXJjZVJvb3QiOiIifQ==